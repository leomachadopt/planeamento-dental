{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/lib/api-shared/auth.ts"],"sourcesContent":["import type { VercelRequest, VercelResponse } from '@vercel/node'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport interface AuthRequest extends VercelRequest {\r\n  user?: {\r\n    id: string\r\n    email: string\r\n    role: 'admin' | 'user'\r\n    clinicId?: string\r\n    name: string\r\n  }\r\n}\r\n\r\n// Usar vari√°vel de ambiente ou fallback\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production'\r\n\r\nif (!process.env.JWT_SECRET) {\r\n  console.warn('‚ö†Ô∏è  JWT_SECRET n√£o configurado! Usando valor padr√£o inseguro.')\r\n}\r\n\r\nexport function authenticateToken(\r\n  req: AuthRequest,\r\n  res: VercelResponse,\r\n  next: () => void\r\n) {\r\n  const authHeader = req.headers['authorization']\r\n  const token = authHeader && authHeader.split(' ')[1]\r\n\r\n  if (!token) {\r\n    return res.status(401).json({ error: 'Token n√£o fornecido' })\r\n  }\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_SECRET) as AuthRequest['user']\r\n    req.user = decoded\r\n    next()\r\n  } catch (error) {\r\n    return res.status(403).json({ error: 'Token inv√°lido ou expirado' })\r\n  }\r\n}\r\n\r\nexport function requireAdmin(\r\n  req: AuthRequest,\r\n  res: VercelResponse,\r\n  next: () => void\r\n) {\r\n  if (req.user?.role !== 'admin') {\r\n    return res.status(403).json({ error: 'Acesso negado. Admin necess√°rio.' })\r\n  }\r\n  next()\r\n}\r\n\r\nexport function optionalAuth(\r\n  req: AuthRequest,\r\n  res: VercelResponse,\r\n  next: () => void\r\n) {\r\n  const authHeader = req.headers['authorization']\r\n  const token = authHeader && authHeader.split(' ')[1]\r\n\r\n  if (token) {\r\n    try {\r\n      const decoded = jwt.verify(token, JWT_SECRET) as AuthRequest['user']\r\n      req.user = decoded\r\n    } catch (error) {\r\n      // Token inv√°lido, mas continua sem autentica√ß√£o\r\n    }\r\n  }\r\n  next()\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;AACA;;AAYA,wCAAwC;AACxC,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE7C,IAAI,CAAC,QAAQ,GAAG,CAAC,UAAU,EAAE;IAC3B,QAAQ,IAAI,CAAC;AACf;AAEO,SAAS,kBACd,GAAgB,EAChB,GAAmB,EACnB,IAAgB;IAEhB,MAAM,aAAa,IAAI,OAAO,CAAC,gBAAgB;IAC/C,MAAM,QAAQ,cAAc,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;IAEpD,IAAI,CAAC,OAAO;QACV,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAsB;IAC7D;IAEA,IAAI;QACF,MAAM,UAAU,+NAAG,CAAC,MAAM,CAAC,OAAO;QAClC,IAAI,IAAI,GAAG;QACX;IACF,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA6B;IACpE;AACF;AAEO,SAAS,aACd,GAAgB,EAChB,GAAmB,EACnB,IAAgB;IAEhB,IAAI,IAAI,IAAI,EAAE,SAAS,SAAS;QAC9B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAmC;IAC1E;IACA;AACF;AAEO,SAAS,aACd,GAAgB,EAChB,GAAmB,EACnB,IAAgB;IAEhB,MAAM,aAAa,IAAI,OAAO,CAAC,gBAAgB;IAC/C,MAAM,QAAQ,cAAc,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;IAEpD,IAAI,OAAO;QACT,IAAI;YACF,MAAM,UAAU,+NAAG,CAAC,MAAM,CAAC,OAAO;YAClC,IAAI,IAAI,GAAG;QACb,EAAE,OAAO,OAAO;QACd,gDAAgD;QAClD;IACF;IACA;AACF"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/lib/api-shared/db.ts"],"sourcesContent":["// M√≥dulo compartilhado para API routes\r\n// Este arquivo s√≥ roda no servidor (Node.js)\r\n\r\nimport { Pool } from 'pg'\r\n\r\n// Validar DATABASE_URL\r\nif (!process.env.DATABASE_URL) {\r\n  console.error('‚ùå DATABASE_URL n√£o est√° configurada!')\r\n  console.error('‚ùå Configure DATABASE_URL no arquivo .env.local ou nas vari√°veis de ambiente')\r\n  throw new Error('DATABASE_URL n√£o configurada. Configure no .env.local ou vari√°veis de ambiente.')\r\n}\r\n\r\n// Pool de conex√µes PostgreSQL\r\nconst pool = new Pool({\r\n  connectionString: process.env.DATABASE_URL,\r\n  ssl: {\r\n    rejectUnauthorized: false,\r\n  },\r\n  max: 20,\r\n  idleTimeoutMillis: 30000,\r\n  connectionTimeoutMillis: 2000,\r\n})\r\n\r\npool.on('connect', () => {\r\n  console.log('‚úÖ Conectado ao banco de dados Neon')\r\n})\r\n\r\npool.on('error', (err) => {\r\n  console.error('‚ùå Erro no pool de conex√µes:', err)\r\n})\r\n\r\nexport default pool\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA,uCAAuC;AACvC,6CAA6C;AAE7C;;;;;;AAEA,uBAAuB;AACvB,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;IAC7B,QAAQ,KAAK,CAAC;IACd,QAAQ,KAAK,CAAC;IACd,MAAM,IAAI,MAAM;AAClB;AAEA,8BAA8B;AAC9B,MAAM,OAAO,IAAI,qMAAI,CAAC;IACpB,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK;QACH,oBAAoB;IACtB;IACA,KAAK;IACL,mBAAmB;IACnB,yBAAyB;AAC3B;AAEA,KAAK,EAAE,CAAC,WAAW;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,KAAK,EAAE,CAAC,SAAS,CAAC;IAChB,QAAQ,KAAK,CAAC,+BAA+B;AAC/C;uCAEe"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/pages/api/admin/questions/index.ts"],"sourcesContent":["import type { VercelRequest, VercelResponse } from '@vercel/node'\r\nimport { authenticateToken, requireAdmin, AuthRequest } from '@/lib/api-shared/auth'\r\nimport pool from '@/lib/api-shared/db'\r\n\r\nexport default async function handler(\r\n  req: VercelRequest,\r\n  res: VercelResponse,\r\n) {\r\n  res.setHeader('Access-Control-Allow-Credentials', 'true')\r\n  res.setHeader('Access-Control-Allow-Origin', '*')\r\n  res.setHeader(\r\n    'Access-Control-Allow-Methods',\r\n    'GET,POST,OPTIONS',\r\n  )\r\n  res.setHeader(\r\n    'Access-Control-Allow-Headers',\r\n    'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization',\r\n  )\r\n\r\n  if (req.method === 'OPTIONS') {\r\n    res.status(200).end()\r\n    return\r\n  }\r\n\r\n  return authenticateToken(req as AuthRequest, res, () => {\r\n    return requireAdmin(req as AuthRequest, res, async () => {\r\n      try {\r\n        const { method } = req\r\n\r\n        if (method === 'GET') {\r\n          const { sectionCode, questionSetId } = req.query\r\n          \r\n          console.log('üìã Buscando perguntas:', { sectionCode, questionSetId })\r\n\r\n          // Verificar se a tabela question_contexts existe\r\n          let hasQuestionContexts = false\r\n          try {\r\n            const tableCheck = await pool.query(`\r\n              SELECT EXISTS (\r\n                SELECT FROM information_schema.tables \r\n                WHERE table_schema = 'public' \r\n                AND table_name = 'question_contexts'\r\n              )\r\n            `)\r\n            hasQuestionContexts = tableCheck.rows[0]?.exists || false\r\n          } catch {\r\n            hasQuestionContexts = false\r\n          }\r\n\r\n          let query = `\r\n            SELECT \r\n              q.id,\r\n              q.code,\r\n              q.text,\r\n              q.help_text,\r\n              q.type,\r\n              q.required,\r\n              q.order_index,\r\n              q.validation_schema,\r\n              q.ai_importance_weight,\r\n              q.created_at,\r\n              q.question_set_id,\r\n              qs.section_id,\r\n              qs.name as question_set_name,\r\n              s.code as section_code,\r\n              s.name as section_name\r\n          `\r\n          \r\n          // Adicionar campos de contexto apenas se a tabela existir\r\n          if (hasQuestionContexts) {\r\n            query += `,\r\n              qc.why,\r\n              qc.consequences,\r\n              qc.how_to_answer,\r\n              qc.good_examples,\r\n              qc.bad_examples,\r\n              qc.show_why,\r\n              qc.show_consequences,\r\n              qc.show_how_to_answer,\r\n              qc.show_good_examples,\r\n              qc.show_bad_examples\r\n            FROM questions q\r\n            JOIN question_sets qs ON qs.id = q.question_set_id\r\n            JOIN sections s ON s.id = qs.section_id\r\n            LEFT JOIN question_contexts qc ON qc.question_id = q.id\r\n            WHERE qs.is_active = true\r\n          `\r\n          } else {\r\n            query += `\r\n            FROM questions q\r\n            JOIN question_sets qs ON qs.id = q.question_set_id\r\n            JOIN sections s ON s.id = qs.section_id\r\n            WHERE qs.is_active = true\r\n          `\r\n          }\r\n          const params: any[] = []\r\n          let paramIndex = 1\r\n\r\n          if (sectionCode) {\r\n            query += ` AND s.code = $${paramIndex}`\r\n            params.push(sectionCode)\r\n            paramIndex++\r\n          }\r\n\r\n          if (questionSetId) {\r\n            const qsId = Array.isArray(questionSetId) ? questionSetId[0] : questionSetId\r\n            query += ` AND q.question_set_id = $${paramIndex}`\r\n            params.push(qsId)\r\n            paramIndex++\r\n            console.log('üîç Filtrando por questionSetId:', qsId)\r\n          }\r\n\r\n          query += ` ORDER BY q.order_index`\r\n\r\n          let result\r\n          try {\r\n            console.log('üîç Executando query:', query.substring(0, 200) + '...')\r\n            console.log('üìä Par√¢metros:', params)\r\n            result = await pool.query(query, params)\r\n            console.log(`‚úÖ Query executada com sucesso. ${result.rows.length} perguntas encontradas.`)\r\n          } catch (queryError: any) {\r\n            console.error('‚ùå Erro na query SQL:', queryError)\r\n            console.error('üìù Query completa:', query)\r\n            console.error('üìä Par√¢metros:', params)\r\n            console.error('üîç Stack trace:', queryError.stack)\r\n            throw new Error(`Erro ao executar query: ${queryError.message}`)\r\n          }\r\n\r\n          console.log(`üì¶ Processando ${result.rows.length} perguntas...`)\r\n          \r\n          // Buscar op√ß√µes para cada pergunta\r\n          const questionsWithOptions = await Promise.all(\r\n            result.rows.map(async (q: any, index: number) => {\r\n              if (index === 0) {\r\n                console.log('üìã Primeira pergunta (amostra):', {\r\n                  id: q.id,\r\n                  code: q.code,\r\n                  text: q.text?.substring(0, 50),\r\n                  type: q.type,\r\n                  hasContext: !!(q.why || q.consequences || q.how_to_answer)\r\n                })\r\n              }\r\n              if (q.type === 'single_select' || q.type === 'multi_select') {\r\n                const optionsResult = await pool.query(\r\n                  'SELECT * FROM question_options WHERE question_id = $1 ORDER BY order_index',\r\n                  [q.id]\r\n                )\r\n                q.options = optionsResult.rows.map((opt: any) => ({\r\n                  id: opt.id,\r\n                  label: opt.label,\r\n                  value: opt.value,\r\n                  order_index: opt.order_index,\r\n                }))\r\n              }\r\n              \r\n              // Parse JSON fields - validation_schema √© JSONB, pode vir como objeto ou string\r\n              if (q.validation_schema) {\r\n                if (typeof q.validation_schema === 'string') {\r\n                  try {\r\n                    q.validation_schema = JSON.parse(q.validation_schema)\r\n                  } catch {\r\n                    q.validation_schema = null\r\n                  }\r\n                }\r\n                // Se j√° for objeto, manter como est√°\r\n              } else {\r\n                q.validation_schema = null\r\n              }\r\n              \r\n              // Formatar contexto se existir (apenas se a tabela question_contexts existir)\r\n              if (hasQuestionContexts) {\r\n                // Verificar se h√° algum campo de contexto n√£o nulo\r\n                const hasContext = (q.why !== null && q.why !== undefined) ||\r\n                                  (q.consequences !== null && q.consequences !== undefined) ||\r\n                                  (q.how_to_answer !== null && q.how_to_answer !== undefined) ||\r\n                                  (q.good_examples !== null && q.good_examples !== undefined) ||\r\n                                  (q.bad_examples !== null && q.bad_examples !== undefined)\r\n                \r\n                if (hasContext) {\r\n                // Tratar arrays do PostgreSQL - podem vir como array ou como string\r\n                const normalizeArray = (value: any): string[] => {\r\n                  if (!value) return []\r\n                  if (Array.isArray(value)) return value\r\n                  if (typeof value === 'string') {\r\n                    try {\r\n                      const parsed = JSON.parse(value)\r\n                      return Array.isArray(parsed) ? parsed : []\r\n                    } catch {\r\n                      return [value]\r\n                    }\r\n                  }\r\n                  return []\r\n                }\r\n                \r\n                q.context = {\r\n                  why: q.why || undefined,\r\n                  consequences: normalizeArray(q.consequences),\r\n                  how_to_answer: q.how_to_answer || undefined,\r\n                  good_examples: normalizeArray(q.good_examples),\r\n                  bad_examples: normalizeArray(q.bad_examples),\r\n                  show_why: q.show_why !== undefined && q.show_why !== null ? q.show_why : true,\r\n                  show_consequences: q.show_consequences !== undefined && q.show_consequences !== null ? q.show_consequences : true,\r\n                  show_how_to_answer: q.show_how_to_answer !== undefined && q.show_how_to_answer !== null ? q.show_how_to_answer : true,\r\n                  show_good_examples: q.show_good_examples !== undefined && q.show_good_examples !== null ? q.show_good_examples : true,\r\n                  show_bad_examples: q.show_bad_examples !== undefined && q.show_bad_examples !== null ? q.show_bad_examples : true,\r\n                  }\r\n                } else {\r\n                  q.context = undefined\r\n                }\r\n                \r\n                // Remover campos individuais do contexto para n√£o duplicar\r\n                if ('why' in q) delete q.why\r\n                if ('consequences' in q) delete q.consequences\r\n                if ('how_to_answer' in q) delete q.how_to_answer\r\n                if ('good_examples' in q) delete q.good_examples\r\n                if ('bad_examples' in q) delete q.bad_examples\r\n                if ('show_why' in q) delete q.show_why\r\n                if ('show_consequences' in q) delete q.show_consequences\r\n                if ('show_how_to_answer' in q) delete q.show_how_to_answer\r\n                if ('show_good_examples' in q) delete q.show_good_examples\r\n                if ('show_bad_examples' in q) delete q.show_bad_examples\r\n              } else {\r\n                // Se a tabela n√£o existe, contexto √© sempre undefined\r\n                q.context = undefined\r\n              }\r\n              \r\n              return q\r\n            })\r\n          )\r\n\r\n          console.log(`‚úÖ Processamento conclu√≠do. Retornando ${questionsWithOptions.length} perguntas.`)\r\n          \r\n          try {\r\n            return res.status(200).json(questionsWithOptions)\r\n          } catch (jsonError: any) {\r\n            console.error('‚ùå Erro ao serializar JSON:', jsonError)\r\n            console.error('üìã Primeira pergunta (amostra):', JSON.stringify(questionsWithOptions[0], null, 2))\r\n            throw new Error(`Erro ao serializar resposta: ${jsonError.message}`)\r\n          }\r\n        }\r\n\r\n        if (method === 'POST') {\r\n          const {\r\n            question_set_id,\r\n            code,\r\n            text,\r\n            help_text,\r\n            type,\r\n            required,\r\n            order_index,\r\n            validation_schema,\r\n            ai_importance_weight,\r\n            options,\r\n            context,\r\n          } = req.body\r\n\r\n          console.log('üìù Dados recebidos no POST:', {\r\n            question_set_id,\r\n            code,\r\n            text: text?.substring(0, 50),\r\n            type,\r\n            order_index,\r\n            validation_schema,\r\n            hasOptions: !!options,\r\n            hasContext: !!context,\r\n          })\r\n\r\n          // Validar campos obrigat√≥rios\r\n          if (!question_set_id || !code || !text || !type) {\r\n            return res.status(400).json({ error: 'Campos obrigat√≥rios: question_set_id, code, text, type' })\r\n          }\r\n\r\n          // Se order_index n√£o foi fornecido, definir como 0 (ser√° ajustado pelo frontend)\r\n          const finalOrderIndex = order_index !== undefined ? order_index : 0\r\n\r\n          // Verificar se j√° existe uma pergunta com o mesmo code no mesmo question_set_id\r\n          const existingQuestion = await pool.query(\r\n            'SELECT id, text FROM questions WHERE question_set_id = $1 AND code = $2',\r\n            [question_set_id, code]\r\n          )\r\n\r\n          if (existingQuestion.rows.length > 0) {\r\n            return res.status(409).json({ \r\n              error: 'J√° existe uma pergunta com este c√≥digo neste question set',\r\n              existingId: existingQuestion.rows[0].id,\r\n              existingText: existingQuestion.rows[0].text,\r\n              message: 'Use a edi√ß√£o para atualizar a pergunta existente ou altere o c√≥digo.'\r\n            })\r\n          }\r\n\r\n          // Processar validation_schema: remover propriedades undefined e tratar objeto vazio\r\n          let processedValidationSchema: string | null = null\r\n          if (validation_schema && typeof validation_schema === 'object') {\r\n            // Remover propriedades undefined\r\n            const cleaned = Object.fromEntries(\r\n              Object.entries(validation_schema).filter(([_, v]) => v !== undefined && v !== null && v !== '')\r\n            )\r\n            // S√≥ salvar se tiver pelo menos uma propriedade\r\n            if (Object.keys(cleaned).length > 0) {\r\n              processedValidationSchema = JSON.stringify(cleaned)\r\n            }\r\n          }\r\n\r\n          // Criar pergunta\r\n          const questionResult = await pool.query(\r\n            `INSERT INTO questions (\r\n              question_set_id, code, text, help_text, type, required,\r\n              order_index, validation_schema, ai_importance_weight\r\n            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\r\n            RETURNING *`,\r\n            [\r\n              question_set_id,\r\n              code,\r\n              text,\r\n              help_text || null,\r\n              type,\r\n              required || false,\r\n              finalOrderIndex,\r\n              processedValidationSchema,\r\n              ai_importance_weight || 0.5,\r\n            ]\r\n          )\r\n\r\n          const question = questionResult.rows[0]\r\n\r\n          // Criar op√ß√µes se for sele√ß√£o\r\n          if ((type === 'single_select' || type === 'multi_select') && options && Array.isArray(options)) {\r\n            for (const option of options) {\r\n              await pool.query(\r\n                `INSERT INTO question_options (question_id, label, value, order_index)\r\n                 VALUES ($1, $2, $3, $4)`,\r\n                [question.id, option.label, option.value, option.order_index || 0]\r\n              )\r\n            }\r\n          }\r\n\r\n          // Verificar se a tabela question_contexts existe antes de criar contexto\r\n          let hasQuestionContexts = false\r\n          try {\r\n            const tableCheck = await pool.query(`\r\n              SELECT EXISTS (\r\n                SELECT FROM information_schema.tables \r\n                WHERE table_schema = 'public' \r\n                AND table_name = 'question_contexts'\r\n              )\r\n            `)\r\n            hasQuestionContexts = tableCheck.rows[0]?.exists || false\r\n          } catch {\r\n            hasQuestionContexts = false\r\n          }\r\n\r\n          // Criar contexto se fornecido e se a tabela existir\r\n          if (context && hasQuestionContexts) {\r\n            await pool.query(\r\n              `INSERT INTO question_contexts (\r\n                question_id, why, consequences, how_to_answer, \r\n                good_examples, bad_examples,\r\n                show_why, show_consequences, show_how_to_answer,\r\n                show_good_examples, show_bad_examples\r\n              ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)`,\r\n              [\r\n                question.id,\r\n                context.why || null,\r\n                context.consequences && Array.isArray(context.consequences) ? context.consequences : null,\r\n                context.how_to_answer || null,\r\n                context.good_examples && Array.isArray(context.good_examples) ? context.good_examples : null,\r\n                context.bad_examples && Array.isArray(context.bad_examples) ? context.bad_examples : null,\r\n                context.show_why !== undefined ? context.show_why : true,\r\n                context.show_consequences !== undefined ? context.show_consequences : true,\r\n                context.show_how_to_answer !== undefined ? context.show_how_to_answer : true,\r\n                context.show_good_examples !== undefined ? context.show_good_examples : true,\r\n                context.show_bad_examples !== undefined ? context.show_bad_examples : true,\r\n              ]\r\n            )\r\n          }\r\n\r\n          // Buscar pergunta completa com contexto e op√ß√µes\r\n          let fullQuestionQuery = `SELECT q.* FROM questions q WHERE q.id = $1`\r\n          if (hasQuestionContexts) {\r\n            fullQuestionQuery = `SELECT q.*, qc.*\r\n             FROM questions q\r\n             LEFT JOIN question_contexts qc ON qc.question_id = q.id\r\n             WHERE q.id = $1`\r\n          }\r\n          \r\n          const fullQuestionResult = await pool.query(fullQuestionQuery, [question.id])\r\n\r\n          const fullQuestion = fullQuestionResult.rows[0]\r\n\r\n          if (fullQuestion.type === 'single_select' || fullQuestion.type === 'multi_select') {\r\n            const optionsResult = await pool.query(\r\n              'SELECT * FROM question_options WHERE question_id = $1 ORDER BY order_index',\r\n              [question.id]\r\n            )\r\n            fullQuestion.options = optionsResult.rows\r\n          }\r\n\r\n          return res.status(201).json(fullQuestion)\r\n        }\r\n\r\n        return res.status(405).json({ error: 'Method not allowed' })\r\n      } catch (error: any) {\r\n        console.error('‚ùå Erro na API de perguntas:', error)\r\n        console.error('üîç Stack trace:', error.stack)\r\n        console.error('üìã Request body:', JSON.stringify(req.body, null, 2))\r\n        console.error('üìã Request method:', req.method)\r\n        return res.status(500).json({ \r\n          error: error.message || 'Erro interno do servidor',\r\n          details: process.env.NODE_ENV === 'development' ? error.stack : undefined\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}