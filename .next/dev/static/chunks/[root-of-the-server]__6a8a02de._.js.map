{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack]/browser/dev/hmr-client/hmr-client.ts"],"sourcesContent":["/// <reference path=\"../../../shared/runtime-types.d.ts\" />\n/// <reference path=\"../../runtime/base/dev-globals.d.ts\" />\n/// <reference path=\"../../runtime/base/dev-protocol.d.ts\" />\n/// <reference path=\"../../runtime/base/dev-extensions.ts\" />\n\ntype SendMessage = (msg: any) => void\nexport type WebSocketMessage =\n  | {\n      type: 'turbopack-connected'\n    }\n  | {\n      type: 'turbopack-message'\n      data: Record<string, any>\n    }\n\nexport type ClientOptions = {\n  addMessageListener: (cb: (msg: WebSocketMessage) => void) => void\n  sendMessage: SendMessage\n  onUpdateError: (err: unknown) => void\n}\n\nexport function connect({\n  addMessageListener,\n  sendMessage,\n  onUpdateError = console.error,\n}: ClientOptions) {\n  addMessageListener((msg) => {\n    switch (msg.type) {\n      case 'turbopack-connected':\n        handleSocketConnected(sendMessage)\n        break\n      default:\n        try {\n          if (Array.isArray(msg.data)) {\n            for (let i = 0; i < msg.data.length; i++) {\n              handleSocketMessage(msg.data[i] as ServerMessage)\n            }\n          } else {\n            handleSocketMessage(msg.data as ServerMessage)\n          }\n          applyAggregatedUpdates()\n        } catch (e: unknown) {\n          console.warn(\n            '[Fast Refresh] performing full reload\\n\\n' +\n              \"Fast Refresh will perform a full reload when you edit a file that's imported by modules outside of the React rendering tree.\\n\" +\n              'You might have a file which exports a React component but also exports a value that is imported by a non-React component file.\\n' +\n              'Consider migrating the non-React component export to a separate file and importing it into both files.\\n\\n' +\n              'It is also possible the parent component of the component you edited is a class component, which disables Fast Refresh.\\n' +\n              'Fast Refresh requires at least one parent function component in your React tree.'\n          )\n          onUpdateError(e)\n          location.reload()\n        }\n        break\n    }\n  })\n\n  const queued = globalThis.TURBOPACK_CHUNK_UPDATE_LISTENERS\n  if (queued != null && !Array.isArray(queued)) {\n    throw new Error('A separate HMR handler was already registered')\n  }\n  globalThis.TURBOPACK_CHUNK_UPDATE_LISTENERS = {\n    push: ([chunkPath, callback]: [ChunkListPath, UpdateCallback]) => {\n      subscribeToChunkUpdate(chunkPath, sendMessage, callback)\n    },\n  }\n\n  if (Array.isArray(queued)) {\n    for (const [chunkPath, callback] of queued) {\n      subscribeToChunkUpdate(chunkPath, sendMessage, callback)\n    }\n  }\n}\n\ntype UpdateCallbackSet = {\n  callbacks: Set<UpdateCallback>\n  unsubscribe: () => void\n}\n\nconst updateCallbackSets: Map<ResourceKey, UpdateCallbackSet> = new Map()\n\nfunction sendJSON(sendMessage: SendMessage, message: ClientMessage) {\n  sendMessage(JSON.stringify(message))\n}\n\ntype ResourceKey = string\n\nfunction resourceKey(resource: ResourceIdentifier): ResourceKey {\n  return JSON.stringify({\n    path: resource.path,\n    headers: resource.headers || null,\n  })\n}\n\nfunction subscribeToUpdates(\n  sendMessage: SendMessage,\n  resource: ResourceIdentifier\n): () => void {\n  sendJSON(sendMessage, {\n    type: 'turbopack-subscribe',\n    ...resource,\n  })\n\n  return () => {\n    sendJSON(sendMessage, {\n      type: 'turbopack-unsubscribe',\n      ...resource,\n    })\n  }\n}\n\nfunction handleSocketConnected(sendMessage: SendMessage) {\n  for (const key of updateCallbackSets.keys()) {\n    subscribeToUpdates(sendMessage, JSON.parse(key))\n  }\n}\n\n// we aggregate all pending updates until the issues are resolved\nconst chunkListsWithPendingUpdates: Map<ResourceKey, PartialServerMessage> =\n  new Map()\n\nfunction aggregateUpdates(msg: PartialServerMessage) {\n  const key = resourceKey(msg.resource)\n  let aggregated = chunkListsWithPendingUpdates.get(key)\n\n  if (aggregated) {\n    aggregated.instruction = mergeChunkListUpdates(\n      aggregated.instruction,\n      msg.instruction\n    )\n  } else {\n    chunkListsWithPendingUpdates.set(key, msg)\n  }\n}\n\nfunction applyAggregatedUpdates() {\n  if (chunkListsWithPendingUpdates.size === 0) return\n  hooks.beforeRefresh()\n  for (const msg of chunkListsWithPendingUpdates.values()) {\n    triggerUpdate(msg)\n  }\n  chunkListsWithPendingUpdates.clear()\n  finalizeUpdate()\n}\n\nfunction mergeChunkListUpdates(\n  updateA: ChunkListUpdate,\n  updateB: ChunkListUpdate\n): ChunkListUpdate {\n  let chunks\n  if (updateA.chunks != null) {\n    if (updateB.chunks == null) {\n      chunks = updateA.chunks\n    } else {\n      chunks = mergeChunkListChunks(updateA.chunks, updateB.chunks)\n    }\n  } else if (updateB.chunks != null) {\n    chunks = updateB.chunks\n  }\n\n  let merged\n  if (updateA.merged != null) {\n    if (updateB.merged == null) {\n      merged = updateA.merged\n    } else {\n      // Since `merged` is an array of updates, we need to merge them all into\n      // one, consistent update.\n      // Since there can only be `EcmascriptMergeUpdates` in the array, there is\n      // no need to key on the `type` field.\n      let update = updateA.merged[0]\n      for (let i = 1; i < updateA.merged.length; i++) {\n        update = mergeChunkListEcmascriptMergedUpdates(\n          update,\n          updateA.merged[i]\n        )\n      }\n\n      for (let i = 0; i < updateB.merged.length; i++) {\n        update = mergeChunkListEcmascriptMergedUpdates(\n          update,\n          updateB.merged[i]\n        )\n      }\n\n      merged = [update]\n    }\n  } else if (updateB.merged != null) {\n    merged = updateB.merged\n  }\n\n  return {\n    type: 'ChunkListUpdate',\n    chunks,\n    merged,\n  }\n}\n\nfunction mergeChunkListChunks(\n  chunksA: Record<ChunkPath, ChunkUpdate>,\n  chunksB: Record<ChunkPath, ChunkUpdate>\n): Record<ChunkPath, ChunkUpdate> {\n  const chunks: Record<ChunkPath, ChunkUpdate> = {}\n\n  for (const [chunkPath, chunkUpdateA] of Object.entries(chunksA) as Array<\n    [ChunkPath, ChunkUpdate]\n  >) {\n    const chunkUpdateB = chunksB[chunkPath]\n    if (chunkUpdateB != null) {\n      const mergedUpdate = mergeChunkUpdates(chunkUpdateA, chunkUpdateB)\n      if (mergedUpdate != null) {\n        chunks[chunkPath] = mergedUpdate\n      }\n    } else {\n      chunks[chunkPath] = chunkUpdateA\n    }\n  }\n\n  for (const [chunkPath, chunkUpdateB] of Object.entries(chunksB) as Array<\n    [ChunkPath, ChunkUpdate]\n  >) {\n    if (chunks[chunkPath] == null) {\n      chunks[chunkPath] = chunkUpdateB\n    }\n  }\n\n  return chunks\n}\n\nfunction mergeChunkUpdates(\n  updateA: ChunkUpdate,\n  updateB: ChunkUpdate\n): ChunkUpdate | undefined {\n  if (\n    (updateA.type === 'added' && updateB.type === 'deleted') ||\n    (updateA.type === 'deleted' && updateB.type === 'added')\n  ) {\n    return undefined\n  }\n\n  if (updateA.type === 'partial') {\n    invariant(updateA.instruction, 'Partial updates are unsupported')\n  }\n\n  if (updateB.type === 'partial') {\n    invariant(updateB.instruction, 'Partial updates are unsupported')\n  }\n\n  return undefined\n}\n\nfunction mergeChunkListEcmascriptMergedUpdates(\n  mergedA: EcmascriptMergedUpdate,\n  mergedB: EcmascriptMergedUpdate\n): EcmascriptMergedUpdate {\n  const entries = mergeEcmascriptChunkEntries(mergedA.entries, mergedB.entries)\n  const chunks = mergeEcmascriptChunksUpdates(mergedA.chunks, mergedB.chunks)\n\n  return {\n    type: 'EcmascriptMergedUpdate',\n    entries,\n    chunks,\n  }\n}\n\nfunction mergeEcmascriptChunkEntries(\n  entriesA: Record<ModuleId, EcmascriptModuleEntry> | undefined,\n  entriesB: Record<ModuleId, EcmascriptModuleEntry> | undefined\n): Record<ModuleId, EcmascriptModuleEntry> {\n  return { ...entriesA, ...entriesB }\n}\n\nfunction mergeEcmascriptChunksUpdates(\n  chunksA: Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined,\n  chunksB: Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined\n): Record<ChunkPath, EcmascriptMergedChunkUpdate> | undefined {\n  if (chunksA == null) {\n    return chunksB\n  }\n\n  if (chunksB == null) {\n    return chunksA\n  }\n\n  const chunks: Record<ChunkPath, EcmascriptMergedChunkUpdate> = {}\n\n  for (const [chunkPath, chunkUpdateA] of Object.entries(chunksA) as Array<\n    [ChunkPath, EcmascriptMergedChunkUpdate]\n  >) {\n    const chunkUpdateB = chunksB[chunkPath]\n    if (chunkUpdateB != null) {\n      const mergedUpdate = mergeEcmascriptChunkUpdates(\n        chunkUpdateA,\n        chunkUpdateB\n      )\n      if (mergedUpdate != null) {\n        chunks[chunkPath] = mergedUpdate\n      }\n    } else {\n      chunks[chunkPath] = chunkUpdateA\n    }\n  }\n\n  for (const [chunkPath, chunkUpdateB] of Object.entries(chunksB) as Array<\n    [ChunkPath, EcmascriptMergedChunkUpdate]\n  >) {\n    if (chunks[chunkPath] == null) {\n      chunks[chunkPath] = chunkUpdateB\n    }\n  }\n\n  if (Object.keys(chunks).length === 0) {\n    return undefined\n  }\n\n  return chunks\n}\n\nfunction mergeEcmascriptChunkUpdates(\n  updateA: EcmascriptMergedChunkUpdate,\n  updateB: EcmascriptMergedChunkUpdate\n): EcmascriptMergedChunkUpdate | undefined {\n  if (updateA.type === 'added' && updateB.type === 'deleted') {\n    // These two completely cancel each other out.\n    return undefined\n  }\n\n  if (updateA.type === 'deleted' && updateB.type === 'added') {\n    const added = []\n    const deleted = []\n    const deletedModules = new Set(updateA.modules ?? [])\n    const addedModules = new Set(updateB.modules ?? [])\n\n    for (const moduleId of addedModules) {\n      if (!deletedModules.has(moduleId)) {\n        added.push(moduleId)\n      }\n    }\n\n    for (const moduleId of deletedModules) {\n      if (!addedModules.has(moduleId)) {\n        deleted.push(moduleId)\n      }\n    }\n\n    if (added.length === 0 && deleted.length === 0) {\n      return undefined\n    }\n\n    return {\n      type: 'partial',\n      added,\n      deleted,\n    }\n  }\n\n  if (updateA.type === 'partial' && updateB.type === 'partial') {\n    const added = new Set([...(updateA.added ?? []), ...(updateB.added ?? [])])\n    const deleted = new Set([\n      ...(updateA.deleted ?? []),\n      ...(updateB.deleted ?? []),\n    ])\n\n    if (updateB.added != null) {\n      for (const moduleId of updateB.added) {\n        deleted.delete(moduleId)\n      }\n    }\n\n    if (updateB.deleted != null) {\n      for (const moduleId of updateB.deleted) {\n        added.delete(moduleId)\n      }\n    }\n\n    return {\n      type: 'partial',\n      added: [...added],\n      deleted: [...deleted],\n    }\n  }\n\n  if (updateA.type === 'added' && updateB.type === 'partial') {\n    const modules = new Set([\n      ...(updateA.modules ?? []),\n      ...(updateB.added ?? []),\n    ])\n\n    for (const moduleId of updateB.deleted ?? []) {\n      modules.delete(moduleId)\n    }\n\n    return {\n      type: 'added',\n      modules: [...modules],\n    }\n  }\n\n  if (updateA.type === 'partial' && updateB.type === 'deleted') {\n    // We could eagerly return `updateB` here, but this would potentially be\n    // incorrect if `updateA` has added modules.\n\n    const modules = new Set(updateB.modules ?? [])\n\n    if (updateA.added != null) {\n      for (const moduleId of updateA.added) {\n        modules.delete(moduleId)\n      }\n    }\n\n    return {\n      type: 'deleted',\n      modules: [...modules],\n    }\n  }\n\n  // Any other update combination is invalid.\n\n  return undefined\n}\n\nfunction invariant(_: never, message: string): never {\n  throw new Error(`Invariant: ${message}`)\n}\n\nconst CRITICAL = ['bug', 'error', 'fatal']\n\nfunction compareByList(list: any[], a: any, b: any) {\n  const aI = list.indexOf(a) + 1 || list.length\n  const bI = list.indexOf(b) + 1 || list.length\n  return aI - bI\n}\n\nconst chunksWithIssues: Map<ResourceKey, Issue[]> = new Map()\n\nfunction emitIssues() {\n  const issues = []\n  const deduplicationSet = new Set()\n\n  for (const [_, chunkIssues] of chunksWithIssues) {\n    for (const chunkIssue of chunkIssues) {\n      if (deduplicationSet.has(chunkIssue.formatted)) continue\n\n      issues.push(chunkIssue)\n      deduplicationSet.add(chunkIssue.formatted)\n    }\n  }\n\n  sortIssues(issues)\n\n  hooks.issues(issues)\n}\n\nfunction handleIssues(msg: ServerMessage): boolean {\n  const key = resourceKey(msg.resource)\n  let hasCriticalIssues = false\n\n  for (const issue of msg.issues) {\n    if (CRITICAL.includes(issue.severity)) {\n      hasCriticalIssues = true\n    }\n  }\n\n  if (msg.issues.length > 0) {\n    chunksWithIssues.set(key, msg.issues)\n  } else if (chunksWithIssues.has(key)) {\n    chunksWithIssues.delete(key)\n  }\n\n  emitIssues()\n\n  return hasCriticalIssues\n}\n\nconst SEVERITY_ORDER = ['bug', 'fatal', 'error', 'warning', 'info', 'log']\nconst CATEGORY_ORDER = [\n  'parse',\n  'resolve',\n  'code generation',\n  'rendering',\n  'typescript',\n  'other',\n]\n\nfunction sortIssues(issues: Issue[]) {\n  issues.sort((a, b) => {\n    const first = compareByList(SEVERITY_ORDER, a.severity, b.severity)\n    if (first !== 0) return first\n    return compareByList(CATEGORY_ORDER, a.category, b.category)\n  })\n}\n\nconst hooks = {\n  beforeRefresh: () => {},\n  refresh: () => {},\n  buildOk: () => {},\n  issues: (_issues: Issue[]) => {},\n}\n\nexport function setHooks(newHooks: typeof hooks) {\n  Object.assign(hooks, newHooks)\n}\n\nfunction handleSocketMessage(msg: ServerMessage) {\n  sortIssues(msg.issues)\n\n  handleIssues(msg)\n\n  switch (msg.type) {\n    case 'issues':\n      // issues are already handled\n      break\n    case 'partial':\n      // aggregate updates\n      aggregateUpdates(msg)\n      break\n    default:\n      // run single update\n      const runHooks = chunkListsWithPendingUpdates.size === 0\n      if (runHooks) hooks.beforeRefresh()\n      triggerUpdate(msg)\n      if (runHooks) finalizeUpdate()\n      break\n  }\n}\n\nfunction finalizeUpdate() {\n  hooks.refresh()\n  hooks.buildOk()\n\n  // This is used by the Next.js integration test suite to notify it when HMR\n  // updates have been completed.\n  // TODO: Only run this in test environments (gate by `process.env.__NEXT_TEST_MODE`)\n  if (globalThis.__NEXT_HMR_CB) {\n    globalThis.__NEXT_HMR_CB()\n    globalThis.__NEXT_HMR_CB = null\n  }\n}\n\nfunction subscribeToChunkUpdate(\n  chunkListPath: ChunkListPath,\n  sendMessage: SendMessage,\n  callback: UpdateCallback\n): () => void {\n  return subscribeToUpdate(\n    {\n      path: chunkListPath,\n    },\n    sendMessage,\n    callback\n  )\n}\n\nexport function subscribeToUpdate(\n  resource: ResourceIdentifier,\n  sendMessage: SendMessage,\n  callback: UpdateCallback\n) {\n  const key = resourceKey(resource)\n  let callbackSet: UpdateCallbackSet\n  const existingCallbackSet = updateCallbackSets.get(key)\n  if (!existingCallbackSet) {\n    callbackSet = {\n      callbacks: new Set([callback]),\n      unsubscribe: subscribeToUpdates(sendMessage, resource),\n    }\n    updateCallbackSets.set(key, callbackSet)\n  } else {\n    existingCallbackSet.callbacks.add(callback)\n    callbackSet = existingCallbackSet\n  }\n\n  return () => {\n    callbackSet.callbacks.delete(callback)\n\n    if (callbackSet.callbacks.size === 0) {\n      callbackSet.unsubscribe()\n      updateCallbackSets.delete(key)\n    }\n  }\n}\n\nfunction triggerUpdate(msg: ServerMessage) {\n  const key = resourceKey(msg.resource)\n  const callbackSet = updateCallbackSets.get(key)\n  if (!callbackSet) {\n    return\n  }\n\n  for (const callback of callbackSet.callbacks) {\n    callback(msg)\n  }\n\n  if (msg.type === 'notFound') {\n    // This indicates that the resource which we subscribed to either does not exist or\n    // has been deleted. In either case, we should clear all update callbacks, so if a\n    // new subscription is created for the same resource, it will send a new \"subscribe\"\n    // message to the server.\n    // No need to send an \"unsubscribe\" message to the server, it will have already\n    // dropped the update stream before sending the \"notFound\" message.\n    updateCallbackSets.delete(key)\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/lib/api.ts"],"sourcesContent":["// Cliente API para comunicação com o backend\r\n// No Next.js, variáveis de ambiente do cliente devem começar com NEXT_PUBLIC_\r\n// Como as rotas de API são servidas diretamente pelo Next.js, usamos '/api' como padrão\r\nconst API_BASE_URL = \r\n  (typeof process !== 'undefined' && (process.env as any)?.NEXT_PUBLIC_API_URL) ||\r\n  '/api'\r\n\r\n// Função para obter token do store\r\nfunction getAuthToken(): string | null {\r\n  // Verificar se estamos no browser (não no SSR)\r\n  if (typeof window === 'undefined') {\r\n    return null\r\n  }\r\n  \r\n  try {\r\n    const authStorage = localStorage.getItem('auth-storage')\r\n    if (authStorage) {\r\n      const parsed = JSON.parse(authStorage)\r\n      return parsed.state?.token || null\r\n    }\r\n  } catch (error) {\r\n    console.error('Erro ao ler token:', error)\r\n  }\r\n  return null\r\n}\r\n\r\nexport async function fetchAPI(endpoint: string, options: RequestInit = {}) {\r\n  // Garantir que endpoint começa com /\r\n  const normalizedEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`\r\n  const url = `${API_BASE_URL}${normalizedEndpoint}`\r\n  const token = getAuthToken()\r\n\r\n  const headers: HeadersInit = {\r\n    'Content-Type': 'application/json',\r\n    ...options.headers,\r\n  }\r\n\r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`\r\n  }\r\n\r\n  const response = await fetch(url, {\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    if (response.status === 401 || response.status === 403) {\r\n      // Token inválido ou expirado, limpar autenticação\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('auth-storage')\r\n        // Limpar o estado do store também\r\n        try {\r\n          // Importar dinamicamente para evitar dependência circular\r\n          import('@/stores/useAuthStore').then(({ useAuthStore }) => {\r\n            useAuthStore.getState().logout()\r\n          }).catch(() => {\r\n            // Ignorar erro se o store não estiver disponível\r\n          })\r\n        } catch (error) {\r\n          // Ignorar erro\r\n        }\r\n        \r\n        if (window.location.pathname !== '/login') {\r\n          window.location.href = '/login'\r\n        }\r\n      }\r\n      throw new Error('Sessão expirada. Faça login novamente.')\r\n    }\r\n\r\n    // Tentar parsear como JSON, mas tratar erros de parsing\r\n    let errorMessage = `HTTP error! status: ${response.status}`\r\n    try {\r\n      const contentType = response.headers.get('content-type')\r\n      if (contentType && contentType.includes('application/json')) {\r\n        const error = await response.json()\r\n        errorMessage = error.error || error.message || errorMessage\r\n      } else {\r\n        // Se não for JSON, tentar ler como texto\r\n        const text = await response.text()\r\n        // Se o texto parece ser código (contém \"import\" ou \"export\"), é um erro de roteamento\r\n        if (text.includes('import') || text.includes('export')) {\r\n          errorMessage = `Erro de roteamento: a API retornou código ao invés de JSON. Verifique se a rota ${endpoint} existe.`\r\n        } else if (text.trim()) {\r\n          errorMessage = text.substring(0, 200) // Limitar tamanho\r\n        }\r\n      }\r\n    } catch (parseError) {\r\n      // Se falhar ao parsear, usar mensagem padrão\r\n      console.error('Erro ao parsear resposta de erro:', parseError)\r\n    }\r\n    \r\n    throw new Error(errorMessage)\r\n  }\r\n\r\n  // Verificar se a resposta é JSON antes de fazer parse\r\n  const contentType = response.headers.get('content-type')\r\n  if (contentType && contentType.includes('application/json')) {\r\n    return response.json()\r\n  } else {\r\n    // Se não for JSON, tentar parsear mesmo assim (pode ser texto vazio)\r\n    const text = await response.text()\r\n    if (text.trim()) {\r\n      // Se parece ser código, é um erro\r\n      if (text.includes('import') || text.includes('export')) {\r\n        throw new Error(`A API retornou código ao invés de JSON para ${endpoint}. Verifique a rota.`)\r\n      }\r\n      try {\r\n        return JSON.parse(text)\r\n      } catch {\r\n        throw new Error(`Resposta inválida da API: esperado JSON, recebido ${contentType || 'texto'}`)\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\nexport const api = {\r\n  // Autenticação\r\n  login: (email: string, password: string) =>\r\n    fetchAPI('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password }),\r\n    }),\r\n\r\n  register: (email: string, password: string, name: string, clinicId?: string) =>\r\n    fetchAPI('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password, name, clinicId }),\r\n    }),\r\n\r\n  logout: () =>\r\n    fetchAPI('/auth/logout', {\r\n      method: 'POST',\r\n    }),\r\n\r\n  getMe: () => fetchAPI('/auth/me'),\r\n\r\n  // Usuários (admin)\r\n  getAllUsers: () => fetchAPI('/users'),\r\n  \r\n  getUser: (id: string) => fetchAPI(`/users/${id}`),\r\n  \r\n  createUser: (userData: {\r\n    email: string\r\n    password: string\r\n    name: string\r\n    role?: 'admin' | 'user'\r\n    clinicId?: string\r\n  }) =>\r\n    fetchAPI('/users', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData),\r\n    }),\r\n\r\n  updateUser: (id: string, userData: {\r\n    name?: string\r\n    role?: 'admin' | 'user'\r\n    clinicId?: string\r\n    isActive?: boolean\r\n    password?: string\r\n  }) =>\r\n    fetchAPI(`/users/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(userData),\r\n    }),\r\n\r\n  deleteUser: (id: string) =>\r\n    fetchAPI(`/users/${id}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Clínicas\r\n  getAllClinics: () => fetchAPI('/clinics'),\r\n\r\n  getClinic: (id: string) => fetchAPI(`/clinic/${id}`),\r\n\r\n  createClinic: (clinicName: string) =>\r\n    fetchAPI('/clinics', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ clinicName }),\r\n    }),\r\n\r\n  saveClinicData: (id: string, data: any) =>\r\n    fetchAPI(`/clinic/${id}`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n\r\n  deleteClinic: (id: string) =>\r\n    fetchAPI(`/clinic/${id}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Relatórios\r\n  generateReport: (\r\n    clinicId: string,\r\n    reportType: 'diagnostic' | 'strategic' | 'advanced' | 'tactical' | 'operational' | 'final',\r\n    state: any,\r\n  ) =>\r\n    fetchAPI('/reports/generate', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ clinicId, reportType, state }),\r\n    }),\r\n\r\n  // Admin - Estatísticas\r\n  getAdminStats: () => fetchAPI('/admin/stats'),\r\n\r\n  // Admin - Relatórios\r\n  getAllReports: () => fetchAPI('/admin/reports'),\r\n  getReport: (id: string) => fetchAPI(`/admin/reports/${id}`),\r\n  reprocessReport: (id: string) =>\r\n    fetchAPI(`/admin/reports/${id}/reprocess`, {\r\n      method: 'POST',\r\n    }),\r\n  downloadReport: (id: string) =>\r\n    fetchAPI(`/admin/reports/${id}/download`),\r\n\r\n  // Admin - Prompts\r\n  getPrompts: () => fetchAPI('/admin/prompts'),\r\n  getPrompt: (type: string) => fetchAPI(`/admin/prompts/${type}`),\r\n  savePrompt: (type: string, systemPrompt: string, userPrompt: string) =>\r\n    fetchAPI(`/admin/prompts/${type}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify({ system_prompt: systemPrompt, user_prompt: userPrompt }),\r\n    }),\r\n\r\n  // Admin - Configurações\r\n  getSettings: () => fetchAPI('/admin/settings'),\r\n  saveSettings: (settings: any) =>\r\n    fetchAPI('/admin/settings', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(settings),\r\n    }),\r\n\r\n  // Admin - Logs e Sessões\r\n  getLogs: (limit?: number) =>\r\n    fetchAPI(`/admin/logs${limit ? `?limit=${limit}` : ''}`),\r\n  getSessions: () => fetchAPI('/admin/sessions'),\r\n  revokeSession: (sessionId: string) =>\r\n    fetchAPI(`/admin/sessions/${sessionId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Admin - Reset de Senha\r\n  resetUserPassword: (userId: string) =>\r\n    fetchAPI(`/admin/users/${userId}/reset-password`, {\r\n      method: 'POST',\r\n    }),\r\n\r\n  // Admin - Export/Import\r\n  exportClinicData: (clinicId: string) =>\r\n    fetchAPI(`/admin/clinics/${clinicId}/export`),\r\n  importClinicData: (data: any) =>\r\n    fetchAPI('/admin/clinics/import', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n\r\n  // Dossiês\r\n  getDossiers: (clinicId: string) =>\r\n    fetchAPI(`/dossiers?clinicId=${clinicId}`),\r\n  \r\n  getDossier: (id: string) => fetchAPI(`/dossiers/${id}`),\r\n  \r\n  createDossier: (data: { clinicId: string; title: string; baselineDate?: string }) =>\r\n    fetchAPI('/dossiers', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateDossier: (id: string, data: { title?: string; status?: string; baselineDate?: string }) =>\r\n    fetchAPI(`/dossiers/${id}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteDossier: (id: string) =>\r\n    fetchAPI(`/dossiers/${id}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Seções do Dossiê\r\n  getDossierSections: (dossierId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/sections`),\r\n  \r\n  getDossierSection: (dossierId: string, sectionCode: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/sections?sectionCode=${sectionCode}`),\r\n\r\n  // Respostas\r\n  getDossierAnswers: (dossierId: string, sectionCode?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/answers${sectionCode ? `?sectionCode=${sectionCode}` : ''}`),\r\n  \r\n  saveDossierAnswers: (dossierId: string, answers: any[]) =>\r\n    fetchAPI(`/dossiers/${dossierId}/answers`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({ answers }),\r\n    }),\r\n\r\n  // Entidades\r\n  getCustomerSegments: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/customer-segments${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createCustomerSegment: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/customer-segments`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateCustomerSegment: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/customer-segments?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteCustomerSegment: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/customer-segments?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getValuePropositions: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/value-propositions${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createValueProposition: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/value-propositions`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateValueProposition: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/value-propositions?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteValueProposition: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/value-propositions?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getServices: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/services${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createService: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/services`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateService: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/services?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteService: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/services?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getCompetitors: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/competitors${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createCompetitor: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/competitors`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateCompetitor: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/competitors?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteCompetitor: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/competitors?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getTeamMembers: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/team-members${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createTeamMember: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/team-members`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateTeamMember: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/team-members?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteTeamMember: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/team-members?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getCapacities: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/capacities${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createCapacity: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/capacities`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateCapacity: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/capacities?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteCapacity: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/capacities?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getStrategicChoices: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/strategic-choices${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createStrategicChoice: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/strategic-choices`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateStrategicChoice: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/strategic-choices?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteStrategicChoice: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/strategic-choices?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  getInitiatives: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/initiatives${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createInitiative: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/initiatives`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateInitiative: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/initiatives?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteInitiative: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/initiatives?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Service Categories\r\n  getServiceCategories: (dossierId: string, entityId?: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/service-categories${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createServiceCategory: (dossierId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/service-categories`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateServiceCategory: (dossierId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/service-categories?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteServiceCategory: (dossierId: string, entityId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/entities/service-categories?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Roles (clinic-level)\r\n  getRoles: (clinicId: string, entityId?: string) =>\r\n    fetchAPI(`/clinics/${clinicId}/roles${entityId ? `?entityId=${entityId}` : ''}`),\r\n  \r\n  createRole: (clinicId: string, data: any) =>\r\n    fetchAPI(`/clinics/${clinicId}/roles`, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  updateRole: (clinicId: string, entityId: string, data: any) =>\r\n    fetchAPI(`/clinics/${clinicId}/roles?entityId=${entityId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(data),\r\n    }),\r\n  \r\n  deleteRole: (clinicId: string, entityId: string) =>\r\n    fetchAPI(`/clinics/${clinicId}/roles?entityId=${entityId}`, {\r\n      method: 'DELETE',\r\n    }),\r\n\r\n  // Relatórios por IA\r\n  generateSectionReport: (dossierId: string, sectionCode: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/sections/${sectionCode}/report`, {\r\n      method: 'POST',\r\n    }),\r\n  \r\n  getSectionReport: (dossierId: string, sectionCode: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/sections/${sectionCode}/report`),\r\n  \r\n  getDossierReports: (dossierId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/reports`),\r\n\r\n  // Relatório Final\r\n  generateFinalReport: (dossierId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/final-report:generate`, {\r\n      method: 'POST',\r\n    }),\r\n  \r\n  getFinalReport: (dossierId: string) =>\r\n    fetchAPI(`/dossiers/${dossierId}/final-report`),\r\n  \r\n  exportFinalReport: async (dossierId: string, format: 'pdf' | 'docx' = 'pdf') => {\r\n    const token = getAuthToken()\r\n    const headers: HeadersInit = {}\r\n\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`\r\n    }\r\n\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/dossiers/${dossierId}/final-report/export?format=${format}`,\r\n      {\r\n        method: 'GET',\r\n        headers,\r\n      }\r\n    )\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Erro ao exportar relatório: ${response.status}`)\r\n    }\r\n\r\n    return response.blob()\r\n  },\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/services/dossierService.ts"],"sourcesContent":["import { api } from '@/lib/api'\r\n\r\nexport interface Dossier {\r\n  id: string\r\n  clinic_id: string\r\n  title: string\r\n  status: 'draft' | 'finalized' | 'archived'\r\n  version_number: number\r\n  baseline_date?: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport interface Section {\r\n  id: string\r\n  code: string\r\n  name: string\r\n  order_index: number\r\n  description?: string\r\n  status?: 'not_started' | 'in_progress' | 'complete'\r\n  completion_percent?: number\r\n  last_updated_at?: string\r\n}\r\n\r\nexport interface Question {\r\n  id: string\r\n  code: string\r\n  text: string\r\n  help_text?: string\r\n  type: 'text' | 'textarea' | 'number' | 'currency' | 'date' | 'single_select' | 'multi_select' | 'scale' | 'json'\r\n  required: boolean\r\n  order_index: number\r\n  validation_schema?: {\r\n    minLength?: number\r\n    maxLength?: number\r\n    required?: boolean\r\n    rules?: string[]\r\n  }\r\n  options?: Array<{ id: string; label: string; value: string; order_index: number }>\r\n  answer?: {\r\n    id: string\r\n    value_text?: string\r\n    value_number?: number\r\n    value_json?: any\r\n    source: string\r\n  }\r\n}\r\n\r\nexport interface QuestionSet {\r\n  id: string\r\n  name: string\r\n  version: number\r\n  subsection_code?: string\r\n  subsection_name?: string\r\n  questions: Question[]\r\n}\r\n\r\nexport interface SectionData {\r\n  section: Section\r\n  status: {\r\n    status: 'not_started' | 'in_progress' | 'complete'\r\n    completion_percent: number\r\n  }\r\n  questionSets: QuestionSet[]\r\n  entities?: {\r\n    customerSegments?: any[]\r\n    valuePropositions?: any[]\r\n  }\r\n}\r\n\r\nexport interface AnswerInput {\r\n  questionId: string\r\n  valueText?: string\r\n  valueNumber?: number\r\n  valueJson?: any\r\n  source?: 'user' | 'ai' | 'import'\r\n}\r\n\r\n// ==================== DOSSIES ====================\r\n\r\nexport async function getDossiers(clinicId: string): Promise<Dossier[]> {\r\n  return api.getDossiers(clinicId)\r\n}\r\n\r\nexport async function getDossier(dossierId: string): Promise<Dossier> {\r\n  return api.getDossier(dossierId)\r\n}\r\n\r\nexport async function createDossier(\r\n  clinicId: string,\r\n  title: string,\r\n  baselineDate?: string,\r\n): Promise<Dossier> {\r\n  return api.createDossier({ clinicId, title, baselineDate })\r\n}\r\n\r\nexport async function updateDossier(\r\n  dossierId: string,\r\n  data: { title?: string; status?: string; baselineDate?: string },\r\n): Promise<Dossier> {\r\n  return api.updateDossier(dossierId, data)\r\n}\r\n\r\nexport async function deleteDossier(dossierId: string): Promise<void> {\r\n  return api.deleteDossier(dossierId)\r\n}\r\n\r\n// ==================== SECTIONS ====================\r\n\r\nexport async function getDossierSections(dossierId: string): Promise<Section[]> {\r\n  return api.getDossierSections(dossierId)\r\n}\r\n\r\nexport async function getSectionData(\r\n  dossierId: string,\r\n  sectionCode: string,\r\n): Promise<SectionData> {\r\n  return api.getDossierSection(dossierId, sectionCode)\r\n}\r\n\r\n// ==================== ANSWERS ====================\r\n\r\nexport async function getAnswers(\r\n  dossierId: string,\r\n  sectionCode?: string,\r\n): Promise<any[]> {\r\n  return api.getDossierAnswers(dossierId, sectionCode)\r\n}\r\n\r\nexport async function saveAnswers(\r\n  dossierId: string,\r\n  answers: AnswerInput[],\r\n): Promise<{ saved: number; answers: any[] }> {\r\n  return api.saveDossierAnswers(dossierId, answers)\r\n}\r\n\r\n// ==================== COMPLETION CALCULATION ====================\r\n\r\nexport async function calculateSectionCompletion(\r\n  dossierId: string,\r\n  sectionCode: string,\r\n): Promise<number> {\r\n  try {\r\n    const sectionData = await getSectionData(dossierId, sectionCode)\r\n    \r\n    // Coletar todas as perguntas required\r\n    const requiredQuestions: Question[] = []\r\n    sectionData.questionSets.forEach((qs) => {\r\n      qs.questions.forEach((q) => {\r\n        if (q.required) {\r\n          requiredQuestions.push(q)\r\n        }\r\n      })\r\n    })\r\n\r\n    if (requiredQuestions.length === 0) {\r\n      return 100 // Se não há perguntas required, considera completo\r\n    }\r\n\r\n    // Contar quantas têm respostas\r\n    let answeredCount = 0\r\n    requiredQuestions.forEach((q) => {\r\n      if (q.answer) {\r\n        const hasValue =\r\n          q.answer.value_text !== null && q.answer.value_text !== undefined && q.answer.value_text !== '' ||\r\n          q.answer.value_number !== null && q.answer.value_number !== undefined ||\r\n          q.answer.value_json !== null && q.answer.value_json !== undefined\r\n\r\n        if (hasValue) {\r\n          answeredCount++\r\n        }\r\n      }\r\n    })\r\n\r\n    // Calcular % baseado em perguntas respondidas\r\n    let completionPercent = Math.round((answeredCount / requiredQuestions.length) * 100)\r\n\r\n    // Bônus: se seção é IDENTITY, verificar se há pelo menos 1 entidade de cada tipo\r\n    if (sectionCode === 'IDENTITY') {\r\n      const hasSegments = sectionData.entities?.customerSegments && sectionData.entities.customerSegments.length > 0\r\n      const hasPropositions = sectionData.entities?.valuePropositions && sectionData.entities.valuePropositions.length > 0\r\n\r\n      // Se tem pelo menos 1 segmento e 1 proposta, adiciona 10% de bônus (máximo 100%)\r\n      if (hasSegments && hasPropositions) {\r\n        completionPercent = Math.min(100, completionPercent + 10)\r\n      } else if (hasSegments || hasPropositions) {\r\n        completionPercent = Math.min(100, completionPercent + 5)\r\n      }\r\n    }\r\n\r\n    // Atualizar status da seção (isso seria feito no backend, mas por enquanto retornamos o valor)\r\n    return completionPercent\r\n  } catch (error) {\r\n    console.error('Erro ao calcular completude:', error)\r\n    return 0\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AAgFO,eAAe,YAAY,QAAgB;IAChD,OAAO,oKAAG,CAAC,WAAW,CAAC;AACzB;AAEO,eAAe,WAAW,SAAiB;IAChD,OAAO,oKAAG,CAAC,UAAU,CAAC;AACxB;AAEO,eAAe,cACpB,QAAgB,EAChB,KAAa,EACb,YAAqB;IAErB,OAAO,oKAAG,CAAC,aAAa,CAAC;QAAE;QAAU;QAAO;IAAa;AAC3D;AAEO,eAAe,cACpB,SAAiB,EACjB,IAAgE;IAEhE,OAAO,oKAAG,CAAC,aAAa,CAAC,WAAW;AACtC;AAEO,eAAe,cAAc,SAAiB;IACnD,OAAO,oKAAG,CAAC,aAAa,CAAC;AAC3B;AAIO,eAAe,mBAAmB,SAAiB;IACxD,OAAO,oKAAG,CAAC,kBAAkB,CAAC;AAChC;AAEO,eAAe,eACpB,SAAiB,EACjB,WAAmB;IAEnB,OAAO,oKAAG,CAAC,iBAAiB,CAAC,WAAW;AAC1C;AAIO,eAAe,WACpB,SAAiB,EACjB,WAAoB;IAEpB,OAAO,oKAAG,CAAC,iBAAiB,CAAC,WAAW;AAC1C;AAEO,eAAe,YACpB,SAAiB,EACjB,OAAsB;IAEtB,OAAO,oKAAG,CAAC,kBAAkB,CAAC,WAAW;AAC3C;AAIO,eAAe,2BACpB,SAAiB,EACjB,WAAmB;IAEnB,IAAI;QACF,MAAM,cAAc,MAAM,eAAe,WAAW;QAEpD,sCAAsC;QACtC,MAAM,oBAAgC,EAAE;QACxC,YAAY,YAAY,CAAC,OAAO,CAAC,CAAC;YAChC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;gBACpB,IAAI,EAAE,QAAQ,EAAE;oBACd,kBAAkB,IAAI,CAAC;gBACzB;YACF;QACF;QAEA,IAAI,kBAAkB,MAAM,KAAK,GAAG;YAClC,OAAO,IAAI,mDAAmD;;QAChE;QAEA,+BAA+B;QAC/B,IAAI,gBAAgB;QACpB,kBAAkB,OAAO,CAAC,CAAC;YACzB,IAAI,EAAE,MAAM,EAAE;gBACZ,MAAM,WACJ,EAAE,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE,MAAM,CAAC,UAAU,KAAK,aAAa,EAAE,MAAM,CAAC,UAAU,KAAK,MAC7F,EAAE,MAAM,CAAC,YAAY,KAAK,QAAQ,EAAE,MAAM,CAAC,YAAY,KAAK,aAC5D,EAAE,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE,MAAM,CAAC,UAAU,KAAK;gBAE1D,IAAI,UAAU;oBACZ;gBACF;YACF;QACF;QAEA,8CAA8C;QAC9C,IAAI,oBAAoB,KAAK,KAAK,CAAC,AAAC,gBAAgB,kBAAkB,MAAM,GAAI;QAEhF,iFAAiF;QACjF,IAAI,gBAAgB,YAAY;YAC9B,MAAM,cAAc,YAAY,QAAQ,EAAE,oBAAoB,YAAY,QAAQ,CAAC,gBAAgB,CAAC,MAAM,GAAG;YAC7G,MAAM,kBAAkB,YAAY,QAAQ,EAAE,qBAAqB,YAAY,QAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG;YAEnH,iFAAiF;YACjF,IAAI,eAAe,iBAAiB;gBAClC,oBAAoB,KAAK,GAAG,CAAC,KAAK,oBAAoB;YACxD,OAAO,IAAI,eAAe,iBAAiB;gBACzC,oBAAoB,KAAK,GAAG,CAAC,KAAK,oBAAoB;YACxD;QACF;QAEA,+FAA+F;QAC/F,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF"}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/hooks/useSectionData.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport {\r\n  getSectionData,\r\n  calculateSectionCompletion,\r\n  type SectionData,\r\n} from '@/services/dossierService'\r\nimport { toast } from 'sonner'\r\n\r\nexport function useSectionData(dossierId: string | undefined, sectionCode: string) {\r\n  const [sectionData, setSectionData] = useState<SectionData | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<Error | null>(null)\r\n  const [completionPercent, setCompletionPercent] = useState(0)\r\n\r\n  const refetch = async () => {\r\n    if (!dossierId) return\r\n\r\n    setLoading(true)\r\n    setError(null)\r\n    try {\r\n      const data = await getSectionData(dossierId, sectionCode)\r\n      setSectionData(data)\r\n\r\n      // Calcular completude\r\n      const percent = await calculateSectionCompletion(dossierId, sectionCode)\r\n      setCompletionPercent(percent)\r\n    } catch (err) {\r\n      const error = err instanceof Error ? err : new Error('Erro ao carregar dados da seção')\r\n      setError(error)\r\n      console.error('Erro ao carregar dados da seção:', err)\r\n      toast.error('Erro ao carregar dados da seção')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (dossierId) {\r\n      refetch()\r\n    } else {\r\n      setLoading(false)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dossierId, sectionCode])\r\n\r\n  return {\r\n    sectionData,\r\n    loading,\r\n    error,\r\n    completionPercent,\r\n    refetch,\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAKA;;;;;AAEO,SAAS,eAAe,SAA6B,EAAE,WAAmB;;IAC/E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yOAAQ,EAAqB;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yOAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yOAAQ,EAAe;IACjD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yOAAQ,EAAC;IAE3D,MAAM,UAAU;QACd,IAAI,CAAC,WAAW;QAEhB,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,+LAAc,EAAC,WAAW;YAC7C,eAAe;YAEf,sBAAsB;YACtB,MAAM,UAAU,MAAM,IAAA,2MAA0B,EAAC,WAAW;YAC5D,qBAAqB;QACvB,EAAE,OAAO,KAAK;YACZ,MAAM,QAAQ,eAAe,QAAQ,MAAM,IAAI,MAAM;YACrD,SAAS;YACT,QAAQ,KAAK,CAAC,oCAAoC;YAClD,6TAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,0OAAS;oCAAC;YACR,IAAI,WAAW;gBACb;YACF,OAAO;gBACL,WAAW;YACb;QACA,uDAAuD;QACzD;mCAAG;QAAC;QAAW;KAAY;IAE3B,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;GA5CgB"}},
    {"offset": {"line": 1033, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/hooks/useSectionReport.ts"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport { api } from '@/lib/api'\r\nimport { toast } from 'sonner'\r\n\r\nexport function useSectionReport(dossierId: string | undefined, sectionCode: string) {\r\n  const [report, setReport] = useState<any | null>(null)\r\n  const [loadingReport, setLoadingReport] = useState(false)\r\n  const [generatingReport, setGeneratingReport] = useState(false)\r\n  const hasFetchedRef = useRef(false)\r\n\r\n  const refetchReport = async () => {\r\n    if (!dossierId) return\r\n\r\n    setLoadingReport(true)\r\n    try {\r\n      const reportData = await api.getSectionReport(dossierId, sectionCode)\r\n      setReport(reportData)\r\n      hasFetchedRef.current = true\r\n    } catch (error: any) {\r\n      // Tratar tanto 404 quanto 500 como \"relatório não encontrado\"\r\n      if (\r\n        error.message?.includes('404') || \r\n        error.message?.includes('500') ||\r\n        error.message?.includes('não gerado') ||\r\n        error.message?.includes('não encontrado') ||\r\n        error.message?.includes('Internal Server Error')\r\n      ) {\r\n        setReport(null)\r\n        hasFetchedRef.current = true\r\n      } else {\r\n        console.error('Erro ao carregar relatório:', error)\r\n      }\r\n    } finally {\r\n      setLoadingReport(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Resetar flag quando dossierId ou sectionCode mudarem\r\n    hasFetchedRef.current = false\r\n    \r\n    if (dossierId) {\r\n      refetchReport()\r\n    }\r\n  }, [dossierId, sectionCode])\r\n\r\n  const handleGenerateReport = async () => {\r\n    if (!dossierId) return\r\n\r\n    setGeneratingReport(true)\r\n    try {\r\n      const newReport = await api.generateSectionReport(dossierId, sectionCode)\r\n      setReport(newReport)\r\n      hasFetchedRef.current = true\r\n      toast.success('Relatório gerado com sucesso!')\r\n    } catch (error: any) {\r\n      console.error('Erro ao gerar relatório:', error)\r\n      \r\n      // Extrair mensagem de erro mais detalhada\r\n      let errorMessage = 'Erro ao gerar relatório'\r\n      if (error.message) {\r\n        errorMessage = error.message\r\n      } else if (error.response?.data?.message) {\r\n        errorMessage = error.response.data.message\r\n      } else if (typeof error === 'string') {\r\n        errorMessage = error\r\n      }\r\n      \r\n      // Se o relatório foi salvo com status 'error', carregar para exibir\r\n      try {\r\n        const errorReport = await api.getSectionReport(dossierId, sectionCode)\r\n        if (errorReport?.status === 'error') {\r\n          setReport(errorReport)\r\n        }\r\n      } catch {\r\n        // Ignorar erro ao buscar relatório de erro\r\n      }\r\n      \r\n      toast.error(errorMessage)\r\n    } finally {\r\n      setGeneratingReport(false)\r\n    }\r\n  }\r\n\r\n  return {\r\n    report,\r\n    loadingReport,\r\n    generatingReport,\r\n    handleGenerateReport,\r\n    refetchReport,\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEO,SAAS,iBAAiB,SAA6B,EAAE,WAAmB;;IACjF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yOAAQ,EAAa;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yOAAQ,EAAC;IACnD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yOAAQ,EAAC;IACzD,MAAM,gBAAgB,IAAA,uOAAM,EAAC;IAE7B,MAAM,gBAAgB;QACpB,IAAI,CAAC,WAAW;QAEhB,iBAAiB;QACjB,IAAI;YACF,MAAM,aAAa,MAAM,oKAAG,CAAC,gBAAgB,CAAC,WAAW;YACzD,UAAU;YACV,cAAc,OAAO,GAAG;QAC1B,EAAE,OAAO,OAAY;YACnB,8DAA8D;YAC9D,IACE,MAAM,OAAO,EAAE,SAAS,UACxB,MAAM,OAAO,EAAE,SAAS,UACxB,MAAM,OAAO,EAAE,SAAS,iBACxB,MAAM,OAAO,EAAE,SAAS,qBACxB,MAAM,OAAO,EAAE,SAAS,0BACxB;gBACA,UAAU;gBACV,cAAc,OAAO,GAAG;YAC1B,OAAO;gBACL,QAAQ,KAAK,CAAC,+BAA+B;YAC/C;QACF,SAAU;YACR,iBAAiB;QACnB;IACF;IAEA,IAAA,0OAAS;sCAAC;YACR,uDAAuD;YACvD,cAAc,OAAO,GAAG;YAExB,IAAI,WAAW;gBACb;YACF;QACF;qCAAG;QAAC;QAAW;KAAY;IAE3B,MAAM,uBAAuB;QAC3B,IAAI,CAAC,WAAW;QAEhB,oBAAoB;QACpB,IAAI;YACF,MAAM,YAAY,MAAM,oKAAG,CAAC,qBAAqB,CAAC,WAAW;YAC7D,UAAU;YACV,cAAc,OAAO,GAAG;YACxB,6TAAK,CAAC,OAAO,CAAC;QAChB,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,4BAA4B;YAE1C,0CAA0C;YAC1C,IAAI,eAAe;YACnB,IAAI,MAAM,OAAO,EAAE;gBACjB,eAAe,MAAM,OAAO;YAC9B,OAAO,IAAI,MAAM,QAAQ,EAAE,MAAM,SAAS;gBACxC,eAAe,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO;YAC5C,OAAO,IAAI,OAAO,UAAU,UAAU;gBACpC,eAAe;YACjB;YAEA,oEAAoE;YACpE,IAAI;gBACF,MAAM,cAAc,MAAM,oKAAG,CAAC,gBAAgB,CAAC,WAAW;gBAC1D,IAAI,aAAa,WAAW,SAAS;oBACnC,UAAU;gBACZ;YACF,EAAE,OAAM;YACN,2CAA2C;YAC7C;YAEA,6TAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,oBAAoB;QACtB;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;GAvFgB"}},
    {"offset": {"line": 1130, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/lib/utils.ts"],"sourcesContent":["/* General utility functions (exposes cn) */\r\nimport { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\n/**\r\n * Merges multiple class names into a single string\r\n * @param inputs - Array of class names\r\n * @returns Merged class names\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n// Add any other utility functions here\r\n"],"names":[],"mappings":";;;;AAAA,0CAA0C,GAC1C;AACA;;;AAOO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,gRAAO,EAAC,IAAA,0OAAI,EAAC;AACtB,EAEA,uCAAuC"}},
    {"offset": {"line": 1148, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/button.tsx"],"sourcesContent":["/* Button Component primitives - A component that displays a button - from shadcn/ui (exposes Button, buttonVariants) */\r\nimport * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-250 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-md active:scale-[0.98]',\r\n        destructive:\r\n          'bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-md active:scale-[0.98]',\r\n        outline:\r\n          'border border-input bg-transparent text-foreground hover:bg-accent hover:text-accent-foreground hover:border-primary/30',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-sm',\r\n        ghost: 'text-foreground hover:bg-accent hover:text-accent-foreground',\r\n        link: 'text-foreground underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-10 px-4 py-2',\r\n        sm: 'h-9 rounded-md px-3',\r\n        lg: 'h-11 rounded-md px-8',\r\n        icon: 'h-10 w-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends\r\n    React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : 'button'\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\nButton.displayName = 'Button'\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA,sHAAsH,GACtH;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,8RAAG,EACxB,sWACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAUF,MAAM,uBAAS,2OAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wVAAI,GAAG;IAC9B,qBACE,6PAAC;QACC,WAAW,IAAA,qKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 1215, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/card.tsx"],"sourcesContent":["/* Card Component primitives - A component that displays a card - from shadcn/ui (exposes Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent) */\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      'rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-250',\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = 'Card'\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = 'CardHeader'\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      'text-2xl font-semibold leading-none tracking-tight',\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = 'CardTitle'\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('text-sm text-muted-foreground', className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = 'CardDescription'\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\r\n))\r\nCardContent.displayName = 'CardContent'\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn('flex items-center p-6 pt-0', className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = 'CardFooter'\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,iKAAiK,GACjK;AAEA;;;;AAEA,MAAM,qBAAO,2OAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QACC,KAAK;QACL,WAAW,IAAA,qKAAE,EACX,wFACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2OAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QACC,KAAK;QACL,WAAW,IAAA,qKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2OAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QACC,KAAK;QACL,WAAW,IAAA,qKAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2OAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QACC,KAAK;QACL,WAAW,IAAA,qKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2OAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qKAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2OAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC;QACC,KAAK;QACL,WAAW,IAAA,qKAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 1322, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/progress.tsx"],"sourcesContent":["/* Progress Component - A component that displays a progress bar - from shadcn/ui (exposes Progress) */\r\nimport * as React from 'react'\r\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      'relative h-4 w-full overflow-hidden rounded-full bg-secondary',\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAAA,qGAAqG,GACrG;AACA;AAEA;;;;;AAEA,MAAM,yBAAW,2OAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6PAAC,+aAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qKAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6PAAC,obAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+aAAsB,CAAC,WAAW"}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/badge.tsx"],"sourcesContent":["/* Badge Component primitives - A component that displays a badge - from shadcn/ui (exposes Badge, badgeVariants) */\r\nimport * as React from 'react'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst badgeVariants = cva(\r\n  'inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-all duration-250 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          'border-transparent bg-primary text-primary-foreground hover:bg-primary/80 hover:shadow-sm',\r\n        secondary:\r\n          'border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        destructive:\r\n          'border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80 hover:shadow-sm',\r\n        outline: 'text-foreground hover:bg-accent/50',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends\r\n    React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":"AAAA,kHAAkH;;;;;;;AAElH;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,8RAAG,EACvB,oLACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAQF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6PAAC;QAAI,WAAW,IAAA,qKAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 1414, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/separator.tsx"],"sourcesContent":["/* Separator Component - A component that displays a separator - from shadcn/ui (exposes Separator) */\r\nimport * as React from 'react'\r\nimport * as SeparatorPrimitive from '@radix-ui/react-separator'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = 'horizontal', decorative = true, ...props },\r\n    ref,\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        'shrink-0 bg-border',\r\n        orientation === 'horizontal' ? 'h-[1px] w-full' : 'h-full w-[1px]',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  ),\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n"],"names":[],"mappings":";;;;;AAAA,oGAAoG,GACpG;AACA;AAEA;;;;;AAEA,MAAM,0BAAY,2OAAgB,MAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,6PAAC,gbAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,qKAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;;AAIf,UAAU,WAAW,GAAG,gbAAuB,CAAC,WAAW"}},
    {"offset": {"line": 1450, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/accordion.tsx"],"sourcesContent":["/* Accordion Component primitives - A component that displays a list of items in an accordion - from shadcn/ui (exposes Accordion, AccordionItem, AccordionTrigger, AccordionContent) */\r\nimport * as React from 'react'\r\nimport * as AccordionPrimitive from '@radix-ui/react-accordion'\r\nimport { ChevronDown } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Accordion = AccordionPrimitive.Root\r\n\r\nconst AccordionItem = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <AccordionPrimitive.Item\r\n    ref={ref}\r\n    className={cn('border-b', className)}\r\n    {...props}\r\n  />\r\n))\r\nAccordionItem.displayName = 'AccordionItem'\r\n\r\nconst AccordionTrigger = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Header className=\"flex\">\r\n    <AccordionPrimitive.Trigger\r\n      ref={ref}\r\n      className={cn(\r\n        'flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\r\n    </AccordionPrimitive.Trigger>\r\n  </AccordionPrimitive.Header>\r\n))\r\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\r\n\r\nconst AccordionContent = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Content\r\n    ref={ref}\r\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\r\n    {...props}\r\n  >\r\n    <div className={cn('pb-4 pt-0', className)}>{children}</div>\r\n  </AccordionPrimitive.Content>\r\n))\r\n\r\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\r\n\r\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,sLAAsL,GACtL;AACA;AACA;AAEA;;;;;;AAEA,MAAM,YAAY,6aAAuB;AAEzC,MAAM,8BAAgB,2OAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC,6aAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qKAAE,EAAC,YAAY;QACzB,GAAG,KAAK;;;;;;;AAGb,cAAc,WAAW,GAAG;AAE5B,MAAM,iCAAmB,2OAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6PAAC,+aAAyB;QAAC,WAAU;kBACnC,cAAA,6PAAC,gbAA0B;YACzB,KAAK;YACL,WAAW,IAAA,qKAAE,EACX,gIACA;YAED,GAAG,KAAK;;gBAER;8BACD,6PAAC,mWAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,iBAAiB,WAAW,GAAG,gbAA0B,CAAC,WAAW;AAErE,MAAM,iCAAmB,2OAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6PAAC,gbAA0B;QACzB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,6PAAC;YAAI,WAAW,IAAA,qKAAE,EAAC,aAAa;sBAAa;;;;;;;;;;;;AAIjD,iBAAiB,WAAW,GAAG,gbAA0B,CAAC,WAAW"}},
    {"offset": {"line": 1544, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/input.tsx"],"sourcesContent":["/* Input Component - A component that displays an input - from shadcn/ui (exposes Input) */\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<'input'>>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background transition-all duration-250 file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground hover:border-primary/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-primary/50 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n          className,\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\nInput.displayName = 'Input'\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA,yFAAyF,GACzF;AAEA;;;;AAEA,MAAM,sBAAQ,2OAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6PAAC;QACC,MAAM;QACN,WAAW,IAAA,qKAAE,EACX,sdACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 1579, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/textarea.tsx"],"sourcesContent":["/* Textarea Component - A component that displays a textarea - from shadcn/ui (exposes Textarea) */\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<'textarea'>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = 'Textarea'\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAAA,iGAAiG,GACjG;AAEA;;;;AAEA,MAAM,yBAAW,2OAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6PAAC;QACC,WAAW,IAAA,qKAAE,EACX,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 1613, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/label.tsx"],"sourcesContent":["/* Label Component - A component that displays a label - from shadcn/ui (exposes Label) */\r\nimport * as React from 'react'\r\nimport * as LabelPrimitive from '@radix-ui/react-label'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst labelVariants = cva(\r\n  'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;;AAAA,wFAAwF,GACxF;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,8RAAG,EACvB;AAGF,MAAM,sBAAQ,2OAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6PAAC,kbAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qKAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,kbAAmB,CAAC,WAAW"}},
    {"offset": {"line": 1650, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/ui/radio-group.tsx"],"sourcesContent":["/* Radio Group Component primitives - A component that displays a radio group - from shadcn/ui (exposes RadioGroup, RadioGroupItem) */\r\nimport * as React from 'react'\r\nimport * as RadioGroupPrimitive from '@radix-ui/react-radio-group'\r\nimport { Circle } from 'lucide-react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      className={cn('grid gap-2', className)}\r\n      {...props}\r\n      ref={ref}\r\n    />\r\n  )\r\n})\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        'aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n})\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n"],"names":[],"mappings":";;;;;;;AAAA,oIAAoI,GACpI;AACA;AACA;AAEA;;;;;;AAEA,MAAM,2BAAa,2OAAgB,MAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6PAAC,qbAAwB;QACvB,WAAW,IAAA,qKAAE,EAAC,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;;AACA,WAAW,WAAW,GAAG,qbAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,2OAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6PAAC,qbAAwB;QACvB,KAAK;QACL,WAAW,IAAA,qKAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,6PAAC,0bAA6B;YAAC,WAAU;sBACvC,cAAA,6PAAC,gVAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;;AACA,eAAe,WAAW,GAAG,qbAAwB,CAAC,WAAW"}},
    {"offset": {"line": 1719, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/dossier/QuestionRenderer.tsx"],"sourcesContent":["import { Input } from '@/components/ui/input'\r\nimport { Textarea } from '@/components/ui/textarea'\r\nimport { Label } from '@/components/ui/label'\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\r\nimport type { Question } from '@/services/dossierService'\r\n\r\ninterface QuestionRendererProps {\r\n  question: Question\r\n  answer: {\r\n    valueText?: string\r\n    valueNumber?: number\r\n    valueJson?: any\r\n  }\r\n  onChange: (value: any) => void\r\n}\r\n\r\nexport default function QuestionRenderer({\r\n  question,\r\n  answer,\r\n  onChange,\r\n}: QuestionRendererProps) {\r\n  switch (question.type) {\r\n    case 'textarea':\r\n      // Placeholder customizado para perguntas específicas\r\n      let placeholder = question.help_text || ''\r\n      if (question.code === 'IDENTITY_REASON') {\r\n        placeholder = 'Escreva aqui, com suas próprias palavras, por que sua clínica existe e que transformação real ela gera na vida dos pacientes…'\r\n      } else if (question.code === 'IDENTITY_RECOGNITION_GOAL') {\r\n        placeholder = 'Escreva aqui, com suas próprias palavras, como você quer que sua clínica seja conhecida e lembrada daqui a 3 anos…'\r\n      }\r\n      \r\n      return (\r\n        <Textarea\r\n          value={answer.valueText || ''}\r\n          onChange={(e) =>\r\n            onChange({\r\n              ...answer,\r\n              valueText: e.target.value,\r\n            })\r\n          }\r\n          placeholder={placeholder}\r\n          className=\"min-h-[100px]\"\r\n        />\r\n      )\r\n\r\n    case 'single_select':\r\n      return (\r\n        <RadioGroup\r\n          value={answer.valueText || ''}\r\n          onValueChange={(value) =>\r\n            onChange({\r\n              ...answer,\r\n              valueText: value,\r\n            })\r\n          }\r\n        >\r\n          {question.options?.map((option) => (\r\n            <div key={option.id} className=\"flex items-center space-x-2\">\r\n              <RadioGroupItem value={option.value} id={option.id} />\r\n              <Label htmlFor={option.id} className=\"cursor-pointer\">\r\n                {option.label}\r\n              </Label>\r\n            </div>\r\n          ))}\r\n        </RadioGroup>\r\n      )\r\n\r\n    default:\r\n      return (\r\n        <Input\r\n          value={answer.valueText || ''}\r\n          onChange={(e) =>\r\n            onChange({\r\n              ...answer,\r\n              valueText: e.target.value,\r\n            })\r\n          }\r\n          placeholder={question.help_text}\r\n        />\r\n      )\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAae,SAAS,iBAAiB,EACvC,QAAQ,EACR,MAAM,EACN,QAAQ,EACc;IACtB,OAAQ,SAAS,IAAI;QACnB,KAAK;YACH,qDAAqD;YACrD,IAAI,cAAc,SAAS,SAAS,IAAI;YACxC,IAAI,SAAS,IAAI,KAAK,mBAAmB;gBACvC,cAAc;YAChB,OAAO,IAAI,SAAS,IAAI,KAAK,6BAA6B;gBACxD,cAAc;YAChB;YAEA,qBACE,6PAAC,4LAAQ;gBACP,OAAO,OAAO,SAAS,IAAI;gBAC3B,UAAU,CAAC,IACT,SAAS;wBACP,GAAG,MAAM;wBACT,WAAW,EAAE,MAAM,CAAC,KAAK;oBAC3B;gBAEF,aAAa;gBACb,WAAU;;;;;;QAIhB,KAAK;YACH,qBACE,6PAAC,oMAAU;gBACT,OAAO,OAAO,SAAS,IAAI;gBAC3B,eAAe,CAAC,QACd,SAAS;wBACP,GAAG,MAAM;wBACT,WAAW;oBACb;0BAGD,SAAS,OAAO,EAAE,IAAI,CAAC,uBACtB,6PAAC;wBAAoB,WAAU;;0CAC7B,6PAAC,wMAAc;gCAAC,OAAO,OAAO,KAAK;gCAAE,IAAI,OAAO,EAAE;;;;;;0CAClD,6PAAC,sLAAK;gCAAC,SAAS,OAAO,EAAE;gCAAE,WAAU;0CAClC,OAAO,KAAK;;;;;;;uBAHP,OAAO,EAAE;;;;;;;;;;QAU3B;YACE,qBACE,6PAAC,sLAAK;gBACJ,OAAO,OAAO,SAAS,IAAI;gBAC3B,UAAU,CAAC,IACT,SAAS;wBACP,GAAG,MAAM;wBACT,WAAW,EAAE,MAAM,CAAC,KAAK;oBAC3B;gBAEF,aAAa,SAAS,SAAS;;;;;;IAGvC;AACF;KAjEwB"}},
    {"offset": {"line": 1819, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/lib/identity-questions-context.ts"],"sourcesContent":["// Contexto completo das perguntas da seção Identidade\r\n// Serve como guia para o usuário responder cada pergunta\r\n\r\nexport interface QuestionContext {\r\n  why: string // Por que estamos perguntando isso\r\n  howToAnswer?: string // Como responder bem\r\n  goodExamples?: string[] // Exemplos bons\r\n  badExamples?: string[] // Exemplos ruins\r\n  consequences?: string[] // O que acontece sem isso\r\n}\r\n\r\nexport const identityQuestionsContext: Record<string, QuestionContext> = {\r\n  IDENTITY_REASON: {\r\n    why: 'Essa é a bússola moral e estratégica da clínica. Uma clínica sem propósito claro tende a: aceitar qualquer tipo de paciente, fazer qualquer tipo de procedimento, tomar decisões só por dinheiro (não por direção), e perder identidade, foco e diferenciação ao longo do tempo. O propósito serve como critério de decisão, define quem você ajuda de verdade, define o que você aceita e o que você recusa fazer, e dá coerência para toda a estratégia.',\r\n    consequences: [\r\n      'Aceitar qualquer tipo de paciente',\r\n      'Fazer qualquer tipo de procedimento',\r\n      'Tomar decisões só por dinheiro, não por direção',\r\n      'Perder identidade, foco e diferenciação ao longo do tempo',\r\n    ],\r\n    howToAnswer: 'Pense: ❌ Não no procedimento ✅ No resultado na vida do paciente. Complete mentalmente a frase: \"Depois de passar pela nossa clínica, a vida do paciente é diferente porque…\" Boas respostas geralmente: falam de transformação humana, falam de impacto real, não falam de tecnologia/tecnicas/especialidades, não parecem texto de marketing.',\r\n    goodExamples: [\r\n      'Existimos para devolver às pessoas a confiança em sorrir, comer e viver bem, ajudando pacientes que já perderam a esperança a recuperar não só a função mastigatória, mas também a autoestima, a segurança e a vontade de se relacionar, através de tratamentos éticos, humanos e duradouros.',\r\n      'Nossa clínica existe para transformar histórias de frustração com a própria saúde bucal em histórias de reconquista de qualidade de vida, segurança pessoal e bem-estar, cuidando de cada paciente como um projeto único, e não como um procedimento isolado.',\r\n    ],\r\n    badExamples: [\r\n      'Oferecer odontologia de qualidade com excelência e tecnologia.',\r\n      'Atender nossos pacientes da melhor forma possível.',\r\n      'Ser referência em tratamentos odontológicos.',\r\n      'Cuidar do sorriso das pessoas.',\r\n    ],\r\n  },\r\n  IDENTITY_RECOGNITION_GOAL: {\r\n    why: 'Essa pergunta define para onde você está levando o negócio. Sem uma visão clara: a clínica cresce \"para qualquer lado\", aceita qualquer tipo de projeto/parceria/paciente, compra equipamentos e contrata pessoas sem critério estratégico, e confunde crescimento com progresso. A visão serve como filtro de decisão, define o que você vai construir (e o que não vai), dá direção para investimentos/marketing/estrutura, e cria coerência entre o hoje e o futuro desejado.',\r\n    consequences: [\r\n      'A clínica cresce \"para qualquer lado\"',\r\n      'Aceita qualquer tipo de projeto, parceria ou paciente',\r\n      'Compra equipamentos e contrata pessoas sem critério estratégico',\r\n      'Confunde crescimento com progresso',\r\n    ],\r\n    howToAnswer: 'Pense menos em: ❌ Tamanho ❌ Faturamento ❌ Quantidade de unidades. E mais em: ✅ Reputação ✅ Tipo de problema que você resolve ✅ Como as pessoas descrevem você para outras. Complete mentalmente: \"Essa é aquela clínica que…\" Boas respostas: falam de posição no mercado (não de vaidade), falam de tipo de caso resolvido (não de tecnologia), falam de confiança e reconhecimento (não de números), soam como algo que um paciente ou outro médico diria.',\r\n    goodExamples: [\r\n      'Essa é aquela clínica que resolve casos que ninguém mais resolve.',\r\n      'Essa é a clínica mais confiável para reabilitação de coluna da cidade.',\r\n      'Essa é a clínica onde todo mundo indica de olhos fechados.',\r\n    ],\r\n    badExamples: [\r\n      'Ser a maior rede de clínicas da região.',\r\n      'Ter faturamento de X milhões.',\r\n      'Ter 10 unidades em 3 anos.',\r\n      'Ser referência em tecnologia de ponta.',\r\n    ],\r\n  },\r\n  IDENTITY_VALUES: {\r\n    why: 'Valores não são frases bonitas na parede. Eles são critérios de decisão difíceis.',\r\n    howToAnswer: 'Pense em situações reais: O que você não aceitaria de um profissional? Que tipo de paciente você prefere perder do que atender mal?',\r\n    goodExamples: [\r\n      'Nunca prometer resultado que não sabemos entregar.',\r\n      'Nunca tratar paciente com pressa ou descaso.',\r\n      'Nunca sacrificar qualidade técnica por volume.',\r\n    ],\r\n  },\r\n  IDENTITY_PRIORITY_AUDIENCE: {\r\n    why: 'Toda estratégia é uma escolha e uma renúncia. Se você não escolhe: sua agenda escolhe, o mercado escolhe, o acaso escolhe.',\r\n    howToAnswer: 'Escolha um foco principal. Diga também qual tipo de paciente vai virar secundário.',\r\n    goodExamples: [\r\n      'Vamos priorizar mulheres 40+ com dor crônica de coluna. Vamos deixar de focar em atendimentos rápidos e genéricos de convênio.',\r\n    ],\r\n  },\r\n  IDENTITY_PRICE_POSITIONING: {\r\n    why: 'Preço é posicionamento estratégico, não só número.',\r\n  },\r\n  IDENTITY_PRICE_POSITIONING_JUSTIFICATION: {\r\n    why: 'A justificativa do posicionamento de preço demonstra o valor real oferecido pela clínica.',\r\n  },\r\n  IDENTITY_STRATEGY_FOCUS: {\r\n    why: 'Essas duas estratégias (volume vs. valor) exigem clínicas completamente diferentes.',\r\n  },\r\n  IDENTITY_STRATEGY_FOCUS_SECONDARY: {\r\n    why: 'O motor secundário complementa a estratégia principal e ajuda a balancear o crescimento.',\r\n  },\r\n  IDENTITY_STRATEGY_FOCUS_COMPLEMENT: {\r\n    why: 'Estratégia sem mudança é fantasia.',\r\n    howToAnswer: 'Divida em: Pessoas, Processos, Oferta/Serviços',\r\n  },\r\n  IDENTITY_CRITICAL_ACTIONS: {\r\n    why: 'Isso define o que realmente importa na operação.',\r\n    goodExamples: [\r\n      'Garantir que todo paciente saia com plano claro de tratamento.',\r\n      'Reduzir faltas e abandono de tratamento.',\r\n      'Manter padrão técnico alto em todas as sessões.',\r\n    ],\r\n  },\r\n  IDENTITY_KEY_CHARACTERISTICS: {\r\n    why: 'Isso define o jeito de ser da clínica, não só o que ela faz.',\r\n    goodExamples: [\r\n      'Acolhedora, mas extremamente técnica.',\r\n      'Pontual e organizada.',\r\n      'Exigente com resultado.',\r\n    ],\r\n  },\r\n  IDENTITY_WHAT_NOT_TO_BE: {\r\n    why: 'Toda boa estratégia tem uma lista do que não fazer.',\r\n  },\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,sDAAsD;AACtD,yDAAyD;;;;;AAUlD,MAAM,2BAA4D;IACvE,iBAAiB;QACf,KAAK;QACL,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;QACb,cAAc;YACZ;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,2BAA2B;QACzB,KAAK;QACL,cAAc;YACZ;YACA;YACA;YACA;SACD;QACD,aAAa;QACb,cAAc;YACZ;YACA;YACA;SACD;QACD,aAAa;YACX;YACA;YACA;YACA;SACD;IACH;IACA,iBAAiB;QACf,KAAK;QACL,aAAa;QACb,cAAc;YACZ;YACA;YACA;SACD;IACH;IACA,4BAA4B;QAC1B,KAAK;QACL,aAAa;QACb,cAAc;YACZ;SACD;IACH;IACA,4BAA4B;QAC1B,KAAK;IACP;IACA,0CAA0C;QACxC,KAAK;IACP;IACA,yBAAyB;QACvB,KAAK;IACP;IACA,mCAAmC;QACjC,KAAK;IACP;IACA,oCAAoC;QAClC,KAAK;QACL,aAAa;IACf;IACA,2BAA2B;QACzB,KAAK;QACL,cAAc;YACZ;YACA;YACA;SACD;IACH;IACA,8BAA8B;QAC5B,KAAK;QACL,cAAc;YACZ;YACA;YACA;SACD;IACH;IACA,yBAAyB;QACvB,KAAK;IACP;AACF"}},
    {"offset": {"line": 1926, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/dossier/QuestionWizard.tsx"],"sourcesContent":["import { useState, useMemo, useEffect } from 'react'\r\nimport { ChevronLeft, ChevronRight, Info, CheckCircle2, XCircle, AlertTriangle, ArrowLeft } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Separator } from '@/components/ui/separator'\r\nimport {\r\n  Accordion,\r\n  AccordionContent,\r\n  AccordionItem,\r\n  AccordionTrigger,\r\n} from '@/components/ui/accordion'\r\nimport QuestionRenderer from './QuestionRenderer'\r\nimport { identityQuestionsContext, type QuestionContext } from '@/lib/identity-questions-context'\r\nimport type { Question, QuestionSet } from '@/services/dossierService'\r\nimport { fetchAPI } from '@/lib/api'\r\n\r\ninterface QuestionWizardProps {\r\n  questionSets: QuestionSet[]\r\n  answersMap: Record<string, any>\r\n  savingAnswers: Set<string>\r\n  onAnswerChange: (question: Question, value: any) => void\r\n  sectionCode?: string\r\n}\r\n\r\nexport default function QuestionWizard({\r\n  questionSets,\r\n  answersMap,\r\n  savingAnswers,\r\n  onAnswerChange,\r\n  sectionCode,\r\n}: QuestionWizardProps) {\r\n  // Estado para controlar navegação hierárquica\r\n  const [selectedQuestionSetId, setSelectedQuestionSetId] = useState<string | null>(null)\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0)\r\n\r\n  // Ordenar questionSets por ordem (se houver)\r\n  const sortedQuestionSets = useMemo(() => {\r\n    return [...questionSets].sort((a, b) => {\r\n      // Se houver ordem nas perguntas, usar a primeira pergunta como referência\r\n      const aFirstOrder = a.questions[0]?.order_index || 0\r\n      const bFirstOrder = b.questions[0]?.order_index || 0\r\n      return aFirstOrder - bFirstOrder\r\n    })\r\n  }, [questionSets])\r\n\r\n  // QuestionSet atual selecionado\r\n  const currentQuestionSet = selectedQuestionSetId\r\n    ? sortedQuestionSets.find((qs) => qs.id === selectedQuestionSetId)\r\n    : null\r\n\r\n  // Perguntas do questionSet atual, ordenadas\r\n  const currentQuestions = useMemo(() => {\r\n    if (!currentQuestionSet) return []\r\n    return [...currentQuestionSet.questions].sort(\r\n      (a, b) => a.order_index - b.order_index\r\n    )\r\n  }, [currentQuestionSet])\r\n\r\n  // Pergunta atual\r\n  const currentQuestion = currentQuestions[currentQuestionIndex]\r\n  const currentAnswer = currentQuestion ? answersMap[currentQuestion.id] || {} : {}\r\n  const isSaving = currentQuestion ? savingAnswers.has(currentQuestion.id) : false\r\n\r\n  // Estado para contexto da pergunta (buscar do banco)\r\n  const [questionContext, setQuestionContext] = useState<QuestionContext | undefined>(undefined)\r\n  const [loadingContext, setLoadingContext] = useState(false)\r\n\r\n  // Buscar contexto do banco de dados\r\n  useEffect(() => {\r\n    if (currentQuestion?.id) {\r\n      console.log('🔍 Carregando contexto para pergunta:', currentQuestion.code, currentQuestion.id)\r\n      setLoadingContext(true)\r\n\r\n      fetchAPI(`/questions/${currentQuestion.id}/context`)\r\n        .then((data) => {\r\n          console.log('📦 Dados do contexto recebidos:', data)\r\n          if (data && Object.keys(data).length > 1) {\r\n            // Converter formato do banco para formato esperado\r\n            const context = {\r\n              why: data.why,\r\n              consequences: data.consequences,\r\n              howToAnswer: data.howToAnswer,\r\n              goodExamples: data.goodExamples,\r\n              badExamples: data.badExamples,\r\n            }\r\n            console.log('✅ Contexto processado e definido:', context)\r\n            setQuestionContext(context)\r\n          } else {\r\n            console.log('⚠️ Contexto vazio do banco, usando fallback')\r\n            // Fallback para contexto hardcoded se não houver no banco\r\n            if (sectionCode === 'IDENTITY' && currentQuestion?.code) {\r\n              const hardcodedContext = identityQuestionsContext[currentQuestion.code]\r\n              console.log('📚 Usando contexto hardcoded:', hardcodedContext ? 'encontrado' : 'não encontrado')\r\n              setQuestionContext(hardcodedContext)\r\n            } else {\r\n              setQuestionContext(undefined)\r\n            }\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('❌ Erro ao buscar contexto:', error)\r\n          // Em caso de erro, usar fallback hardcoded\r\n          if (sectionCode === 'IDENTITY' && currentQuestion?.code) {\r\n            const hardcodedContext = identityQuestionsContext[currentQuestion.code]\r\n            console.log('📚 Erro no fetch, usando contexto hardcoded:', hardcodedContext ? 'encontrado' : 'não encontrado')\r\n            setQuestionContext(hardcodedContext)\r\n          } else {\r\n            setQuestionContext(undefined)\r\n          }\r\n        })\r\n        .finally(() => {\r\n          console.log('🏁 Carregamento de contexto finalizado')\r\n          setLoadingContext(false)\r\n        })\r\n    } else {\r\n      setQuestionContext(undefined)\r\n    }\r\n  }, [currentQuestion?.id, currentQuestion?.code, sectionCode])\r\n\r\n  // Progresso dentro do questionSet atual\r\n  const questionProgress =\r\n    currentQuestions.length > 0\r\n      ? ((currentQuestionIndex + 1) / currentQuestions.length) * 100\r\n      : 0\r\n\r\n  // Progresso geral (todas as perguntas de todos os questionSets)\r\n  const totalQuestions = useMemo(() => {\r\n    return questionSets.reduce((sum, qs) => sum + qs.questions.length, 0)\r\n  }, [questionSets])\r\n\r\n  const answeredQuestions = useMemo(() => {\r\n    return Object.keys(answersMap).filter(\r\n      (qId) => {\r\n        const answer = answersMap[qId]\r\n        return (\r\n          answer?.valueText ||\r\n          answer?.valueNumber !== undefined ||\r\n          (answer?.valueJson && Object.keys(answer.valueJson).length > 0)\r\n        )\r\n      }\r\n    ).length\r\n  }, [answersMap])\r\n\r\n  const overallProgress = totalQuestions > 0 ? (answeredQuestions / totalQuestions) * 100 : 0\r\n\r\n  // Selecionar primeiro questionSet automaticamente se nenhum estiver selecionado\r\n  useEffect(() => {\r\n    if (!selectedQuestionSetId && sortedQuestionSets.length > 0) {\r\n      setSelectedQuestionSetId(sortedQuestionSets[0].id)\r\n      setCurrentQuestionIndex(0)\r\n    }\r\n  }, [selectedQuestionSetId, sortedQuestionSets])\r\n\r\n  // Resetar índice da pergunta quando mudar de questionSet\r\n  useEffect(() => {\r\n    setCurrentQuestionIndex(0)\r\n  }, [selectedQuestionSetId])\r\n\r\n  const goToQuestionSet = (questionSetId: string) => {\r\n    setSelectedQuestionSetId(questionSetId)\r\n    setCurrentQuestionIndex(0)\r\n    // Scroll apenas quando mudar de questionSet (seção)\r\n    if (typeof window !== 'undefined') {\r\n      window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    }\r\n  }\r\n\r\n  const goBackToQuestionSets = () => {\r\n    setSelectedQuestionSetId(null)\r\n    setCurrentQuestionIndex(0)\r\n    // Scroll apenas quando voltar para seleção de questionSets\r\n    if (typeof window !== 'undefined') {\r\n      window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    }\r\n  }\r\n\r\n  const goToPreviousQuestion = () => {\r\n    if (currentQuestionIndex > 0) {\r\n      setCurrentQuestionIndex(currentQuestionIndex - 1)\r\n      // Não fazer scroll ao navegar entre perguntas\r\n    } else {\r\n      // Se estiver na primeira pergunta, voltar para seleção de questionSets\r\n      goBackToQuestionSets()\r\n    }\r\n  }\r\n\r\n  const goToNextQuestion = () => {\r\n    if (currentQuestionIndex < currentQuestions.length - 1) {\r\n      setCurrentQuestionIndex(currentQuestionIndex + 1)\r\n      // Não fazer scroll ao navegar entre perguntas\r\n    }\r\n  }\r\n\r\n  const goToPreviousQuestionSet = () => {\r\n    if (!currentQuestionSet) return\r\n    const currentIdx = sortedQuestionSets.findIndex((qs) => qs.id === currentQuestionSet.id)\r\n    if (currentIdx > 0) {\r\n      goToQuestionSet(sortedQuestionSets[currentIdx - 1].id)\r\n    }\r\n  }\r\n\r\n  const goToNextQuestionSet = () => {\r\n    if (!currentQuestionSet) return\r\n    const currentIdx = sortedQuestionSets.findIndex((qs) => qs.id === currentQuestionSet.id)\r\n    if (currentIdx < sortedQuestionSets.length - 1) {\r\n      goToQuestionSet(sortedQuestionSets[currentIdx + 1].id)\r\n    }\r\n  }\r\n\r\n  // Tela de seleção de QuestionSets\r\n  if (!selectedQuestionSetId || !currentQuestionSet) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        {/* Progresso Geral */}\r\n        <Card>\r\n          <CardHeader>\r\n            <div className=\"flex items-center justify-between\">\r\n              <CardTitle>Selecione uma seção para começar</CardTitle>\r\n              <Badge variant=\"outline\" className=\"text-sm\">\r\n                {answeredQuestions} de {totalQuestions} respondidas\r\n              </Badge>\r\n            </div>\r\n            <div className=\"mt-4\">\r\n              <Progress value={overallProgress} className=\"h-2\" />\r\n            </div>\r\n          </CardHeader>\r\n        </Card>\r\n\r\n        {/* Lista de QuestionSets */}\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          {sortedQuestionSets.map((questionSet) => {\r\n            const questionsInSet = questionSet.questions.length\r\n            const answeredInSet = questionSet.questions.filter(\r\n              (q) => {\r\n                const answer = answersMap[q.id]\r\n                return (\r\n                  answer?.valueText ||\r\n                  answer?.valueNumber !== undefined ||\r\n                  (answer?.valueJson && Object.keys(answer.valueJson).length > 0)\r\n                )\r\n              }\r\n            ).length\r\n            const setProgress = questionsInSet > 0 ? (answeredInSet / questionsInSet) * 100 : 0\r\n\r\n            return (\r\n              <Card\r\n                key={questionSet.id}\r\n                className=\"cursor-pointer hover:border-teal-400 transition-colors\"\r\n                onClick={() => goToQuestionSet(questionSet.id)}\r\n              >\r\n                <CardHeader>\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <CardTitle className=\"text-lg\">{questionSet.name}</CardTitle>\r\n                      {questionSet.subsection_name && (\r\n                        <CardDescription className=\"mt-1\">\r\n                          {questionSet.subsection_name}\r\n                        </CardDescription>\r\n                      )}\r\n                    </div>\r\n                    <Badge variant=\"outline\" className=\"text-sm\">\r\n                      {answeredInSet}/{questionsInSet}\r\n                    </Badge>\r\n                  </div>\r\n                  <div className=\"mt-4\">\r\n                    <Progress value={setProgress} className=\"h-2\" />\r\n                  </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400\">\r\n                    {questionsInSet} pergunta{questionsInSet !== 1 ? 's' : ''}\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!currentQuestion) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"text-center text-slate-500\">\r\n            <p>Nenhuma pergunta encontrada nesta seção</p>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={goBackToQuestionSets}\r\n              className=\"mt-4\"\r\n            >\r\n              <ArrowLeft className=\"mr-2 size-4\" />\r\n              Voltar para seções\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Indicador de Progresso */}\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={goBackToQuestionSets}\r\n                  className=\"h-8 w-8 p-0\"\r\n                >\r\n                  <ArrowLeft className=\"size-4\" />\r\n                </Button>\r\n                <CardTitle className=\"text-lg\">\r\n                  {currentQuestionSet.name}\r\n                </CardTitle>\r\n              </div>\r\n              {currentQuestionSet.subsection_name && (\r\n                <CardDescription className=\"mt-1\">\r\n                  {currentQuestionSet.subsection_name}\r\n                </CardDescription>\r\n              )}\r\n            </div>\r\n            <Badge variant=\"outline\" className=\"text-sm\">\r\n              Pergunta {currentQuestionIndex + 1} de {currentQuestions.length}\r\n            </Badge>\r\n          </div>\r\n          <div className=\"mt-4\">\r\n            <Progress value={questionProgress} className=\"h-2\" />\r\n          </div>\r\n        </CardHeader>\r\n      </Card>\r\n\r\n      {/* Card Principal da Pergunta */}\r\n      <Card className=\"border-2 border-teal-200 dark:border-teal-800\">\r\n        <CardHeader>\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex-1\">\r\n              <CardTitle className=\"text-2xl mb-2\">\r\n                {currentQuestion.text}\r\n                {currentQuestion.required && (\r\n                  <span className=\"text-red-500 ml-2\">*</span>\r\n                )}\r\n              </CardTitle>\r\n              {currentQuestion.help_text && (\r\n                <CardDescription className=\"text-base mt-2\">\r\n                  {currentQuestion.help_text}\r\n                </CardDescription>\r\n              )}\r\n            </div>\r\n            {isSaving && (\r\n              <div className=\"ml-4\">\r\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-teal-600\"></div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-6\">\r\n          {/* Contexto Detalhado */}\r\n          {loadingContext && (\r\n            <div className=\"text-center text-slate-500 text-sm py-4\">Carregando contexto...</div>\r\n          )}\r\n          {!loadingContext && questionContext && (\r\n            <div className=\"bg-slate-50 dark:bg-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-800\">\r\n              <div className=\"flex items-start gap-2 mb-4\">\r\n                <Info className=\"size-5 text-teal-600 dark:text-teal-400 mt-0.5 flex-shrink-0\" />\r\n                <h3 className=\"font-semibold text-lg text-slate-900 dark:text-slate-100\">\r\n                  Contexto e Orientações\r\n                </h3>\r\n              </div>\r\n              \r\n              <Accordion type=\"multiple\" className=\"w-full\" defaultValue={['why']}>\r\n                {/* Por que estamos perguntando */}\r\n                <AccordionItem value=\"why\" className=\"border-b border-slate-200 dark:border-slate-700\">\r\n                  <AccordionTrigger className=\"text-left hover:no-underline\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Info className=\"size-4 text-teal-600 dark:text-teal-400\" />\r\n                      <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n                        Por que estamos perguntando isso?\r\n                      </span>\r\n                    </div>\r\n                  </AccordionTrigger>\r\n                  <AccordionContent>\r\n                    <p className=\"text-sm text-slate-700 dark:text-slate-300 leading-relaxed pt-2\">\r\n                      {questionContext.why}\r\n                    </p>\r\n                  </AccordionContent>\r\n                </AccordionItem>\r\n\r\n                {/* Consequências */}\r\n                {questionContext.consequences && questionContext.consequences.length > 0 && (\r\n                  <AccordionItem value=\"consequences\" className=\"border-b border-slate-200 dark:border-slate-700\">\r\n                    <AccordionTrigger className=\"text-left hover:no-underline\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <AlertTriangle className=\"size-4 text-amber-600\" />\r\n                        <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n                          O que acontece sem isso?\r\n                        </span>\r\n                      </div>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent>\r\n                      <ul className=\"list-disc list-inside space-y-1 text-sm text-slate-700 dark:text-slate-300 pt-2\">\r\n                        {questionContext.consequences.map((consequence, idx) => (\r\n                          <li key={idx}>{consequence}</li>\r\n                        ))}\r\n                      </ul>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                )}\r\n\r\n                {/* Como responder */}\r\n                {questionContext.howToAnswer && (\r\n                  <AccordionItem value=\"howToAnswer\" className=\"border-b border-slate-200 dark:border-slate-700\">\r\n                    <AccordionTrigger className=\"text-left hover:no-underline\">\r\n                      <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n                        Como responder bem?\r\n                      </span>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent>\r\n                      <p className=\"text-sm text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-line pt-2\">\r\n                        {questionContext.howToAnswer}\r\n                      </p>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                )}\r\n\r\n                {/* Exemplos bons */}\r\n                {questionContext.goodExamples && questionContext.goodExamples.length > 0 && (\r\n                  <AccordionItem value=\"goodExamples\" className=\"border-b border-slate-200 dark:border-slate-700\">\r\n                    <AccordionTrigger className=\"text-left hover:no-underline\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <CheckCircle2 className=\"size-4 text-green-600\" />\r\n                        <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n                          Exemplos de boas respostas\r\n                        </span>\r\n                      </div>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent>\r\n                      <div className=\"space-y-2 pt-2\">\r\n                        {questionContext.goodExamples.map((example, idx) => (\r\n                          <div\r\n                            key={idx}\r\n                            className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded p-3 text-sm text-green-900 dark:text-green-200\"\r\n                          >\r\n                            \"{example}\"\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                )}\r\n\r\n                {/* Exemplos ruins */}\r\n                {questionContext.badExamples && questionContext.badExamples.length > 0 && (\r\n                  <AccordionItem value=\"badExamples\" className=\"border-b-0\">\r\n                    <AccordionTrigger className=\"text-left hover:no-underline\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <XCircle className=\"size-4 text-red-600\" />\r\n                        <span className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n                          Exemplos de respostas ruins\r\n                        </span>\r\n                      </div>\r\n                    </AccordionTrigger>\r\n                    <AccordionContent>\r\n                      <div className=\"space-y-2 pt-2\">\r\n                        {questionContext.badExamples.map((example, idx) => (\r\n                          <div\r\n                            key={idx}\r\n                            className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3 text-sm text-red-900 dark:text-red-200\"\r\n                          >\r\n                            \"{example}\"\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </AccordionContent>\r\n                  </AccordionItem>\r\n                )}\r\n              </Accordion>\r\n            </div>\r\n          )}\r\n\r\n          {/* Campo de Resposta */}\r\n          <div className=\"space-y-2\">\r\n            <QuestionRenderer\r\n              question={currentQuestion}\r\n              answer={currentAnswer}\r\n              onChange={(value) => onAnswerChange(currentQuestion, value)}\r\n            />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Navegação */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"space-y-4\">\r\n            {/* Navegação entre perguntas */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={goToPreviousQuestion}\r\n                disabled={currentQuestionIndex === 0}\r\n                className=\"flex items-center gap-2\"\r\n              >\r\n                <ChevronLeft className=\"size-4\" />\r\n                {currentQuestionIndex === 0 ? 'Voltar para seções' : 'Pergunta anterior'}\r\n              </Button>\r\n\r\n              <div className=\"text-sm text-slate-600 dark:text-slate-400\">\r\n                {currentQuestionIndex + 1} de {currentQuestions.length}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={() => {\r\n                  if (currentQuestionIndex === currentQuestions.length - 1) {\r\n                    // Última pergunta: rolar para o relatório\r\n                    const reportSection = document.getElementById('section-report')\r\n                    if (reportSection) {\r\n                      reportSection.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n                    }\r\n                  } else {\r\n                    // Não é última pergunta: ir para próxima\r\n                    goToNextQuestion()\r\n                  }\r\n                }}\r\n                className=\"flex items-center gap-2\"\r\n              >\r\n                {currentQuestionIndex === currentQuestions.length - 1\r\n                  ? 'Concluir Seção'\r\n                  : 'Próxima pergunta'}\r\n                <ChevronRight className=\"size-4\" />\r\n              </Button>\r\n            </div>\r\n\r\n            {/* Navegação entre questionSets (se houver mais de um) */}\r\n            {sortedQuestionSets.length > 1 && (\r\n              <>\r\n                <Separator />\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={goToPreviousQuestionSet}\r\n                    disabled={\r\n                      sortedQuestionSets.findIndex((qs) => qs.id === currentQuestionSet.id) === 0\r\n                    }\r\n                    className=\"flex items-center gap-2\"\r\n                  >\r\n                    <ChevronLeft className=\"size-4\" />\r\n                    Seção anterior\r\n                  </Button>\r\n\r\n                  <div className=\"text-slate-500 dark:text-slate-400\">\r\n                    Seção{' '}\r\n                    {sortedQuestionSets.findIndex((qs) => qs.id === currentQuestionSet.id) + 1} de{' '}\r\n                    {sortedQuestionSets.length}\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={goToNextQuestionSet}\r\n                    disabled={\r\n                      sortedQuestionSets.findIndex((qs) => qs.id === currentQuestionSet.id) ===\r\n                      sortedQuestionSets.length - 1\r\n                    }\r\n                    className=\"flex items-center gap-2\"\r\n                  >\r\n                    Próxima seção\r\n                    <ChevronRight className=\"size-4\" />\r\n                  </Button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3127, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/MarkdownRenderer.tsx"],"sourcesContent":["import ReactMarkdown from 'react-markdown'\r\nimport { Card, CardContent } from '@/components/ui/card'\r\n\r\ninterface MarkdownRendererProps {\r\n  content: string\r\n  className?: string\r\n}\r\n\r\nexport default function MarkdownRenderer({ content, className = '' }: MarkdownRendererProps) {\r\n  return (\r\n    <div className={`prose prose-slate dark:prose-invert max-w-none ${className}`}>\r\n      <ReactMarkdown\r\n        components={{\r\n          h1: ({ node, ...props }) => (\r\n            <h1 className=\"text-3xl font-bold mt-6 mb-4 text-slate-900 dark:text-slate-100\" {...props} />\r\n          ),\r\n          h2: ({ node, ...props }) => (\r\n            <h2 className=\"text-2xl font-semibold mt-5 mb-3 text-slate-800 dark:text-slate-200\" {...props} />\r\n          ),\r\n          h3: ({ node, ...props }) => (\r\n            <h3 className=\"text-xl font-semibold mt-4 mb-2 text-slate-700 dark:text-slate-300\" {...props} />\r\n          ),\r\n          p: ({ node, ...props }) => (\r\n            <p className=\"mb-4 text-slate-700 dark:text-slate-300 leading-relaxed\" {...props} />\r\n          ),\r\n          ul: ({ node, ...props }) => (\r\n            <ul className=\"list-disc list-inside mb-4 space-y-2 text-slate-700 dark:text-slate-300\" {...props} />\r\n          ),\r\n          ol: ({ node, ...props }) => (\r\n            <ol className=\"list-decimal list-inside mb-4 space-y-2 text-slate-700 dark:text-slate-300\" {...props} />\r\n          ),\r\n          li: ({ node, ...props }) => (\r\n            <li className=\"ml-4 text-slate-700 dark:text-slate-300\" {...props} />\r\n          ),\r\n          blockquote: ({ node, ...props }) => (\r\n            <blockquote\r\n              className=\"border-l-4 border-teal-500 pl-4 italic my-4 text-slate-600 dark:text-slate-400\"\r\n              {...props}\r\n            />\r\n          ),\r\n          code: ({ node, inline, ...props }: any) =>\r\n            inline ? (\r\n              <code\r\n                className=\"bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-sm font-mono text-slate-900 dark:text-slate-100\"\r\n                {...props}\r\n              />\r\n            ) : (\r\n              <code\r\n                className=\"block bg-slate-100 dark:bg-slate-800 p-4 rounded-lg overflow-x-auto text-sm font-mono text-slate-900 dark:text-slate-100\"\r\n                {...props}\r\n              />\r\n            ),\r\n          strong: ({ node, ...props }) => (\r\n            <strong className=\"font-bold text-slate-900 dark:text-slate-100\" {...props} />\r\n          ),\r\n          em: ({ node, ...props }) => (\r\n            <em className=\"italic text-slate-800 dark:text-slate-200\" {...props} />\r\n          ),\r\n          a: ({ node, ...props }) => (\r\n            <a\r\n              className=\"text-teal-600 dark:text-teal-400 hover:underline\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              {...props}\r\n            />\r\n          ),\r\n        }}\r\n      >\r\n        {content}\r\n      </ReactMarkdown>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAQe,SAAS,iBAAiB,EAAE,OAAO,EAAE,YAAY,EAAE,EAAyB;IACzF,qBACE,6PAAC;QAAI,WAAW,CAAC,+CAA+C,EAAE,WAAW;kBAC3E,cAAA,6PAAC,uWAAa;YACZ,YAAY;gBACV,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAAmE,GAAG,KAAK;;;;;;gBAE3F,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAAuE,GAAG,KAAK;;;;;;gBAE/F,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAAsE,GAAG,KAAK;;;;;;gBAE9F,GAAG,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACpB,6PAAC;wBAAE,WAAU;wBAA2D,GAAG,KAAK;;;;;;gBAElF,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAA2E,GAAG,KAAK;;;;;;gBAEnG,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAA8E,GAAG,KAAK;;;;;;gBAEtG,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAA2C,GAAG,KAAK;;;;;;gBAEnE,YAAY,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBAC7B,6PAAC;wBACC,WAAU;wBACT,GAAG,KAAK;;;;;;gBAGb,MAAM,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,OAAY,GACpC,uBACE,6PAAC;wBACC,WAAU;wBACT,GAAG,KAAK;;;;;+CAGX,6PAAC;wBACC,WAAU;wBACT,GAAG,KAAK;;;;;;gBAGf,QAAQ,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACzB,6PAAC;wBAAO,WAAU;wBAAgD,GAAG,KAAK;;;;;;gBAE5E,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACrB,6PAAC;wBAAG,WAAU;wBAA6C,GAAG,KAAK;;;;;;gBAErE,GAAG,CAAC,EAAE,IAAI,EAAE,GAAG,OAAO,iBACpB,6PAAC;wBACC,WAAU;wBACV,QAAO;wBACP,KAAI;wBACH,GAAG,KAAK;;;;;;YAGf;sBAEC;;;;;;;;;;;AAIT;KAhEwB"}},
    {"offset": {"line": 3268, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/dossier/SectionReportCard.tsx"],"sourcesContent":["import {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { FileText, RefreshCw, Loader2, AlertCircle, Download } from 'lucide-react'\r\nimport MarkdownRenderer from '@/components/MarkdownRenderer'\r\nimport { useState } from 'react'\r\nimport jsPDF from 'jspdf'\r\nimport html2canvas from 'html2canvas'\r\nimport { toast } from 'sonner'\r\n\r\ninterface SectionReportCardProps {\r\n  report: any | null\r\n  loading: boolean\r\n  generating: boolean\r\n  onGenerate: () => void\r\n  sectionCode: string\r\n  sectionTitle?: string\r\n}\r\n\r\nexport default function SectionReportCard({\r\n  report,\r\n  loading,\r\n  generating,\r\n  onGenerate,\r\n  sectionCode,\r\n  sectionTitle,\r\n}: SectionReportCardProps) {\r\n  const displayTitle = sectionTitle || 'Relatório desta Seção'\r\n  const [exporting, setExporting] = useState(false)\r\n\r\n  const handleExportPDF = async () => {\r\n    if (!report || !report.report_markdown) {\r\n      toast.error('Nenhum relatório para exportar')\r\n      return\r\n    }\r\n\r\n    setExporting(true)\r\n    toast.info('Preparando PDF...')\r\n\r\n    try {\r\n      // Capturar o conteúdo do relatório\r\n      const reportElement = document.getElementById(`report-content-${sectionCode}`)\r\n      if (!reportElement) {\r\n        throw new Error('Conteúdo do relatório não encontrado')\r\n      }\r\n\r\n      // Adicionar classe para estilos de exportação (remove bordas coloridas)\r\n      reportElement.classList.add('pdf-export-mode')\r\n\r\n      // Converter para canvas com otimizações para tamanho menor\r\n      const canvas = await html2canvas(reportElement, {\r\n        scale: 1.5, // Reduzido de 2 para 1.5 (boa qualidade, menor tamanho)\r\n        logging: false,\r\n        useCORS: true,\r\n        backgroundColor: '#ffffff', // Fundo branco sólido\r\n      })\r\n\r\n      // Remover classe de exportação\r\n      reportElement.classList.remove('pdf-export-mode')\r\n\r\n      // Criar PDF\r\n      // Usar JPEG com compressão em vez de PNG (reduz tamanho significativamente)\r\n      const imgData = canvas.toDataURL('image/jpeg', 0.85)\r\n      const pdf = new jsPDF({\r\n        orientation: 'portrait',\r\n        unit: 'mm',\r\n        format: 'a4',\r\n        compress: true, // Ativar compressão do PDF\r\n      })\r\n\r\n      const imgWidth = 210 // A4 width in mm\r\n      const pageHeight = 297 // A4 height in mm\r\n      const imgHeight = (canvas.height * imgWidth) / canvas.width\r\n      let heightLeft = imgHeight\r\n      let position = 0\r\n\r\n      // Adicionar primeira página com compressão\r\n      pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST')\r\n      heightLeft -= pageHeight\r\n\r\n      // Adicionar páginas adicionais se necessário\r\n      while (heightLeft > 0) {\r\n        position = heightLeft - imgHeight\r\n        pdf.addPage()\r\n        pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST')\r\n        heightLeft -= pageHeight\r\n      }\r\n\r\n      // Salvar PDF\r\n      const fileName = `relatorio-${sectionCode.toLowerCase()}-${new Date().toISOString().split('T')[0]}.pdf`\r\n      pdf.save(fileName)\r\n\r\n      toast.success('PDF exportado com sucesso!')\r\n    } catch (error) {\r\n      console.error('Erro ao exportar PDF:', error)\r\n      toast.error('Erro ao exportar PDF')\r\n      // Garantir que a classe é removida mesmo em caso de erro\r\n      const reportElement = document.getElementById(`report-content-${sectionCode}`)\r\n      if (reportElement) {\r\n        reportElement.classList.remove('pdf-export-mode')\r\n      }\r\n    } finally {\r\n      setExporting(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <FileText className=\"size-5\" />\r\n              {displayTitle}\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Relatório gerado por IA com análise e insights sobre esta seção\r\n            </CardDescription>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            {report && (\r\n              <Button\r\n                onClick={handleExportPDF}\r\n                disabled={exporting}\r\n                variant=\"outline\"\r\n                size=\"default\"\r\n              >\r\n                {exporting ? (\r\n                  <>\r\n                    <Loader2 className=\"mr-2 size-4 animate-spin\" />\r\n                    Exportando...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Download className=\"mr-2 size-4\" />\r\n                    Exportar PDF\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={onGenerate}\r\n              disabled={generating}\r\n              variant={report ? 'outline' : 'default'}\r\n            >\r\n              {generating ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 size-4 animate-spin\" />\r\n                  Gerando...\r\n                </>\r\n              ) : report ? (\r\n                <>\r\n                  <RefreshCw className=\"mr-2 size-4\" />\r\n                  Regenerar\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FileText className=\"mr-2 size-4\" />\r\n                  Gerar Relatório\r\n                </>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent>\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <Loader2 className=\"size-6 animate-spin text-teal-600\" />\r\n          </div>\r\n        ) : report ? (\r\n          <div id={`report-content-${sectionCode}`} className=\"space-y-6\">\r\n            {report.status === 'error' && (\r\n              <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <AlertCircle className=\"size-5 text-red-600 dark:text-red-400\" />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-sm font-medium text-red-800 dark:text-red-200\">\r\n                    Erro ao gerar relatório\r\n                  </p>\r\n                  {report.error_message && (\r\n                    <p className=\"text-xs text-red-600 dark:text-red-400 mt-1\">\r\n                      {report.error_message}\r\n                    </p>\r\n                  )}\r\n                  <p className=\"text-xs text-red-600 dark:text-red-400 mt-1\">\r\n                    Tente regenerar o relatório.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            {report.status === 'stale' && (\r\n              <div className=\"flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg\">\r\n                <AlertCircle className=\"size-5 text-amber-600 dark:text-amber-400\" />\r\n                <p className=\"text-sm text-amber-800 dark:text-amber-200\">\r\n                  Este relatório está desatualizado. Os dados da seção foram alterados desde a última geração.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* CONTEÚDO PRINCIPAL: Markdown do relatório */}\r\n            {report.report_markdown && (\r\n              <div className=\"prose prose-slate dark:prose-invert max-w-none\">\r\n                <MarkdownRenderer content={report.report_markdown} />\r\n              </div>\r\n            )}\r\n\r\n            {/* INSIGHTS COMO COMPLEMENTO - Após o markdown (apenas seções relevantes) */}\r\n            {report.insights && (\r\n              <div className=\"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 space-y-6\">\r\n\r\n                {/* Resumo da Identidade (apenas para IDENTITY) */}\r\n                {report.insights.identity_summary && (\r\n                  <div className=\"space-y-4\">\r\n                    <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">Resumo da Identidade</h3>\r\n                    <div className=\"grid gap-4 md:grid-cols-2\">\r\n                      {report.insights.identity_summary.purpose && (\r\n                        <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n                          <p className=\"text-xs font-semibold text-blue-600 dark:text-blue-400 mb-1\">Propósito</p>\r\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300\">{report.insights.identity_summary.purpose}</p>\r\n                        </div>\r\n                      )}\r\n                      {report.insights.identity_summary.vision && (\r\n                        <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg\">\r\n                          <p className=\"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-1\">Visão</p>\r\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300\">{report.insights.identity_summary.vision}</p>\r\n                        </div>\r\n                      )}\r\n                      {report.insights.identity_summary.priority_audience && (\r\n                        <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\r\n                          <p className=\"text-xs font-semibold text-green-600 dark:text-green-400 mb-1\">Público Prioritário</p>\r\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300\">{report.insights.identity_summary.priority_audience}</p>\r\n                        </div>\r\n                      )}\r\n                      {report.insights.identity_summary.positioning && (\r\n                        <div className=\"p-4 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg\">\r\n                          <p className=\"text-xs font-semibold text-teal-600 dark:text-teal-400 mb-1\">Posicionamento</p>\r\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300\">{report.insights.identity_summary.positioning}</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    {report.insights.identity_summary.values && report.insights.identity_summary.values.length > 0 && (\r\n                      <div className=\"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg\">\r\n                        <p className=\"text-xs font-semibold text-amber-600 dark:text-amber-400 mb-2\">Valores</p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {report.insights.identity_summary.values.map((value: string, idx: number) => (\r\n                            <Badge key={idx} variant=\"outline\" className=\"bg-white dark:bg-slate-800\">\r\n                              {value}\r\n                            </Badge>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Alertas */}\r\n                {report.insights.alerts && report.insights.alerts.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">Alertas</h3>\r\n                    {report.insights.alerts.map((alert: any, idx: number) => (\r\n                      <div\r\n                        key={idx}\r\n                        className={`p-3 rounded-lg border ${\r\n                          alert.severity === 'high'\r\n                            ? 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800'\r\n                            : alert.severity === 'medium'\r\n                              ? 'bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800'\r\n                              : 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800'\r\n                        }`}\r\n                      >\r\n                        <p className=\"font-medium text-sm\">{alert.title}</p>\r\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">{alert.detail}</p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Recomendações */}\r\n                {report.insights.recommendations && report.insights.recommendations.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">Recomendações</h3>\r\n                    {report.insights.recommendations\r\n                      .sort((a: any, b: any) => (b.priority || 0) - (a.priority || 0))\r\n                      .map((rec: any, idx: number) => (\r\n                        <div\r\n                          key={idx}\r\n                          className=\"p-3 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg\"\r\n                        >\r\n                          <div className=\"flex justify-between items-start mb-1\">\r\n                            <p className=\"font-medium text-sm\">{rec.title}</p>\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              Prioridade {rec.priority || 0}\r\n                            </Badge>\r\n                          </div>\r\n                          <p className=\"text-sm text-slate-600 dark:text-slate-400\">{rec.detail}</p>\r\n                        </div>\r\n                      ))}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Checklist */}\r\n                {report.insights.checklist && report.insights.checklist.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">Checklist de Melhoria</h3>\r\n                    <div className=\"space-y-2\">\r\n                      {report.insights.checklist.map((item: string, idx: number) => (\r\n                        <div\r\n                          key={idx}\r\n                          className=\"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg\"\r\n                        >\r\n                          <input type=\"checkbox\" className=\"mt-1\" />\r\n                          <p className=\"text-sm text-slate-700 dark:text-slate-300 flex-1\">{item}</p>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Dados Faltantes */}\r\n                {report.insights.missing_data && report.insights.missing_data.length > 0 && (\r\n                  <div className=\"space-y-2\">\r\n                    <h3 className=\"font-semibold text-slate-900 dark:text-slate-100\">Dados Faltantes</h3>\r\n                    {report.insights.missing_data.map((item: any, idx: number) => (\r\n                      <div\r\n                        key={idx}\r\n                        className=\"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg\"\r\n                      >\r\n                        <p className=\"font-medium text-sm\">{item.item}</p>\r\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400 mt-1\">{item.why_it_matters}</p>\r\n                        {item.how_to_fill && (\r\n                          <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-1 italic\">\r\n                            Como preencher: {item.how_to_fill}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 text-slate-500\">\r\n            <FileText className=\"size-12 mx-auto mb-3 opacity-50\" />\r\n            <p>Nenhum relatório gerado ainda.</p>\r\n            <p className=\"text-sm mt-1\">Clique em \"Gerar Relatório\" para criar um relatório com análise e insights.</p>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4040, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/src/components/dossier/DossierSectionPage.tsx"],"sourcesContent":["import { useRouter } from 'next/router'\r\nimport { useState, useEffect, useRef, useCallback } from 'react'\r\nimport { useSectionData } from '@/hooks/useSectionData'\r\nimport { useSectionReport } from '@/hooks/useSectionReport'\r\nimport { saveAnswers } from '@/services/dossierService'\r\nimport QuestionWizard from '@/components/dossier/QuestionWizard'\r\nimport SectionReportCard from '@/components/dossier/SectionReportCard'\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { Loader2 } from 'lucide-react'\r\nimport { toast } from 'sonner'\r\nimport type { Question } from '@/services/dossierService'\r\n\r\ninterface DossierSectionPageProps {\r\n  sectionCode: string\r\n  entityBlocks?: React.ReactNode\r\n}\r\n\r\nexport default function DossierSectionPage({\r\n  sectionCode,\r\n  entityBlocks,\r\n}: DossierSectionPageProps) {\r\n  const router = useRouter()\r\n  const dossierId = typeof router.query.dossierId === 'string' ? router.query.dossierId : undefined\r\n  const { sectionData, loading, error, completionPercent, refetch } =\r\n    useSectionData(dossierId, sectionCode)\r\n  const {\r\n    report,\r\n    loadingReport,\r\n    generatingReport,\r\n    handleGenerateReport,\r\n  } = useSectionReport(dossierId, sectionCode)\r\n\r\n  const [savingAnswers, setSavingAnswers] = useState<Set<string>>(new Set())\r\n  const [answersMap, setAnswersMap] = useState<Record<string, any>>({})\r\n  const saveTimeoutRef = useRef<Record<string, NodeJS.Timeout>>({})\r\n\r\n  // Inicializar answersMap quando sectionData mudar\r\n  useEffect(() => {\r\n    if (sectionData?.questionSets) {\r\n      console.log('📥 Carregando dados da seção:', {\r\n        sectionCode,\r\n        questionSetsCount: sectionData.questionSets.length,\r\n      })\r\n\r\n      const initialAnswers: Record<string, any> = {}\r\n      let answersCount = 0\r\n\r\n      sectionData.questionSets.forEach((qs) => {\r\n        qs.questions.forEach((q) => {\r\n          if (q.answer && Object.keys(q.answer).length > 0) {\r\n            answersCount++\r\n            console.log('📝 Resposta encontrada:', {\r\n              questionId: q.id,\r\n              questionCode: q.code,\r\n              answerKeys: Object.keys(q.answer),\r\n              valueText: q.answer.value_text?.substring(0, 50),\r\n              valueNumber: q.answer.value_number,\r\n              valueJson: q.answer.value_json,\r\n            })\r\n          }\r\n\r\n          // Converter snake_case do banco para camelCase esperado pelo frontend\r\n          if (q.answer) {\r\n            const converted = {\r\n              id: q.answer.id,\r\n              valueText: q.answer.value_text,\r\n              valueNumber: q.answer.value_number,\r\n              valueJson: q.answer.value_json,\r\n              source: q.answer.source,\r\n            }\r\n            initialAnswers[q.id] = converted\r\n\r\n            if (converted.valueText || converted.valueNumber || converted.valueJson) {\r\n              console.log('🔄 Convertido snake_case → camelCase:', {\r\n                questionCode: q.code,\r\n                antes: { value_text: q.answer.value_text, value_number: q.answer.value_number },\r\n                depois: { valueText: converted.valueText, valueNumber: converted.valueNumber },\r\n              })\r\n            }\r\n          } else {\r\n            initialAnswers[q.id] = {}\r\n          }\r\n        })\r\n      })\r\n\r\n      console.log(`✅ Total de ${answersCount} respostas carregadas`)\r\n      setAnswersMap(initialAnswers)\r\n    }\r\n  }, [sectionData, sectionCode])\r\n\r\n  // Cleanup timeouts on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      Object.values(saveTimeoutRef.current).forEach(clearTimeout)\r\n    }\r\n  }, [])\r\n\r\n  if (!dossierId) {\r\n    return null\r\n  }\r\n\r\n  const handleAnswerChange = useCallback(\r\n    (\r\n      question: Question,\r\n      value: {\r\n        valueText?: string\r\n        valueNumber?: number\r\n        valueJson?: any\r\n      },\r\n    ) => {\r\n      if (!question.id) return\r\n\r\n      // Atualizar estado local imediatamente para feedback visual\r\n      setAnswersMap((prev) => ({\r\n        ...prev,\r\n        [question.id]: value,\r\n      }))\r\n\r\n      // Limpar timeout anterior se existir\r\n      if (saveTimeoutRef.current[question.id]) {\r\n        clearTimeout(saveTimeoutRef.current[question.id])\r\n      }\r\n\r\n      // Marcar como salvando após um pequeno delay (para evitar piscar o ícone)\r\n      const savingTimeout = setTimeout(() => {\r\n        setSavingAnswers((prev) => new Set(prev).add(question.id))\r\n      }, 300)\r\n\r\n      // Debounce: salvar após 1 segundo de inatividade\r\n      saveTimeoutRef.current[question.id] = setTimeout(async () => {\r\n        try {\r\n          console.log('💾 Salvando resposta:', {\r\n            dossierId,\r\n            questionId: question.id,\r\n            questionCode: question.code,\r\n            valueText: value.valueText?.substring(0, 50),\r\n            valueNumber: value.valueNumber,\r\n            valueJson: value.valueJson,\r\n          })\r\n\r\n          const result = await saveAnswers(dossierId, [\r\n            {\r\n              questionId: question.id,\r\n              valueText: value.valueText,\r\n              valueNumber: value.valueNumber,\r\n              valueJson: value.valueJson,\r\n              source: 'user',\r\n            },\r\n          ])\r\n\r\n          console.log('✅ Resposta salva com sucesso:', result)\r\n\r\n          // Não fazer refetch aqui - o estado local já está atualizado\r\n          // Isso evita o refresh da tela enquanto o usuário está digitando\r\n        } catch (err) {\r\n          console.error('❌ Erro ao salvar resposta:', err)\r\n          toast.error('Erro ao salvar resposta')\r\n\r\n          // Reverter mudança em caso de erro\r\n          setAnswersMap((prev) => ({\r\n            ...prev,\r\n            [question.id]: sectionData?.questionSets\r\n              .flatMap((qs) => qs.questions)\r\n              .find((q) => q.id === question.id)?.answer || {},\r\n          }))\r\n        } finally {\r\n          clearTimeout(savingTimeout)\r\n          setSavingAnswers((prev) => {\r\n            const next = new Set(prev)\r\n            next.delete(question.id)\r\n            return next\r\n          })\r\n          delete saveTimeoutRef.current[question.id]\r\n        }\r\n      }, 1000) // 1 segundo de debounce\r\n    },\r\n    [dossierId, sectionData],\r\n  )\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <Loader2 className=\"size-8 animate-spin text-teal-600\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"text-center text-red-600\">\r\n            <p>Erro ao carregar dados da seção</p>\r\n            <p className=\"text-sm mt-2\">{error.message}</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (!sectionData) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"text-center text-slate-500\">\r\n            <p>Nenhum dado encontrado para esta seção</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Cabeçalho da Seção */}\r\n      <Card>\r\n        <CardHeader>\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <CardTitle>{sectionData.section.name}</CardTitle>\r\n              {sectionData.section.description && (\r\n                <CardDescription className=\"mt-2\">\r\n                  {sectionData.section.description}\r\n                </CardDescription>\r\n              )}\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-sm text-slate-600 dark:text-slate-400 mb-1\">\r\n                Completude\r\n              </div>\r\n              <div className=\"text-2xl font-bold\">{completionPercent}%</div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-4\">\r\n            <Progress value={completionPercent} className=\"h-2\" />\r\n          </div>\r\n        </CardHeader>\r\n      </Card>\r\n\r\n      {/* Perguntas - Usar QuestionWizard para todas as seções */}\r\n      <QuestionWizard\r\n        questionSets={sectionData.questionSets}\r\n        answersMap={answersMap}\r\n        savingAnswers={savingAnswers}\r\n        onAnswerChange={handleAnswerChange}\r\n        sectionCode={sectionCode}\r\n      />\r\n\r\n      {/* Blocos de Entidades */}\r\n      {entityBlocks && (\r\n        <div className=\"space-y-4\">\r\n          {entityBlocks}\r\n        </div>\r\n      )}\r\n\r\n      {/* Relatório da Seção */}\r\n      <div id=\"section-report\">\r\n        <SectionReportCard\r\n          report={report}\r\n          loading={loadingReport}\r\n          generating={generatingReport}\r\n          onGenerate={handleGenerateReport}\r\n          sectionCode={sectionCode}\r\n          sectionTitle={`Relatório - ${sectionData.section.name}`}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4470, "column": 0}, "map": {"version":3,"sources":["file:///mnt/c/Users/Leonardo%20Machado/Documents/Planeamento%20dental/planeamento-dental/pages/dossie/%5BdossierId%5D/business-model.tsx"],"sourcesContent":["import DossierSectionPage from '@/components/dossier/DossierSectionPage'\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card'\r\nimport { Building2 } from 'lucide-react'\r\n\r\nexport default function DossierBusinessModel() {\r\n  return (\r\n    <DossierSectionPage\r\n      sectionCode=\"BUSINESS_MODEL\"\r\n      entityBlocks={\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2\">\r\n              <Building2 className=\"size-5\" />\r\n              Entidades do Modelo de Negócio\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Blocos de entidades para esta seção serão implementados em breve\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-sm text-slate-500 text-center py-4\">\r\n              Em construção\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAOA;;;;;AAEe,SAAS;IACtB,qBACE,6PAAC,0MAAkB;QACjB,aAAY;QACZ,4BACE,6PAAC,oLAAI;;8BACH,6PAAC,0LAAU;;sCACT,6PAAC,yLAAS;4BAAC,WAAU;;8CACnB,6PAAC,6VAAS;oCAAC,WAAU;;;;;;gCAAW;;;;;;;sCAGlC,6PAAC,+LAAe;sCAAC;;;;;;;;;;;;8BAInB,6PAAC,2LAAW;8BACV,cAAA,6PAAC;wBAAE,WAAU;kCAA0C;;;;;;;;;;;;;;;;;;;;;;AAQnE;KAxBwB"}},
    {"offset": {"line": 4554, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/entry/page-loader.ts"],"sourcesContent":["const PAGE_PATH = \"/dossie/[dossierId]/business-model\";\n\n/// <reference types=\"next/client\" />\n\n// inserted by rust code\ndeclare const PAGE_PATH: string\n\n  // Adapted from https://github.com/vercel/next.js/blob/b7f9f1f98fc8ab602e84825105b5727272b72e7d/packages/next/src/build/webpack/loaders/next-client-pages-loader.ts\n;(window.__NEXT_P = window.__NEXT_P || []).push([\n  PAGE_PATH,\n  () => {\n    return require('PAGE')\n  },\n])\n// @ts-expect-error module.hot exists\nif (module.hot) {\n  // @ts-expect-error module.hot exists\n  module.hot.dispose(function () {\n    window.__NEXT_P.push([PAGE_PATH])\n  })\n}\n"],"names":[],"mappings":"AAAA,MAAM,YAAY;AAQjB,CAAC,OAAO,QAAQ,GAAG,OAAO,QAAQ,IAAI,EAAE,EAAE,IAAI,CAAC;IAC9C;IACA;QACE;IACF;CACD;AACD,qCAAqC;AACrC,IAAI,OAAO,GAAG,EAAE;IACd,qCAAqC;IACrC,OAAO,GAAG,CAAC,OAAO,CAAC;QACjB,OAAO,QAAQ,CAAC,IAAI,CAAC;YAAC;SAAU;IAClC;AACF","ignoreList":[0]}}]
}