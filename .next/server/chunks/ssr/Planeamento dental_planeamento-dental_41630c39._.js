module.exports=[66992,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(91917),g=a.i(28647),h=a.i(71946),i=a.i(84637),j=a.i(56983),k=a.i(96646),l=a.i(83423),m=a.i(11519),n=a.i(38681),o=a.i(4463),p=a.i(91046),q=a.i(65894),r=a.i(43776),s=a.i(45398),t=a.i(49721),u=a.i(34159),v=b([g,h,i,j,k,r,s,t,u]);function w(){let[a,b]=(0,e.useState)([]),[c,v]=(0,e.useState)([]),[w,x]=(0,e.useState)(!0),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)("all"),[C,D]=(0,e.useState)("all"),[E,F]=(0,e.useState)(null);(0,e.useEffect)(()=>{H()},[]),(0,e.useEffect)(()=>{G()},[a,y,A,C]);let G=()=>{let b=[...a];y&&(b=b.filter(a=>a.clinic_name?.toLowerCase().includes(y.toLowerCase())||a.report_type.toLowerCase().includes(y.toLowerCase()))),"all"!==A&&(b=b.filter(a=>a.report_type===A)),"all"!==C&&(b=b.filter(a=>a.status===C)),v(b)},H=async()=>{try{x(!0);try{let a=await f.api.getAllReports();b(a.reports||[])}catch(a){b([]),console.warn("Endpoint de relatórios não disponível:",a)}}catch(a){k.toast.error("Erro ao carregar relatórios")}finally{x(!1)}},I=async a=>{try{k.toast.info("Funcionalidade de reprocessamento em desenvolvimento")}catch(a){k.toast.error("Erro ao reprocessar relatório")}},J=async a=>{try{k.toast.info("Funcionalidade de download em desenvolvimento")}catch(a){k.toast.error("Erro ao baixar relatório")}},K=a=>({diagnostic:"Diagnóstico",strategic:"Estratégico",advanced:"Análise Avançada",tactical:"Tático",operational:"Operacional",final:"Relatório Final"})[a]||a,L=a=>{switch(a){case"success":return(0,d.jsx)(j.Badge,{variant:"default",children:"Sucesso"});case"pending":return(0,d.jsx)(j.Badge,{variant:"secondary",children:"Pendente"});case"failed":return(0,d.jsx)(j.Badge,{variant:"destructive",children:"Falhou"});default:return(0,d.jsx)(j.Badge,{variant:"outline",children:"Desconhecido"})}};return(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold",children:"Gerenciamento de Relatórios"}),(0,d.jsx)("p",{className:"text-slate-500 mt-1",children:"Histórico, fila e gerenciamento de relatórios gerados"})]})}),(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,d.jsxs)(g.Card,{children:[(0,d.jsx)(g.CardHeader,{className:"pb-2",children:(0,d.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Total"})}),(0,d.jsx)(g.CardContent,{children:(0,d.jsx)("div",{className:"text-2xl font-bold",children:a.length})})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsx)(g.CardHeader,{className:"pb-2",children:(0,d.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Sucesso"})}),(0,d.jsx)(g.CardContent,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.filter(a=>"success"===a.status).length})})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsx)(g.CardHeader,{className:"pb-2",children:(0,d.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Pendentes"})}),(0,d.jsx)(g.CardContent,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:a.filter(a=>"pending"===a.status).length})})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsx)(g.CardHeader,{className:"pb-2",children:(0,d.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Falhas"})}),(0,d.jsx)(g.CardContent,{children:(0,d.jsx)("div",{className:"text-2xl font-bold text-red-600",children:a.filter(a=>"failed"===a.status).length})})]})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsx)(g.CardHeader,{children:(0,d.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(q.Filter,{className:"h-5 w-5"}),"Filtros"]})}),(0,d.jsx)(g.CardContent,{children:(0,d.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,d.jsxs)(s.Label,{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)(p.Search,{className:"h-4 w-4"}),"Buscar"]}),(0,d.jsx)(r.Input,{placeholder:"Clínica ou tipo...",value:y,onChange:a=>z(a.target.value)})]}),(0,d.jsxs)("div",{className:"w-[180px]",children:[(0,d.jsx)(s.Label,{className:"mb-2",children:"Tipo"}),(0,d.jsxs)(t.Select,{value:A,onValueChange:B,children:[(0,d.jsx)(t.SelectTrigger,{children:(0,d.jsx)(t.SelectValue,{})}),(0,d.jsxs)(t.SelectContent,{children:[(0,d.jsx)(t.SelectItem,{value:"all",children:"Todos"}),(0,d.jsx)(t.SelectItem,{value:"diagnostic",children:"Diagnóstico"}),(0,d.jsx)(t.SelectItem,{value:"strategic",children:"Estratégico"}),(0,d.jsx)(t.SelectItem,{value:"advanced",children:"Análise Avançada"}),(0,d.jsx)(t.SelectItem,{value:"tactical",children:"Tático"}),(0,d.jsx)(t.SelectItem,{value:"operational",children:"Operacional"}),(0,d.jsx)(t.SelectItem,{value:"final",children:"Relatório Final"})]})]})]}),(0,d.jsxs)("div",{className:"w-[150px]",children:[(0,d.jsx)(s.Label,{className:"mb-2",children:"Status"}),(0,d.jsxs)(t.Select,{value:C,onValueChange:D,children:[(0,d.jsx)(t.SelectTrigger,{children:(0,d.jsx)(t.SelectValue,{})}),(0,d.jsxs)(t.SelectContent,{children:[(0,d.jsx)(t.SelectItem,{value:"all",children:"Todos"}),(0,d.jsx)(t.SelectItem,{value:"success",children:"Sucesso"}),(0,d.jsx)(t.SelectItem,{value:"pending",children:"Pendente"}),(0,d.jsx)(t.SelectItem,{value:"failed",children:"Falhou"})]})]})]})]})})]}),(0,d.jsxs)(g.Card,{children:[(0,d.jsxs)(g.CardHeader,{children:[(0,d.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(l.FileText,{className:"h-5 w-5"}),"Relatórios (",c.length,")"]}),(0,d.jsx)(g.CardDescription,{children:"Histórico de todos os relatórios gerados"})]}),(0,d.jsx)(g.CardContent,{children:w?(0,d.jsx)("div",{className:"text-center py-8",children:"Carregando..."}):0===c.length?(0,d.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Nenhum relatório encontrado"}):(0,d.jsxs)(i.Table,{children:[(0,d.jsx)(i.TableHeader,{children:(0,d.jsxs)(i.TableRow,{children:[(0,d.jsx)(i.TableHead,{children:"Clínica"}),(0,d.jsx)(i.TableHead,{children:"Tipo"}),(0,d.jsx)(i.TableHead,{children:"Data de Geração"}),(0,d.jsx)(i.TableHead,{children:"Status"}),(0,d.jsx)(i.TableHead,{className:"text-right",children:"Ações"})]})}),(0,d.jsx)(i.TableBody,{children:c.map(a=>(0,d.jsxs)(i.TableRow,{children:[(0,d.jsx)(i.TableCell,{className:"font-medium",children:a.clinic_name||a.clinic_id}),(0,d.jsx)(i.TableCell,{children:K(a.report_type)}),(0,d.jsx)(i.TableCell,{children:new Date(a.generated_at).toLocaleString("pt-BR")}),(0,d.jsx)(i.TableCell,{children:L(a.status)}),(0,d.jsx)(i.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>F(a),title:"Ver Detalhes",children:(0,d.jsx)(o.Eye,{className:"h-4 w-4"})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>J(a.id),title:"Download",children:(0,d.jsx)(n.Download,{className:"h-4 w-4"})}),"failed"===a.status&&(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>I(a.id),title:"Reprocessar",children:(0,d.jsx)(m.RefreshCw,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),(0,d.jsx)(u.Dialog,{open:!!E,onOpenChange:()=>F(null),children:(0,d.jsxs)(u.DialogContent,{className:"max-w-2xl",children:[(0,d.jsxs)(u.DialogHeader,{children:[(0,d.jsx)(u.DialogTitle,{children:"Detalhes do Relatório"}),(0,d.jsx)(u.DialogDescription,{children:"Informações completas do relatório"})]}),E&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Label,{className:"text-sm text-slate-500",children:"ID"}),(0,d.jsx)("p",{className:"font-mono text-sm",children:E.id})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Label,{className:"text-sm text-slate-500",children:"Tipo"}),(0,d.jsx)("p",{children:K(E.report_type)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Label,{className:"text-sm text-slate-500",children:"Clínica"}),(0,d.jsx)("p",{children:E.clinic_name||E.clinic_id})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Label,{className:"text-sm text-slate-500",children:"Data"}),(0,d.jsx)("p",{children:new Date(E.generated_at).toLocaleString("pt-BR")})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Label,{className:"text-sm text-slate-500",children:"Status"}),(0,d.jsx)("div",{children:L(E.status)})]})]}),E.error&&(0,d.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,d.jsx)(s.Label,{className:"text-sm text-red-700 font-semibold",children:"Erro:"}),(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.error})]}),(0,d.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,d.jsxs)(h.Button,{variant:"outline",onClick:()=>J(E.id),children:[(0,d.jsx)(n.Download,{className:"mr-2 h-4 w-4"}),"Download"]}),"failed"===E.status&&(0,d.jsxs)(h.Button,{onClick:()=>I(E.id),children:[(0,d.jsx)(m.RefreshCw,{className:"mr-2 h-4 w-4"}),"Reprocessar"]})]})]})]})})]})}[g,h,i,j,k,r,s,t,u]=v.then?(await v)():v,a.s(["default",()=>w]),c()}catch(a){c(a)}},!1),77797,a=>a.a(async(b,c)=>{try{var d=a.i(66992),e=b([d]);[d]=e.then?(await e)():e;let f=d.default;a.s(["default",0,f]),c()}catch(a){c(a)}},!1),74306,a=>a.a(async(b,c)=>{try{var d=a.i(69757),e=a.i(88230),f=a.i(42784),g=a.i(39119),h=a.i(36509),i=a.i(77797),j=a.i(25599),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/relatorios",pathname:"/admin/relatorios",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/relatorios",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Planeamento%20dental_planeamento-dental_41630c39._.js.map