module.exports=[14163,a=>a.a(async(b,c)=>{try{var d=a.i(27669),e=a.i(48761),f=a.i(96646),g=b([f]);function h(a,b){let[c,g]=(0,d.useState)(null),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(0),n=async()=>{if(a){i(!0),k(null);try{let c=await (0,e.getSectionData)(a,b);g(c);let d=await (0,e.calculateSectionCompletion)(a,b);m(d)}catch(b){let a=b instanceof Error?b:Error("Erro ao carregar dados da seção");k(a),console.error("Erro ao carregar dados da seção:",b),f.toast.error("Erro ao carregar dados da seção")}finally{i(!1)}}};return(0,d.useEffect)(()=>{a?n():i(!1)},[a,b]),{sectionData:c,loading:h,error:j,completionPercent:l,refetch:n}}[f]=g.then?(await g)():g,a.s(["useSectionData",()=>h]),c()}catch(a){c(a)}},!1),92911,a=>a.a(async(b,c)=>{try{var d=a.i(27669),e=a.i(91917),f=a.i(96646),g=b([f]);function h(a,b){let[c,g]=(0,d.useState)(null),[h,i]=(0,d.useState)(!1),[j,k]=(0,d.useState)(!1),l=(0,d.useRef)(!1),m=async()=>{if(a){i(!0);try{let c=await e.api.getSectionReport(a,b);g(c),l.current=!0}catch(a){a.message?.includes("404")||a.message?.includes("500")||a.message?.includes("não gerado")||a.message?.includes("não encontrado")||a.message?.includes("Internal Server Error")?(g(null),l.current=!0):console.error("Erro ao carregar relatório:",a)}finally{i(!1)}}};(0,d.useEffect)(()=>{l.current=!1,a&&m()},[a,b]);let n=async()=>{if(a){k(!0);try{let c=await e.api.generateSectionReport(a,b);g(c),l.current=!0,f.toast.success("Relatório gerado com sucesso!")}catch(d){console.error("Erro ao gerar relatório:",d);let c="Erro ao gerar relatório";d.message?c=d.message:d.response?.data?.message?c=d.response.data.message:"string"==typeof d&&(c=d);try{let c=await e.api.getSectionReport(a,b);c?.status==="error"&&g(c)}catch{}f.toast.error(c)}finally{k(!1)}}};return{report:c,loadingReport:h,generatingReport:j,handleGenerateReport:n,refetchReport:m}}[f]=g.then?(await g)():g,a.s(["useSectionReport",()=>h]),c()}catch(a){c(a)}},!1),10851,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(50192),f=b([e]);function g({content:a,className:b=""}){return(0,d.jsx)("div",{className:`prose prose-slate dark:prose-invert max-w-none ${b}`,children:(0,d.jsx)(e.default,{components:{h1:({node:a,...b})=>(0,d.jsx)("h1",{className:"text-3xl font-bold mt-6 mb-4 text-slate-900 dark:text-slate-100",...b}),h2:({node:a,...b})=>(0,d.jsx)("h2",{className:"text-2xl font-semibold mt-5 mb-3 text-slate-800 dark:text-slate-200",...b}),h3:({node:a,...b})=>(0,d.jsx)("h3",{className:"text-xl font-semibold mt-4 mb-2 text-slate-700 dark:text-slate-300",...b}),p:({node:a,...b})=>(0,d.jsx)("p",{className:"mb-4 text-slate-700 dark:text-slate-300 leading-relaxed",...b}),ul:({node:a,...b})=>(0,d.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2 text-slate-700 dark:text-slate-300",...b}),ol:({node:a,...b})=>(0,d.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-slate-700 dark:text-slate-300",...b}),li:({node:a,...b})=>(0,d.jsx)("li",{className:"ml-4 text-slate-700 dark:text-slate-300",...b}),blockquote:({node:a,...b})=>(0,d.jsx)("blockquote",{className:"border-l-4 border-teal-500 pl-4 italic my-4 text-slate-600 dark:text-slate-400",...b}),code:({node:a,inline:b,...c})=>b?(0,d.jsx)("code",{className:"bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-sm font-mono text-slate-900 dark:text-slate-100",...c}):(0,d.jsx)("code",{className:"block bg-slate-100 dark:bg-slate-800 p-4 rounded-lg overflow-x-auto text-sm font-mono text-slate-900 dark:text-slate-100",...c}),strong:({node:a,...b})=>(0,d.jsx)("strong",{className:"font-bold text-slate-900 dark:text-slate-100",...b}),em:({node:a,...b})=>(0,d.jsx)("em",{className:"italic text-slate-800 dark:text-slate-200",...b}),a:({node:a,...b})=>(0,d.jsx)("a",{className:"text-teal-600 dark:text-teal-400 hover:underline",target:"_blank",rel:"noopener noreferrer",...b})},children:a})})}[e]=f.then?(await f)():f,a.s(["default",()=>g]),c()}catch(a){c(a)}},!1),3442,(a,b,c)=>{b.exports=a.x("html2canvas-aa9b247221930be4",()=>require("html2canvas-aa9b247221930be4"))},3134,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(28647),f=a.i(71946),g=a.i(56983),h=a.i(83423),i=a.i(11519),j=a.i(16537),k=a.i(59518),l=a.i(38681),m=a.i(10851),n=a.i(27669),o=a.i(94735),p=a.i(3442),q=a.i(96646),r=b([e,f,g,m,q]);function s({report:a,loading:b,generating:c,onGenerate:r,sectionCode:s,sectionTitle:t}){let[u,v]=(0,n.useState)(!1),w=async()=>{if(!a||!a.report_markdown)return void q.toast.error("Nenhum relatório para exportar");v(!0),q.toast.info("Preparando PDF...");try{let a=document.getElementById(`report-content-${s}`);if(!a)throw Error("Conteúdo do relatório não encontrado");a.classList.add("pdf-export-mode");let b=await (0,p.default)(a,{scale:1.5,logging:!1,useCORS:!0,backgroundColor:"#ffffff"});a.classList.remove("pdf-export-mode");let c=b.toDataURL("image/jpeg",.85),d=new o.default({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),e=210*b.height/b.width,f=e,g=0;for(d.addImage(c,"JPEG",0,g,210,e,void 0,"FAST"),f-=297;f>0;)g=f-e,d.addPage(),d.addImage(c,"JPEG",0,g,210,e,void 0,"FAST"),f-=297;let h=`relatorio-${s.toLowerCase()}-${new Date().toISOString().split("T")[0]}.pdf`;d.save(h),q.toast.success("PDF exportado com sucesso!")}catch(b){console.error("Erro ao exportar PDF:",b),q.toast.error("Erro ao exportar PDF");let a=document.getElementById(`report-content-${s}`);a&&a.classList.remove("pdf-export-mode")}finally{v(!1)}};return(0,d.jsxs)(e.Card,{children:[(0,d.jsx)(e.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(h.FileText,{className:"size-5"}),t||"Relatório desta Seção"]}),(0,d.jsx)(e.CardDescription,{children:"Relatório gerado por IA com análise e insights sobre esta seção"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[a&&(0,d.jsx)(f.Button,{onClick:w,disabled:u,variant:"outline",size:"default",children:u?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Loader2,{className:"mr-2 size-4 animate-spin"}),"Exportando..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Download,{className:"mr-2 size-4"}),"Exportar PDF"]})}),(0,d.jsx)(f.Button,{onClick:r,disabled:c,variant:a?"outline":"default",children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.Loader2,{className:"mr-2 size-4 animate-spin"}),"Gerando..."]}):a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.RefreshCw,{className:"mr-2 size-4"}),"Regenerar"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.FileText,{className:"mr-2 size-4"}),"Gerar Relatório"]})})]})]})}),(0,d.jsx)(e.CardContent,{children:b?(0,d.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,d.jsx)(j.Loader2,{className:"size-6 animate-spin text-teal-600"})}):a?(0,d.jsxs)("div",{id:`report-content-${s}`,className:"space-y-6",children:["error"===a.status&&(0,d.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,d.jsx)(k.AlertCircle,{className:"size-5 text-red-600 dark:text-red-400"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Erro ao gerar relatório"}),a.error_message&&(0,d.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:a.error_message}),(0,d.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Tente regenerar o relatório."})]})]}),"stale"===a.status&&(0,d.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,d.jsx)(k.AlertCircle,{className:"size-5 text-amber-600 dark:text-amber-400"}),(0,d.jsx)("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"Este relatório está desatualizado. Os dados da seção foram alterados desde a última geração."})]}),a.report_markdown&&(0,d.jsx)("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:(0,d.jsx)(m.default,{content:a.report_markdown})}),a.insights&&(0,d.jsxs)("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-800 space-y-6",children:[a.insights.identity_summary&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Resumo da Identidade"}),(0,d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[a.insights.identity_summary.purpose&&(0,d.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Propósito"}),(0,d.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.insights.identity_summary.purpose})]}),a.insights.identity_summary.vision&&(0,d.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-1",children:"Visão"}),(0,d.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.insights.identity_summary.vision})]}),a.insights.identity_summary.priority_audience&&(0,d.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-green-600 dark:text-green-400 mb-1",children:"Público Prioritário"}),(0,d.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.insights.identity_summary.priority_audience})]}),a.insights.identity_summary.positioning&&(0,d.jsxs)("div",{className:"p-4 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-teal-600 dark:text-teal-400 mb-1",children:"Posicionamento"}),(0,d.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.insights.identity_summary.positioning})]})]}),a.insights.identity_summary.values&&a.insights.identity_summary.values.length>0&&(0,d.jsxs)("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,d.jsx)("p",{className:"text-xs font-semibold text-amber-600 dark:text-amber-400 mb-2",children:"Valores"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:a.insights.identity_summary.values.map((a,b)=>(0,d.jsx)(g.Badge,{variant:"outline",className:"bg-white dark:bg-slate-800",children:a},b))})]})]}),a.insights.alerts&&a.insights.alerts.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Alertas"}),a.insights.alerts.map((a,b)=>(0,d.jsxs)("div",{className:`p-3 rounded-lg border ${"high"===a.severity?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"medium"===a.severity?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:a.title}),(0,d.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:a.detail})]},b))]}),a.insights.recommendations&&a.insights.recommendations.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Recomendações"}),a.insights.recommendations.sort((a,b)=>(b.priority||0)-(a.priority||0)).map((a,b)=>(0,d.jsxs)("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:a.title}),(0,d.jsxs)(g.Badge,{variant:"outline",className:"text-xs",children:["Prioridade ",a.priority||0]})]}),(0,d.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:a.detail})]},b))]}),a.insights.checklist&&a.insights.checklist.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Checklist de Melhoria"}),(0,d.jsx)("div",{className:"space-y-2",children:a.insights.checklist.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[(0,d.jsx)("input",{type:"checkbox",className:"mt-1"}),(0,d.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 flex-1",children:a})]},b))})]}),a.insights.missing_data&&a.insights.missing_data.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Dados Faltantes"}),a.insights.missing_data.map((a,b)=>(0,d.jsxs)("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:a.item}),(0,d.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:a.why_it_matters}),a.how_to_fill&&(0,d.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 italic",children:["Como preencher: ",a.how_to_fill]})]},b))]})]})]}):(0,d.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,d.jsx)(h.FileText,{className:"size-12 mx-auto mb-3 opacity-50"}),(0,d.jsx)("p",{children:"Nenhum relatório gerado ainda."}),(0,d.jsx)("p",{className:"text-sm mt-1",children:'Clique em "Gerar Relatório" para criar um relatório com análise e insights.'})]})})]})}[e,f,g,m,q]=r.then?(await r)():r,a.s(["default",()=>s]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__3e7e375b._.js.map