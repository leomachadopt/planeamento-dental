module.exports=[44357,a=>{"use strict";let b=(0,a.i(48948).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],44357)},1473,a=>{"use strict";let b=(0,a.i(48948).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);a.s(["ArrowUp",()=>b],1473)},66307,a=>{"use strict";let b=(0,a.i(48948).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);a.s(["ArrowDown",()=>b],66307)},18426,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(23526),g=a.i(51444),h=a.i(83758),i=a.i(81952),j=a.i(64431),k=a.i(80687),l=a.i(83423),m=a.i(44357),n=a.i(91292),o=a.i(1473),p=a.i(66307),q=a.i(71946),r=a.i(28647),s=a.i(43776),t=a.i(8710),u=a.i(45398),v=a.i(22049),w=a.i(49721),x=a.i(34159),y=a.i(96646),z=a.i(6302),A=b([q,r,s,t,u,v,w,x,y,z]);async function B(a,b={}){let c={"Content-Type":"application/json",...b.headers},d=await fetch(`/api${a}`,{...b,headers:c});if(!d.ok){if(401===d.status||403===d.status)throw Error("NÃ£o autorizado");try{let a=await d.json();console.log("âŒ Erro da API:",a);let b=Error(a.error||a.message||`Erro: ${d.status}`);throw a.existingId&&(b.existingId=a.existingId),a.existingText&&(b.existingText=a.existingText),b}catch(a){if(a instanceof Error&&a.message!==`Erro: ${d.status}`)throw a;throw Error(`Erro: ${d.status}`)}}return d.json()}function C(){let{sectionCode:a}=(0,f.useRouter)().query,[b,c]=(0,e.useState)([]),[h,i]=(0,e.useState)(""),[j,k]=(0,e.useState)("all"),[l,m]=(0,e.useState)([]),[o,p]=(0,e.useState)(null),[s,v]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),[C,F]=(0,e.useState)(""),[G,H]=(0,e.useState)(!1);(0,e.useEffect)(()=>{I()},[]),(0,e.useEffect)(()=>{a&&"string"==typeof a&&i(a)},[a]),(0,e.useEffect)(()=>{h&&(j&&"all"!==j?J(h,j):J(h))},[h,j]);let I=async()=>{try{let a=await B("/admin/sections");c(a),a.length>0&&!h&&i(a[0].code)}catch(a){y.toast.error(a.message||"Erro ao carregar seÃ§Ãµes")}},J=async(a,b)=>{v(!0);try{let c=`/admin/questions?sectionCode=${a}`;b&&(c+=`&questionSetId=${b}`);let d=await B(c);m(d)}catch(a){y.toast.error(a.message||"Erro ao carregar perguntas")}finally{v(!1)}},K=async a=>{console.log("ðŸ’¾ Salvando pergunta:",{id:a.id,code:a.code,question_set_id:a.question_set_id,isEdit:!!a.id});try{let b=a.validation_schema;if(b&&"object"==typeof b){let a=Object.fromEntries(Object.entries(b).filter(([a,b])=>null!=b&&""!==b));b=Object.keys(a).length>0?a:void 0}let c=a.order_index;a.id||(c=l.length);let d={...a,order_index:c,validation_schema:b};if(console.log("ðŸ“¤ Dados a enviar:",d),a.id)await B(`/admin/questions/${a.id}`,{method:"PUT",body:JSON.stringify(d)}),y.toast.success("Pergunta atualizada!");else try{await B("/admin/questions",{method:"POST",body:JSON.stringify(d)}),y.toast.success("Pergunta criada!")}catch(a){if(console.log("ðŸ” Erro ao criar:",a),console.log("ðŸ” existingId:",a.existingId),console.log("ðŸ” existingText:",a.existingText),a.message?.includes("JÃ¡ existe uma pergunta")||a.message?.includes("duplicate")){let b=a.existingId,c=a.existingText;b?y.toast.error(`J\xe1 existe uma pergunta com o c\xf3digo "${d.code}" neste question set.`+(c?`

Pergunta existente: "${c}"`:""),{duration:7e3,action:{label:"Editar existente",onClick:()=>{if(p(b),h){let a=j&&"all"!==j?j:void 0;J(h,a)}}}}):y.toast.error("JÃ¡ existe uma pergunta com este cÃ³digo neste question set. Edite a pergunta existente ou altere o cÃ³digo.");return}throw a}if(p(null),h){let a=j&&"all"!==j?j:void 0;J(h,a)}}catch(b){let a=b.message||"Erro ao salvar pergunta";a.includes("JÃ¡ existe uma pergunta"),y.toast.error(a)}},L=async a=>{if(confirm("Tem certeza que deseja excluir esta pergunta?"))try{if(await B(`/admin/questions/${a}`,{method:"DELETE"}),y.toast.success("Pergunta excluÃ­da!"),h){let a=j&&"all"!==j?j:void 0;J(h,a)}}catch(a){y.toast.error(a.message||"Erro ao excluir pergunta")}},M=async(a,b)=>{let c=l.findIndex(b=>b.id===a);if(-1===c)return;let d="up"===b?c-1:c+1;if(d<0||d>=l.length)return;let e=[...l],[f]=e.splice(c,1);e.splice(d,0,f),m(e);try{let a=e.map((a,b)=>({id:a.id,order_index:b}));await B("/admin/questions/reorder",{method:"POST",body:JSON.stringify({updates:a})}),y.toast.success("Ordem atualizada!")}catch(a){if(y.toast.error(a.message||"Erro ao reordenar perguntas"),h){let a=j&&"all"!==j?j:void 0;J(h,a)}}},N=async()=>{if(!C.trim())return void y.toast.error("Por favor, cole o JSON do bloco");try{H(!0);let a=JSON.parse(C);if(!a.block)return void y.toast.error('JSON invÃ¡lido: esperado formato { "block": { ... } }');console.log("ðŸ“¦ Enviando importaÃ§Ã£o em lote:",a);let b=await B("/admin/questions/bulk-import",{method:"POST",body:JSON.stringify(a)});if(console.log("âœ… Resultado da importaÃ§Ã£o:",b),y.toast.success(`Importa\xe7\xe3o conclu\xedda! ${b.summary.imported} pergunta(s) importada(s), ${b.summary.skipped} ignorada(s), ${b.summary.errors} erro(s)`),A(!1),F(""),h){let a=j&&"all"!==j?j:void 0;J(h,a)}}catch(a){console.error("âŒ Erro na importaÃ§Ã£o:",a),y.toast.error("Erro ao importar: "+a.message)}finally{H(!1)}},O=b.find(a=>a.code===h),P=O?.questionSets||[];return(0,d.jsxs)("div",{className:"space-y-6 p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold",children:"Gerenciar Perguntas"}),(0,d.jsx)("p",{className:"text-slate-500 mt-1",children:"Adicione, edite e personalize perguntas e seus contextos"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(q.Button,{variant:"outline",onClick:()=>A(!0),children:[(0,d.jsx)(n.Upload,{className:"mr-2 size-4"}),"Importar Bloco (JSON)"]}),(0,d.jsxs)(q.Button,{onClick:()=>p("new"),disabled:!j||"all"===j,children:[(0,d.jsx)(g.Plus,{className:"mr-2 size-4"}),"Nova Pergunta"]})]})]}),(0,d.jsxs)(r.Card,{children:[(0,d.jsx)(r.CardHeader,{children:(0,d.jsx)(r.CardTitle,{children:"Filtros"})}),(0,d.jsx)(r.CardContent,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"SeÃ§Ã£o"}),(0,d.jsxs)(w.Select,{value:h,onValueChange:i,children:[(0,d.jsx)(w.SelectTrigger,{children:(0,d.jsx)(w.SelectValue,{placeholder:"Selecione uma seÃ§Ã£o"})}),(0,d.jsx)(w.SelectContent,{children:b.map(a=>(0,d.jsxs)(w.SelectItem,{value:a.code,children:[a.name," (",a.code,")"]},a.id))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"Question Set (SubseÃ§Ã£o)"}),(0,d.jsxs)(w.Select,{value:j,onValueChange:k,children:[(0,d.jsx)(w.SelectTrigger,{children:(0,d.jsx)(w.SelectValue,{placeholder:"Todas as subseÃ§Ãµes"})}),(0,d.jsxs)(w.SelectContent,{children:[(0,d.jsx)(w.SelectItem,{value:"all",children:"Todas as subseÃ§Ãµes"}),P.map(a=>(0,d.jsxs)(w.SelectItem,{value:a.id,children:[a.name,a.subsection_name&&` - ${a.subsection_name}`]},a.id))]})]})]})]})})]}),s?(0,d.jsx)(r.Card,{children:(0,d.jsx)(r.CardContent,{className:"pt-6",children:(0,d.jsx)("div",{className:"text-center text-slate-500",children:"Carregando..."})})}):0===l.length?(0,d.jsx)(r.Card,{children:(0,d.jsx)(r.CardContent,{className:"pt-6",children:(0,d.jsx)("div",{className:"text-center text-slate-500",children:h?'Nenhuma pergunta encontrada. Clique em "Nova Pergunta" para criar.':"Selecione uma seÃ§Ã£o para ver as perguntas."})})}):(0,d.jsx)("div",{className:"space-y-4",children:l.map((a,b)=>(0,d.jsx)(D,{question:a,questionIndex:b,totalQuestions:l.length,isEditing:o===a.id,onEdit:()=>p(a.id||null),onSave:K,onDelete:L,onCancel:()=>p(null),onMoveUp:()=>a.id&&M(a.id,"up"),onMoveDown:()=>a.id&&M(a.id,"down")},a.id))}),"new"===o&&j&&"all"!==j&&(0,d.jsx)(E,{question:null,questionSetId:j,sectionCode:h,onSave:K,onCancel:()=>p(null)}),(0,d.jsx)(x.Dialog,{open:z,onOpenChange:A,children:(0,d.jsxs)(x.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,d.jsxs)(x.DialogHeader,{children:[(0,d.jsx)(x.DialogTitle,{children:"Importar Bloco de Perguntas via JSON"}),(0,d.jsx)(x.DialogDescription,{children:"Cole o JSON completo do bloco com todas as perguntas. O sistema criarÃ¡ automaticamente o question_set e todas as perguntas com seus contextos."})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"JSON do Bloco"}),(0,d.jsx)(t.Textarea,{value:C,onChange:a=>F(a.target.value),placeholder:'{ "block": { "code": "OFFER_VALUE_PROPOSITION", "name": "Bloco 4 ...", "questions": [...] } }',className:"min-h-[400px] font-mono text-sm"})]}),(0,d.jsxs)("div",{className:"text-sm text-slate-500 space-y-2",children:[(0,d.jsx)("p",{className:"font-semibold",children:"Formato esperado:"}),(0,d.jsx)("pre",{className:"bg-slate-100 p-3 rounded text-xs overflow-x-auto",children:`{
  "block": {
    "code": "OFFER_VALUE_PROPOSITION",
    "name": "Bloco 4 â€” Oferta & Proposta de Valor",
    "description": "Define o que \xe9 vendido...",
    "questions": [
      {
        "code": "OFFER_CORE_PROBLEM",
        "text": "Qual \xe9 o principal problema...",
        "help_text": "Descreva o problema...",
        "type": "textarea",
        "required": true,
        "ai_importance_weight": 1.0,
        "validation_schema": {
          "min_length": 200,
          "max_length": 900
        },
        "options": [],
        "context": {
          "why": "Toda oferta forte...",
          "consequences": ["...", "..."],
          "how_to_answer": "Descreva...",
          "good_examples": ["..."],
          "bad_examples": ["..."],
          "show_why": true,
          "show_consequences": true,
          "show_how_to_answer": true,
          "show_good_examples": true,
          "show_bad_examples": true
        }
      },
      ...
    ]
  }
}`}),(0,d.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mt-2",children:[(0,d.jsx)("p",{className:"font-semibold text-blue-900",children:"â„¹ï¸ Como funciona:"}),(0,d.jsxs)("ul",{className:"list-disc list-inside text-blue-800 space-y-1 mt-1",children:[(0,d.jsx)("li",{children:'O cÃ³digo da seÃ§Ã£o Ã© extraÃ­do automaticamente (ex: "OFFER" de "OFFER_VALUE_PROPOSITION")'}),(0,d.jsx)("li",{children:"Se o question_set jÃ¡ existir, as perguntas serÃ£o adicionadas a ele"}),(0,d.jsx)("li",{children:"Perguntas duplicadas (mesmo cÃ³digo) serÃ£o ignoradas"}),(0,d.jsx)("li",{children:"Os contextos sÃ£o criados automaticamente se a tabela existir"})]})]})]})]}),(0,d.jsxs)(x.DialogFooter,{children:[(0,d.jsx)(q.Button,{variant:"outline",onClick:()=>A(!1),disabled:G,children:"Cancelar"}),(0,d.jsx)(q.Button,{onClick:N,disabled:!C.trim()||G,children:G?"Importando...":"Importar"})]})]})})]})}function D({question:a,questionIndex:b,totalQuestions:c,isEditing:e,onEdit:f,onSave:g,onDelete:j,onCancel:k,onMoveUp:m,onMoveDown:n}){return e?(0,d.jsx)(E,{question:a,questionSetId:a.question_set_id,sectionCode:a.section_code,onSave:g,onCancel:k}):(0,d.jsxs)(r.Card,{children:[(0,d.jsx)(r.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1 pt-1",children:[(0,d.jsx)(q.Button,{variant:"ghost",size:"sm",onClick:m,disabled:0===b,className:"h-6 w-6 p-0",title:"Mover para cima",children:(0,d.jsx)(o.ArrowUp,{className:"size-3"})}),(0,d.jsx)(q.Button,{variant:"ghost",size:"sm",onClick:n,disabled:b===c-1,className:"h-6 w-6 p-0",title:"Mover para baixo",children:(0,d.jsx)(p.ArrowDown,{className:"size-3"})})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(r.CardTitle,{className:"text-lg",children:a.text}),(0,d.jsxs)(r.CardDescription,{children:["#",b+1," â€¢ ",a.code," â€¢ ",a.type,a.required&&" â€¢ ObrigatÃ³ria"]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:f,children:(0,d.jsx)(h.Edit,{className:"size-4"})}),(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>a.id&&j(a.id),children:(0,d.jsx)(i.Trash2,{className:"size-4"})})]})]})}),a.context&&(0,d.jsx)(r.CardContent,{children:(0,d.jsxs)("div",{className:"text-sm text-slate-600",children:[(0,d.jsx)(l.FileText,{className:"inline size-4 mr-1"}),"Contexto configurado"]})})]})}function E({question:a,questionSetId:b,sectionCode:c,onSave:f,onCancel:h}){let[i,l]=(0,e.useState)({id:a?.id,question_set_id:a?.question_set_id||b||"",code:a?.code||"",text:a?.text||"",help_text:a?.help_text||"",type:a?.type||"textarea",required:a?.required||!1,order_index:a?.order_index||0,ai_importance_weight:a?.ai_importance_weight||.5,validation_schema:a?.validation_schema||{},options:a?.options||[],context:a?.context||{show_why:!0,show_consequences:!0,show_how_to_answer:!0,show_good_examples:!0,show_bad_examples:!0}}),[o,p]=(0,e.useState)({label:"",value:""}),[A,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(""),F=(a,b)=>{if(!b.trim())return;let c=i.context||{},d=c[a]||[];l({...i,context:{...c,[a]:[...d,b.trim()]}})},G=(a,b)=>{let c=i.context||{},d=c[a]||[];l({...i,context:{...c,[a]:d.filter((a,c)=>c!==b)}})},H=async()=>{try{let a=JSON.parse(D);if(!a.code||!a.text||!a.type)return void y.toast.error("JSON invÃ¡lido: faltam campos obrigatÃ³rios (code, text, type)");let b=i.question_set_id;try{let d=(await B(`/admin/questions?sectionCode=${c}&questionSetId=${b}`)).find(c=>c.code===a.code&&c.question_set_id===b);if(d){l({id:d.id,question_set_id:b,code:a.code,text:a.text,help_text:a.help_text||"",type:a.type,required:a.required||!1,order_index:d.order_index,ai_importance_weight:a.ai_importance_weight||.5,validation_schema:a.validation_schema||{},options:a.options||[],context:a.context||{show_why:!0,show_consequences:!0,show_how_to_answer:!0,show_good_examples:!0,show_bad_examples:!0}}),C(!1),E(""),y.toast.success("Pergunta existente detectada. Os dados do JSON foram carregados. Ao salvar, a pergunta serÃ¡ atualizada.");return}}catch(a){console.warn("Erro ao verificar pergunta existente:",a)}l({question_set_id:b,code:a.code,text:a.text,help_text:a.help_text||"",type:a.type,required:a.required||!1,order_index:0,ai_importance_weight:a.ai_importance_weight||.5,validation_schema:a.validation_schema||{},options:a.options||[],context:a.context||{show_why:!0,show_consequences:!0,show_how_to_answer:!0,show_good_examples:!0,show_bad_examples:!0}}),C(!1),E(""),y.toast.success("JSON carregado com sucesso! Nova pergunta serÃ¡ criada.")}catch(a){y.toast.error("Erro ao parsear JSON: "+a.message)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Card,{className:"border-2 border-teal-200",children:[(0,d.jsx)(r.CardHeader,{children:(0,d.jsx)(r.CardTitle,{children:a?"Editar Pergunta":"Nova Pergunta"})}),(0,d.jsxs)(r.CardContent,{className:"space-y-6",children:[(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"CÃ³digo da Pergunta *"}),(0,d.jsx)(s.Input,{value:i.code,onChange:a=>l({...i,code:a.target.value}),placeholder:"IDENTITY_REASON"}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Identificador Ãºnico da pergunta (ex: IDENTITY_REASON)"})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"Texto da Pergunta *"}),(0,d.jsx)(t.Textarea,{value:i.text,onChange:a=>l({...i,text:a.target.value}),placeholder:"Qual Ã© a razÃ£o de existir da sua clÃ­nica?",className:"min-h-[80px]"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"Texto de Ajuda"}),(0,d.jsx)(t.Textarea,{value:i.help_text||"",onChange:a=>l({...i,help_text:a.target.value}),placeholder:"Texto auxiliar que aparece abaixo da pergunta",className:"min-h-[60px]"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"Tipo de Resposta *"}),(0,d.jsxs)(w.Select,{value:i.type,onValueChange:a=>{l({...i,type:a,options:"single_select"===a||"multi_select"===a?i.options:[]})},children:[(0,d.jsx)(w.SelectTrigger,{children:(0,d.jsx)(w.SelectValue,{})}),(0,d.jsxs)(w.SelectContent,{children:[(0,d.jsx)(w.SelectItem,{value:"textarea",children:"Texto Longo"}),(0,d.jsx)(w.SelectItem,{value:"text",children:"Texto Curto"}),(0,d.jsx)(w.SelectItem,{value:"single_select",children:"SeleÃ§Ã£o Ãšnica"}),(0,d.jsx)(w.SelectItem,{value:"multi_select",children:"SeleÃ§Ã£o MÃºltipla"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"Peso para IA"}),(0,d.jsx)(s.Input,{type:"number",step:"0.1",min:"0",max:"1",value:i.ai_importance_weight||.5,onChange:a=>l({...i,ai_importance_weight:parseFloat(a.target.value)||.5})})]}),(0,d.jsx)("div",{className:"flex items-end",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"required",checked:i.required,onCheckedChange:a=>l({...i,required:!0===a})}),(0,d.jsx)(u.Label,{htmlFor:"required",className:"cursor-pointer",children:"ObrigatÃ³ria"})]})})]}),("text"===i.type||"textarea"===i.type)&&(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"MÃ­nimo de Caracteres"}),(0,d.jsx)(s.Input,{type:"number",min:"0",value:i.validation_schema?.min_length||"",onChange:a=>l({...i,validation_schema:{...i.validation_schema,min_length:a.target.value?parseInt(a.target.value):void 0}}),placeholder:"Ex: 10"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"MÃ¡ximo de Caracteres"}),(0,d.jsx)(s.Input,{type:"number",min:"0",value:i.validation_schema?.max_length||"",onChange:a=>l({...i,validation_schema:{...i.validation_schema,max_length:a.target.value?parseInt(a.target.value):void 0}}),placeholder:"Ex: 500"})]})]}),("single_select"===i.type||"multi_select"===i.type)&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(u.Label,{children:"OpÃ§Ãµes de Resposta"}),i.options?.map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,d.jsx)(s.Input,{value:a.label,onChange:a=>{let c=[...i.options||[]];c[b].label=a.target.value,l({...i,options:c})},placeholder:"Label da opÃ§Ã£o",className:"flex-1"}),(0,d.jsx)(s.Input,{value:a.value,onChange:a=>{let c=[...i.options||[]];c[b].value=a.target.value,l({...i,options:c})},placeholder:"Valor",className:"flex-1"}),(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>{let a;return a=i.options||[],void l({...i,options:a.filter((a,c)=>c!==b)})},children:(0,d.jsx)(k.X,{className:"size-4"})})]},b)),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(s.Input,{value:o.label,onChange:a=>p({...o,label:a.target.value}),placeholder:"Nova opÃ§Ã£o - Label",className:"flex-1"}),(0,d.jsx)(s.Input,{value:o.value,onChange:a=>p({...o,value:a.target.value}),placeholder:"Valor",className:"flex-1"}),(0,d.jsx)(q.Button,{onClick:()=>{if(!o.label||!o.value)return;let a=i.options||[];l({...i,options:[...a,{label:o.label,value:o.value,order_index:a.length}]}),p({label:"",value:""})},variant:"outline",children:(0,d.jsx)(g.Plus,{className:"size-4"})})]})]}),(0,d.jsx)(z.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsx)(u.Label,{className:"text-lg font-semibold",children:"Contexto e OrientaÃ§Ãµes"})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"show_why",checked:i.context?.show_why!==!1,onCheckedChange:a=>l({...i,context:{...i.context,show_why:!0===a}})}),(0,d.jsx)(u.Label,{htmlFor:"show_why",className:"font-semibold cursor-pointer",children:"Por que estamos perguntando isso?"})]}),i.context?.show_why!==!1&&(0,d.jsx)(t.Textarea,{value:i.context?.why||"",onChange:a=>l({...i,context:{...i.context,why:a.target.value}}),placeholder:"ExplicaÃ§Ã£o do porquÃª a pergunta Ã© importante...",className:"min-h-[100px]"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"show_consequences",checked:i.context?.show_consequences!==!1,onCheckedChange:a=>l({...i,context:{...i.context,show_consequences:!0===a}})}),(0,d.jsx)(u.Label,{htmlFor:"show_consequences",className:"font-semibold cursor-pointer",children:"O que acontece sem isso?"})]}),i.context?.show_consequences!==!1&&(0,d.jsxs)("div",{className:"space-y-2",children:[(i.context?.consequences||[]).map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(s.Input,{value:a,onChange:a=>{let c=[...i.context?.consequences||[]];c[b]=a.target.value,l({...i,context:{...i.context,consequences:c}})},className:"flex-1"}),(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>G("consequences",b),children:(0,d.jsx)(k.X,{className:"size-4"})})]},b)),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(s.Input,{placeholder:"Nova consequÃªncia",className:"flex-1",onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),F("consequences",a.currentTarget.value),a.currentTarget.value="")}}),(0,d.jsx)(q.Button,{variant:"outline",onClick:()=>{let a=document.querySelector('input[placeholder="Nova consequÃªncia"]');a&&(F("consequences",a.value),a.value="")},children:(0,d.jsx)(g.Plus,{className:"size-4"})})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"show_how_to_answer",checked:i.context?.show_how_to_answer!==!1,onCheckedChange:a=>l({...i,context:{...i.context,show_how_to_answer:!0===a}})}),(0,d.jsx)(u.Label,{htmlFor:"show_how_to_answer",className:"font-semibold cursor-pointer",children:"Como responder bem?"})]}),i.context?.show_how_to_answer!==!1&&(0,d.jsx)(t.Textarea,{value:i.context?.how_to_answer||"",onChange:a=>l({...i,context:{...i.context,how_to_answer:a.target.value}}),placeholder:"OrientaÃ§Ãµes de como responder bem...",className:"min-h-[100px]"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"show_good_examples",checked:i.context?.show_good_examples!==!1,onCheckedChange:a=>l({...i,context:{...i.context,show_good_examples:!0===a}})}),(0,d.jsx)(u.Label,{htmlFor:"show_good_examples",className:"font-semibold cursor-pointer",children:"Exemplos de boas respostas"})]}),i.context?.show_good_examples!==!1&&(0,d.jsxs)("div",{className:"space-y-2",children:[(i.context?.good_examples||[]).map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(t.Textarea,{value:a,onChange:a=>{let c=[...i.context?.good_examples||[]];c[b]=a.target.value,l({...i,context:{...i.context,good_examples:c}})},className:"flex-1 min-h-[60px]"}),(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>G("good_examples",b),children:(0,d.jsx)(k.X,{className:"size-4"})})]},b)),(0,d.jsxs)(q.Button,{variant:"outline",onClick:()=>{let a=i.context?.good_examples||[];l({...i,context:{...i.context,good_examples:[...a,""]}})},children:[(0,d.jsx)(g.Plus,{className:"mr-2 size-4"}),"Adicionar Exemplo"]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.Checkbox,{id:"show_bad_examples",checked:i.context?.show_bad_examples!==!1,onCheckedChange:a=>l({...i,context:{...i.context,show_bad_examples:!0===a}})}),(0,d.jsx)(u.Label,{htmlFor:"show_bad_examples",className:"font-semibold cursor-pointer",children:"Exemplos de respostas ruins"})]}),i.context?.show_bad_examples!==!1&&(0,d.jsxs)("div",{className:"space-y-2",children:[(i.context?.bad_examples||[]).map((a,b)=>(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(t.Textarea,{value:a,onChange:a=>{let c=[...i.context?.bad_examples||[]];c[b]=a.target.value,l({...i,context:{...i.context,bad_examples:c}})},className:"flex-1 min-h-[60px]"}),(0,d.jsx)(q.Button,{variant:"outline",size:"sm",onClick:()=>G("bad_examples",b),children:(0,d.jsx)(k.X,{className:"size-4"})})]},b)),(0,d.jsxs)(q.Button,{variant:"outline",onClick:()=>{let a=i.context?.bad_examples||[];l({...i,context:{...i.context,bad_examples:[...a,""]}})},children:[(0,d.jsx)(g.Plus,{className:"mr-2 size-4"}),"Adicionar Exemplo"]})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-between gap-2 pt-4",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(q.Button,{variant:"outline",onClick:()=>C(!0),children:[(0,d.jsx)(n.Upload,{className:"mr-2 size-4"}),"Carregar .json"]}),(0,d.jsxs)(q.Button,{variant:"outline",onClick:()=>{let a={code:i.code,text:i.text,help_text:i.help_text||"",type:i.type,required:i.required,ai_importance_weight:i.ai_importance_weight||.5,validation_schema:i.validation_schema||{},options:i.options||[],context:i.context||{}},b=JSON.stringify(a,null,2);navigator.clipboard.writeText(b),y.toast.success("JSON copiado para a Ã¡rea de transferÃªncia!")},children:[(0,d.jsx)(m.Copy,{className:"mr-2 size-4"}),"Copiar .json"]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(q.Button,{variant:"outline",onClick:h,children:"Cancelar"}),(0,d.jsxs)(q.Button,{onClick:()=>f(i),disabled:!i.code||!i.text||!i.question_set_id,children:[(0,d.jsx)(j.Save,{className:"mr-2 size-4"}),"Salvar"]})]})]})]})]}),(0,d.jsx)(x.Dialog,{open:A,onOpenChange:C,children:(0,d.jsxs)(x.DialogContent,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,d.jsxs)(x.DialogHeader,{children:[(0,d.jsx)(x.DialogTitle,{children:"Carregar Pergunta via JSON"}),(0,d.jsx)(x.DialogDescription,{children:"Cole o cÃ³digo JSON abaixo para preencher automaticamente todos os campos da pergunta."})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u.Label,{children:"JSON da Pergunta"}),(0,d.jsx)(t.Textarea,{value:D,onChange:a=>E(a.target.value),placeholder:'{"code": "IDENTITY_REASON", "text": "Qual Ã© a razÃ£o de existir da sua clÃ­nica?", ...}',className:"min-h-[300px] font-mono text-sm"})]}),(0,d.jsxs)("div",{className:"text-sm text-slate-500 space-y-1",children:[(0,d.jsx)("p",{className:"font-semibold",children:"Formato esperado (ordem serÃ¡ definida automaticamente):"}),(0,d.jsx)("pre",{className:"bg-slate-100 p-2 rounded text-xs overflow-x-auto",children:`{
  "code": "IDENTITY_REASON",
  "text": "Qual \xe9 a raz\xe3o de existir da sua cl\xednica?",
  "help_text": "Texto auxiliar...",
  "type": "textarea",
  "required": true,
  "ai_importance_weight": 0.8,
  "validation_schema": {
    "min_length": 10,
    "max_length": 500
  },
  "options": [],
  "context": {
    "why": "...",
    "consequences": ["..."],
    "how_to_answer": "...",
    "good_examples": ["..."],
    "bad_examples": ["..."],
    "show_why": true,
    "show_consequences": true,
    "show_how_to_answer": true,
    "show_good_examples": true,
    "show_bad_examples": true
  }
}`})]})]}),(0,d.jsxs)(x.DialogFooter,{children:[(0,d.jsx)(q.Button,{variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),(0,d.jsx)(q.Button,{onClick:H,disabled:!D.trim(),children:"Carregar"})]})]})})]})}[q,r,s,t,u,v,w,x,y,z]=A.then?(await A)():A,a.s(["default",()=>C]),c()}catch(a){c(a)}},!1),79729,a=>a.a(async(b,c)=>{try{var d=a.i(69757),e=a.i(88230),f=a.i(42784),g=a.i(39119),h=a.i(36509),i=a.i(18426),j=a.i(25599),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/perguntas",pathname:"/admin/perguntas",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/perguntas",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Planeamento%20dental_planeamento-dental_3d2a19f8._.js.map