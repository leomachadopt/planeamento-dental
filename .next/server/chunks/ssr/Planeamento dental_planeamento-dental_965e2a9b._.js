module.exports=[53974,a=>{"use strict";let b=(0,a.i(48948).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckSquare",()=>b],53974)},18858,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(28647),g=a.i(71946),h=a.i(84637),i=a.i(34159),j=a.i(43776),k=a.i(8710),l=a.i(45398),m=a.i(51444),n=a.i(83758),o=a.i(81952),p=a.i(53974),q=a.i(91917),r=a.i(48761),s=a.i(96646),t=b([f,g,h,i,j,k,l,s]);function u({dossierId:a,onUpdateCompletion:b}){let[c,j]=(0,e.useState)([]),[k,l]=(0,e.useState)(null),[t,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{w()},[a]);let w=async()=>{try{let b=await q.api.getInitiatives(a);j(b)}catch(a){console.error("Erro ao carregar iniciativas:",a)}},x=async c=>{try{k?(await q.api.updateInitiative(a,k.id,c),s.toast.success("Iniciativa atualizada!")):(await q.api.createInitiative(a,c),s.toast.success("Iniciativa criada!")),u(!1),l(null),await w(),b&&b(),await (0,r.calculateSectionCompletion)(a,"PLAN")}catch(a){s.toast.error(a.message||"Erro ao salvar iniciativa")}},y=async c=>{if(confirm("Tem certeza que deseja excluir esta iniciativa?"))try{await q.api.deleteInitiative(a,c),s.toast.success("Iniciativa excluída!"),await w(),b&&b(),await (0,r.calculateSectionCompletion)(a,"PLAN")}catch(a){s.toast.error(a.message||"Erro ao excluir iniciativa")}};return(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(p.CheckSquare,{className:"size-5"}),"Iniciativas"]}),(0,d.jsx)(f.CardDescription,{children:"Gerencie as iniciativas e projetos do plano estratégico"})]}),(0,d.jsxs)(i.Dialog,{open:t,onOpenChange:a=>{u(a),a||l(null)},children:[(0,d.jsx)(i.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{size:"sm",children:[(0,d.jsx)(m.Plus,{className:"mr-2 size-4"}),"Adicionar"]})}),(0,d.jsx)(i.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,d.jsx)(v,{initiative:k,onSave:x,onCancel:()=>{u(!1),l(null)}})})]})]})}),(0,d.jsx)(f.CardContent,{children:0===c.length?(0,d.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:'Nenhuma iniciativa cadastrada. Clique em "Adicionar" para criar a primeira.'}):(0,d.jsxs)(h.Table,{children:[(0,d.jsx)(h.TableHeader,{children:(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableHead,{children:"Título"}),(0,d.jsx)(h.TableHead,{children:"Status"}),(0,d.jsx)(h.TableHead,{children:"Prioridade"}),(0,d.jsx)(h.TableHead,{children:"Responsável"}),(0,d.jsx)(h.TableHead,{className:"text-right",children:"Ações"})]})}),(0,d.jsx)(h.TableBody,{children:c.map(a=>(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableCell,{className:"font-medium",children:a.title}),(0,d.jsx)(h.TableCell,{children:(0,d.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"active"===a.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"completed"===a.status?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-400"}`,children:"active"===a.status?"Ativa":"completed"===a.status?"Concluída":"Rascunho"})}),(0,d.jsx)(h.TableCell,{children:a.priority?`Prioridade ${a.priority}`:"-"}),(0,d.jsx)(h.TableCell,{children:a.owner||"-"}),(0,d.jsx)(h.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{l(a),u(!0)},children:(0,d.jsx)(n.Edit,{className:"size-4"})}),(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>y(a.id),children:(0,d.jsx)(o.Trash2,{className:"size-4 text-red-500"})})]})})]},a.id))})]})})]})}function v({initiative:a,onSave:b,onCancel:c}){let[f,h]=(0,e.useState)(a?.title||""),[m,n]=(0,e.useState)(a?.description||""),[o,p]=(0,e.useState)(a?.status||"draft"),[q,r]=(0,e.useState)(a?.priority||""),t=(a=>{if(!a)return{start:"",end:""};let b=a.split(" a ");return{start:b[0]?.trim()||"",end:b[1]?.trim()||""}})(a?.timeframe),[u,v]=(0,e.useState)(t.start),[w,x]=(0,e.useState)(t.end),[y,z]=(0,e.useState)(a?.owner||""),[A,B]=(0,e.useState)(a?.notes||"");return(0,d.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!f.trim())return void s.toast.error("Título é obrigatório");let c=u||w?`${u||""}${u&&w?" a ":""}${w||""}`.trim():null;b({title:f.trim(),description:m.trim()||void 0,status:o,priority:q?parseInt(q):void 0,timeframe:c,owner:y.trim()||void 0,notes:A.trim()||void 0})},children:[(0,d.jsxs)(i.DialogHeader,{children:[(0,d.jsx)(i.DialogTitle,{children:a?"Editar Iniciativa":"Nova Iniciativa"}),(0,d.jsx)(i.DialogDescription,{children:"Defina as informações da iniciativa"})]}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-title",children:"Título *"}),(0,d.jsx)(j.Input,{id:"initiative-title",value:f,onChange:a=>h(a.target.value),placeholder:"Ex: Implementar sistema de agendamento online",required:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-description",children:"Descrição"}),(0,d.jsx)(k.Textarea,{id:"initiative-description",value:m,onChange:a=>n(a.target.value),placeholder:"Descreva detalhadamente a iniciativa",className:"min-h-[100px]"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-status",children:"Status"}),(0,d.jsxs)("select",{id:"initiative-status",value:o,onChange:a=>p(a.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,d.jsx)("option",{value:"draft",children:"Rascunho"}),(0,d.jsx)("option",{value:"active",children:"Ativa"}),(0,d.jsx)("option",{value:"completed",children:"Concluída"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-priority",children:"Prioridade (1-5)"}),(0,d.jsx)(j.Input,{id:"initiative-priority",type:"number",min:"1",max:"5",value:q,onChange:a=>r(a.target.value),placeholder:"1 = maior prioridade"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-start",children:"Data de Início"}),(0,d.jsx)(j.Input,{id:"initiative-start",type:"date",value:u,onChange:a=>v(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-end",children:"Data de Término"}),(0,d.jsx)(j.Input,{id:"initiative-end",type:"date",value:w,onChange:a=>x(a.target.value)})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-responsible",children:"Responsável"}),(0,d.jsx)(j.Input,{id:"initiative-responsible",value:y,onChange:a=>z(a.target.value),placeholder:"Ex: Dr. João Silva"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"initiative-notes",children:"Notas"}),(0,d.jsx)(k.Textarea,{id:"initiative-notes",value:A,onChange:a=>B(a.target.value),placeholder:"Observações adicionais",className:"min-h-[80px]"})]})]}),(0,d.jsxs)(i.DialogFooter,{children:[(0,d.jsx)(g.Button,{type:"button",variant:"outline",onClick:c,children:"Cancelar"}),(0,d.jsx)(g.Button,{type:"submit",children:"Salvar"})]})]})}[f,g,h,i,j,k,l,s]=t.then?(await t)():t,a.s(["default",()=>u]),c()}catch(a){c(a)}},!1),32621,a=>{"use strict";let b=(0,a.i(48948).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],32621)},85588,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(23526),f=a.i(27669),g=a.i(14163),h=a.i(92911),i=a.i(3134),j=a.i(18858),k=a.i(28647),l=a.i(6536),m=a.i(71946),n=a.i(16537),o=a.i(59518),p=a.i(32621),q=a.i(51444),r=b([g,h,i,j,k,l,m]);function s({sectionCode:a}){let b=(0,e.useRouter)(),c="string"==typeof b.query.dossierId?b.query.dossierId:void 0,{sectionData:r,loading:s,error:t}=(0,g.useSectionData)(c,a),{report:u,loadingReport:v,generatingReport:w,handleGenerateReport:x}=(0,h.useSectionReport)(c,a),[y,z]=(0,f.useState)([]),[A,B]=(0,f.useState)([]);return c?s?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)(n.Loader2,{className:"size-8 animate-spin text-teal-600"})}):t?(0,d.jsx)(k.Card,{children:(0,d.jsx)(k.CardContent,{className:"pt-6",children:(0,d.jsxs)("div",{className:"text-center text-red-600",children:[(0,d.jsx)("p",{children:"Erro ao carregar dados da seção"}),(0,d.jsx)("p",{className:"text-sm mt-2",children:t.message})]})})}):r?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(k.Card,{children:(0,d.jsx)(k.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg",children:(0,d.jsx)(p.Calendar,{className:"size-6 text-blue-600"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(k.CardTitle,{children:r.section.name}),r.section.description&&(0,d.jsx)(k.CardDescription,{className:"mt-2",children:r.section.description})]})]})})}),(0,d.jsxs)(l.Alert,{children:[(0,d.jsx)(o.AlertCircle,{className:"size-4"}),(0,d.jsxs)(l.AlertDescription,{children:[(0,d.jsx)("strong",{children:"Seção de Planejamento:"})," Traduza a síntese estratégica em um plano executável com OKRs, iniciativas priorizadas, responsáveis e prazos para os próximos 12 meses."]})]}),(0,d.jsxs)(k.Card,{children:[(0,d.jsx)(k.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(k.CardTitle,{className:"text-lg",children:"OKRs (Objectives & Key Results)"}),(0,d.jsx)(k.CardDescription,{children:"Objetivos estratégicos e resultados-chave mensuráveis"})]}),(0,d.jsxs)(m.Button,{size:"sm",variant:"outline",children:[(0,d.jsx)(q.Plus,{className:"size-4 mr-2"}),"Adicionar OKR"]})]})}),(0,d.jsx)(k.CardContent,{children:(0,d.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,d.jsx)("p",{children:"Nenhum OKR cadastrado ainda"}),(0,d.jsx)("p",{className:"text-sm mt-2",children:'Use "Gerar Plano Inicial com IA" abaixo para começar, ou adicione manualmente'})]})})]}),(0,d.jsx)(j.default,{dossierId:c}),(0,d.jsx)(i.default,{report:u,loading:v,generating:w,onGenerate:x,sectionCode:a,sectionTitle:"Plano Inicial (gerado por IA)"})]}):(0,d.jsx)(k.Card,{children:(0,d.jsx)(k.CardContent,{className:"pt-6",children:(0,d.jsx)("div",{className:"text-center text-slate-500",children:(0,d.jsx)("p",{children:"Nenhum dado encontrado para esta seção"})})})}):null}[g,h,i,j,k,l,m]=r.then?(await r)():r,a.s(["default",()=>s]),c()}catch(a){c(a)}},!1),41031,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(85588),f=b([e]);function g(){return(0,d.jsx)(e.default,{sectionCode:"PLAN"})}[e]=f.then?(await f)():f,a.s(["default",()=>g]),c()}catch(a){c(a)}},!1),47064,a=>a.a(async(b,c)=>{try{var d=a.i(69757),e=a.i(88230),f=a.i(42784),g=a.i(39119),h=a.i(36509),i=a.i(41031),j=a.i(25599),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/dossie/[dossierId]/plan",pathname:"/dossie/[dossierId]/plan",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/dossie/[dossierId]/plan",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Planeamento%20dental_planeamento-dental_965e2a9b._.js.map