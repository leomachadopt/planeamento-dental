module.exports=[59518,a=>{"use strict";let b=(0,a.i(48948).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],59518)},28647,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(18574),g=b([f]);[f]=g.then?(await g)():g;let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-250",a),...b}));h.displayName="Card";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));i.displayName="CardHeader";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));j.displayName="CardTitle";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));k.displayName="CardDescription";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));l.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter",a.s(["Card",()=>h,"CardContent",()=>l,"CardDescription",()=>k,"CardHeader",()=>i,"CardTitle",()=>j]),c()}catch(a){c(a)}},!1),61605,a=>{"use strict";let b=(0,a.i(48948).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],61605)},38681,a=>{"use strict";let b=(0,a.i(48948).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);a.s(["Download",()=>b],38681)},11519,a=>{"use strict";let b=(0,a.i(48948).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],11519)},50192,a=>a.a(async(b,c)=>{try{let b=await a.y("react-markdown-0d4b2bbd5abe72b5");a.n(b),c()}catch(a){c(a)}},!0),16035,a=>{"use strict";let b=(0,a.i(48948).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],16035)},6536,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(45024),g=a.i(18574),h=b([f,g]);[f,g]=h.then?(await h)():h;let i=(0,f.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),j=e.forwardRef(({className:a,variant:b,...c},e)=>(0,d.jsx)("div",{ref:e,role:"alert",className:(0,g.cn)(i({variant:b}),a),...c}));j.displayName="Alert",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h5",{ref:c,className:(0,g.cn)("mb-1 font-medium leading-none tracking-tight",a),...b})).displayName="AlertTitle";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,g.cn)("text-sm [&_p]:leading-relaxed",a),...b}));k.displayName="AlertDescription",a.s(["Alert",()=>j,"AlertDescription",()=>k]),c()}catch(a){c(a)}},!1),45840,a=>{"use strict";let b=(0,a.i(48948).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],45840)},81978,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(23526),f=a.i(27669),g=a.i(91917),h=a.i(28647),i=a.i(71946),j=a.i(6536),k=a.i(56983),l=a.i(16537),m=a.i(59518),n=a.i(83423),o=a.i(38681),p=a.i(11519),q=a.i(61605),r=a.i(16035),s=a.i(45840),t=a.i(96646),u=a.i(50192),v=b([h,i,j,k,t,u]);function w(){let a=(0,e.useRouter)(),b="string"==typeof a.query.dossierId?a.query.dossierId:void 0,[c,v]=(0,f.useState)(null),[w,x]=(0,f.useState)(!1),[y,z]=(0,f.useState)(!1);(0,f.useEffect)(()=>{b&&A()},[b]);let A=async()=>{if(b){x(!0);try{let a=await (0,g.fetchAPI)(`/dossiers/${b}/final-report`);v(a)}catch(a){console.error("Erro ao carregar relatório final:",a),"Relatório final ainda não foi gerado"!==a.message&&t.toast.error("Erro ao carregar relatório final"),v(null)}finally{x(!1)}}},B=async()=>{if(b){z(!0);try{await (0,g.fetchAPI)(`/dossiers/${b}/final-report`,{method:"POST"}),t.toast.success("Relatório final gerado com sucesso!"),await A()}catch(a){console.error("Erro ao gerar relatório final:",a),t.toast.error(a.message||"Erro ao gerar relatório final")}finally{z(!1)}}},C=async()=>{if(b)try{t.toast.info("Exportação PDF em desenvolvimento")}catch(a){console.error("Erro ao exportar PDF:",a),t.toast.error("Erro ao exportar PDF")}},D=async()=>{if(b)try{t.toast.info("Exportação DOCX em desenvolvimento")}catch(a){console.error("Erro ao exportar DOCX:",a),t.toast.error("Erro ao exportar DOCX")}};return b?w?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)(l.Loader2,{className:"size-8 animate-spin text-teal-600"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(h.Card,{children:(0,d.jsx)(h.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-start gap-4",children:[(0,d.jsx)("div",{className:"bg-purple-100 dark:bg-purple-900/30 p-3 rounded-lg",children:(0,d.jsx)(s.BookOpen,{className:"size-6 text-purple-600"})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(h.CardTitle,{children:"Relatório Final Consolidado"}),(0,d.jsx)(h.CardDescription,{className:"mt-2",children:"Documento estratégico oficial que consolida todas as análises setoriais em uma narrativa única"})]})]})})}),c?.sections&&c.sections.length>0&&(0,d.jsxs)(h.Card,{children:[(0,d.jsxs)(h.CardHeader,{children:[(0,d.jsx)(h.CardTitle,{className:"text-lg",children:"Status dos Relatórios Setoriais"}),(0,d.jsx)(h.CardDescription,{children:"Seções que alimentam o relatório final"})]}),(0,d.jsx)(h.CardContent,{children:(0,d.jsx)("div",{className:"space-y-3",children:c.sections.map(a=>(0,d.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,d.jsx)("span",{className:"font-medium",children:a.section_name}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:a.has_report?a.is_stale?(0,d.jsxs)(k.Badge,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:[(0,d.jsx)(r.AlertTriangle,{className:"size-3 mr-1"}),"Desatualizado"]}):(0,d.jsxs)(k.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[(0,d.jsx)(q.CheckCircle2,{className:"size-3 mr-1"}),"Atualizado"]}):(0,d.jsx)(k.Badge,{variant:"outline",className:"bg-slate-50 text-slate-600 border-slate-300",children:"Não gerado"})})]},a.section_code))})})]}),c?.missing_sections&&c.missing_sections.length>0&&(0,d.jsxs)(j.Alert,{variant:"destructive",children:[(0,d.jsx)(m.AlertCircle,{className:"size-4"}),(0,d.jsxs)(j.AlertDescription,{children:[(0,d.jsx)("strong",{children:"Seções sem relatório:"})," ",c.missing_sections.join(", "),". Gere os relatórios dessas seções antes de criar o relatório final para obter uma análise completa."]})]}),c?.stale_sections&&c.stale_sections.length>0&&(0,d.jsxs)(j.Alert,{children:[(0,d.jsx)(r.AlertTriangle,{className:"size-4"}),(0,d.jsxs)(j.AlertDescription,{children:[(0,d.jsx)("strong",{children:"Seções desatualizadas:"})," ",c.stale_sections.join(", "),". Os dados dessas seções foram alterados após a geração dos relatórios."]})]}),(0,d.jsxs)(h.Card,{children:[(0,d.jsx)(h.CardHeader,{children:(0,d.jsx)(h.CardTitle,{className:"text-lg",children:"Ações"})}),(0,d.jsx)(h.CardContent,{children:(0,d.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,d.jsx)(i.Button,{onClick:B,disabled:y,className:"bg-purple-600 hover:bg-purple-700",children:y?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Loader2,{className:"size-4 mr-2 animate-spin"}),"Gerando..."]}):c?.report?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.RefreshCw,{className:"size-4 mr-2"}),"Atualizar Relatório"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.FileText,{className:"size-4 mr-2"}),"Gerar Relatório Final"]})}),c?.report&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.Button,{variant:"outline",onClick:C,children:[(0,d.jsx)(o.Download,{className:"size-4 mr-2"}),"Exportar PDF"]}),(0,d.jsxs)(i.Button,{variant:"outline",onClick:D,children:[(0,d.jsx)(o.Download,{className:"size-4 mr-2"}),"Exportar DOCX"]})]})]})})]}),c?.report&&(0,d.jsxs)(h.Card,{children:[(0,d.jsx)(h.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(h.CardTitle,{children:"Relatório Consolidado"}),(0,d.jsxs)(h.CardDescription,{children:["Gerado em ",new Date(c.report.generated_at).toLocaleString("pt-BR")]})]}),(0,d.jsxs)(k.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[(0,d.jsx)(q.CheckCircle2,{className:"size-3 mr-1"}),"Disponível"]})]})}),(0,d.jsx)(h.CardContent,{children:(0,d.jsx)("div",{className:"prose prose-slate max-w-none dark:prose-invert",children:(0,d.jsx)(u.default,{children:c.report.report_markdown})})})]}),!c?.report&&!w&&(0,d.jsx)(h.Card,{children:(0,d.jsx)(h.CardContent,{className:"pt-6",children:(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(n.FileText,{className:"size-12 mx-auto text-slate-300 mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Relatório Final ainda não foi gerado"}),(0,d.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:'Clique em "Gerar Relatório Final" acima para consolidar todas as análises em um documento único'})]})})})]}):null}[h,i,j,k,t,u]=v.then?(await v)():v,a.s(["default",()=>w]),c()}catch(a){c(a)}},!1),31518,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(81978),f=b([e]);function g(){return(0,d.jsx)(e.default,{})}[e]=f.then?(await f)():f,a.s(["default",()=>g]),c()}catch(a){c(a)}},!1),22102,a=>a.a(async(b,c)=>{try{var d=a.i(69757),e=a.i(88230),f=a.i(42784),g=a.i(39119),h=a.i(36509),i=a.i(31518),j=a.i(25599),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/dossie/[dossierId]/final-report",pathname:"/dossie/[dossierId]/final-report",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/dossie/[dossierId]/final-report",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__19906d34._.js.map