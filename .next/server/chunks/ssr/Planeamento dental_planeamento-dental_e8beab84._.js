module.exports=[84707,a=>{"use strict";let b=(0,a.i(48948).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);a.s(["Folder",()=>b],84707)},29027,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(28647),g=a.i(71946),h=a.i(84637),i=a.i(34159),j=a.i(43776),k=a.i(8710),l=a.i(45398),m=a.i(51444),n=a.i(83758),o=a.i(81952),p=a.i(84707),q=a.i(14151),r=a.i(48761),s=a.i(96646),t=b([f,g,h,i,j,k,l,s]);function u({dossierId:a,onUpdateCompletion:b}){let[c,j]=(0,e.useState)([]),[k,l]=(0,e.useState)(null),[t,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{w()},[a]);let w=async()=>{try{let b=await (0,q.getServiceCategories)(a);j(b)}catch(a){console.error("Erro ao carregar categorias:",a)}},x=async c=>{try{k?(await (0,q.updateServiceCategory)(a,k.id,c),s.toast.success("Categoria atualizada!")):(await (0,q.createServiceCategory)(a,c),s.toast.success("Categoria criada!")),u(!1),l(null),await w(),b&&b(),await (0,r.calculateSectionCompletion)(a,"OFFER")}catch(a){s.toast.error(a.message||"Erro ao salvar categoria")}},y=async c=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{await (0,q.deleteServiceCategory)(a,c),s.toast.success("Categoria excluída!"),await w(),b&&b(),await (0,r.calculateSectionCompletion)(a,"OFFER")}catch(a){s.toast.error(a.message||"Erro ao excluir categoria")}};return(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(p.Folder,{className:"size-5"}),"Categorias de Serviços"]}),(0,d.jsx)(f.CardDescription,{children:"Organize os serviços em categorias para melhor gestão"})]}),(0,d.jsxs)(i.Dialog,{open:t,onOpenChange:a=>{u(a),a||l(null)},children:[(0,d.jsx)(i.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{size:"sm",children:[(0,d.jsx)(m.Plus,{className:"mr-2 size-4"}),"Adicionar"]})}),(0,d.jsx)(i.DialogContent,{children:(0,d.jsx)(v,{category:k,onSave:x,onCancel:()=>{u(!1),l(null)}})})]})]})}),(0,d.jsx)(f.CardContent,{children:0===c.length?(0,d.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:'Nenhuma categoria cadastrada. Clique em "Adicionar" para criar a primeira.'}):(0,d.jsxs)(h.Table,{children:[(0,d.jsx)(h.TableHeader,{children:(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableHead,{children:"Nome"}),(0,d.jsx)(h.TableHead,{children:"Descrição"}),(0,d.jsx)(h.TableHead,{className:"text-right",children:"Ações"})]})}),(0,d.jsx)(h.TableBody,{children:c.map(a=>(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableCell,{className:"font-medium",children:a.name}),(0,d.jsx)(h.TableCell,{children:a.description||"-"}),(0,d.jsx)(h.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{l(a),u(!0)},children:(0,d.jsx)(n.Edit,{className:"size-4"})}),(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>y(a.id),children:(0,d.jsx)(o.Trash2,{className:"size-4 text-red-500"})})]})})]},a.id))})]})})]})}function v({category:a,onSave:b,onCancel:c}){let[f,h]=(0,e.useState)(a?.name||""),[m,n]=(0,e.useState)(a?.description||""),[o,p]=(0,e.useState)(a?.notes||"");return(0,d.jsxs)("form",{onSubmit:a=>{(a.preventDefault(),f.trim())?b({name:f.trim(),description:m.trim()||void 0,notes:o.trim()||void 0}):s.toast.error("Nome é obrigatório")},children:[(0,d.jsxs)(i.DialogHeader,{children:[(0,d.jsx)(i.DialogTitle,{children:a?"Editar Categoria":"Nova Categoria de Serviço"}),(0,d.jsx)(i.DialogDescription,{children:"Defina as informações da categoria"})]}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"category-name",children:"Nome *"}),(0,d.jsx)(j.Input,{id:"category-name",value:f,onChange:a=>h(a.target.value),placeholder:"Ex: Tratamentos Estéticos",required:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"category-description",children:"Descrição"}),(0,d.jsx)(k.Textarea,{id:"category-description",value:m,onChange:a=>n(a.target.value),placeholder:"Descreva esta categoria de serviços",className:"min-h-[80px]"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"category-notes",children:"Notas"}),(0,d.jsx)(k.Textarea,{id:"category-notes",value:o,onChange:a=>p(a.target.value),placeholder:"Observações adicionais",className:"min-h-[80px]"})]})]}),(0,d.jsxs)(i.DialogFooter,{children:[(0,d.jsx)(g.Button,{type:"button",variant:"outline",onClick:c,children:"Cancelar"}),(0,d.jsx)(g.Button,{type:"submit",children:"Salvar"})]})]})}[f,g,h,i,j,k,l,s]=t.then?(await t)():t,a.s(["default",()=>u]),c()}catch(a){c(a)}},!1),25062,a=>{"use strict";let b=(0,a.i(48948).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],25062)},83915,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(28647),g=a.i(71946),h=a.i(84637),i=a.i(34159),j=a.i(43776),k=a.i(8710),l=a.i(45398),m=a.i(22049),n=a.i(51444),o=a.i(83758),p=a.i(81952),q=a.i(36149),r=a.i(25062),s=a.i(14151),t=a.i(48761),u=a.i(96646),v=b([f,g,h,i,j,k,l,m,u]);function w({dossierId:a,onUpdateCompletion:b}){let[c,j]=(0,e.useState)([]),[k,l]=(0,e.useState)([]),[m,v]=(0,e.useState)(null),[w,y]=(0,e.useState)(!1);(0,e.useEffect)(()=>{z()},[a]);let z=async()=>{try{let[b,c]=await Promise.all([(0,s.getServices)(a),(0,s.getServiceCategories)(a)]);j(b),l(c)}catch(a){console.error("Erro ao carregar dados:",a)}},A=async c=>{try{m?(await (0,s.updateService)(a,m.id,c),u.toast.success("Serviço atualizado!")):(await (0,s.createService)(a,c),u.toast.success("Serviço criado!")),y(!1),v(null),await z(),b&&b(),await (0,t.calculateSectionCompletion)(a,"OFFER")}catch(a){u.toast.error(a.message||"Erro ao salvar serviço")}},B=async c=>{if(confirm("Tem certeza que deseja excluir este serviço?"))try{await (0,s.deleteService)(a,c),u.toast.success("Serviço excluído!"),await z(),b&&b(),await (0,t.calculateSectionCompletion)(a,"OFFER")}catch(a){u.toast.error(a.message||"Erro ao excluir serviço")}};return(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(q.Package,{className:"size-5"}),"Serviços"]}),(0,d.jsx)(f.CardDescription,{children:"Gerencie os serviços oferecidos pela clínica"})]}),(0,d.jsxs)(i.Dialog,{open:w,onOpenChange:a=>{y(a),a||v(null)},children:[(0,d.jsx)(i.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(g.Button,{size:"sm",children:[(0,d.jsx)(n.Plus,{className:"mr-2 size-4"}),"Adicionar"]})}),(0,d.jsx)(i.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,d.jsx)(x,{service:m,categories:k,onSave:A,onCancel:()=>{y(!1),v(null)}})})]})]})}),(0,d.jsx)(f.CardContent,{children:0===c.length?(0,d.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:'Nenhum serviço cadastrado. Clique em "Adicionar" para criar o primeiro.'}):(0,d.jsxs)(h.Table,{children:[(0,d.jsx)(h.TableHeader,{children:(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableHead,{children:"Nome"}),(0,d.jsx)(h.TableHead,{children:"Categoria"}),(0,d.jsx)(h.TableHead,{children:"Duração"}),(0,d.jsx)(h.TableHead,{children:"Preço"}),(0,d.jsx)(h.TableHead,{children:"Flagship"}),(0,d.jsx)(h.TableHead,{className:"text-right",children:"Ações"})]})}),(0,d.jsx)(h.TableBody,{children:c.map(a=>{var b;return(0,d.jsxs)(h.TableRow,{children:[(0,d.jsx)(h.TableCell,{className:"font-medium",children:a.name}),(0,d.jsx)(h.TableCell,{children:a.category_name||"-"}),(0,d.jsx)(h.TableCell,{children:a.duration_minutes?`${a.duration_minutes} min`:"-"}),(0,d.jsx)(h.TableCell,{children:(b=a.price)?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(b):"-"}),(0,d.jsx)(h.TableCell,{children:a.is_flagship?(0,d.jsx)(r.Star,{className:"size-4 text-amber-500 fill-amber-500"}):"-"}),(0,d.jsx)(h.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>{v(a),y(!0)},children:(0,d.jsx)(o.Edit,{className:"size-4"})}),(0,d.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>B(a.id),children:(0,d.jsx)(p.Trash2,{className:"size-4 text-red-500"})})]})})]},a.id)})})]})})]})}function x({service:a,categories:b,onSave:c,onCancel:f}){let[h,n]=(0,e.useState)(a?.name||""),[o,p]=(0,e.useState)(a?.description||""),[q,r]=(0,e.useState)(a?.service_category_id||""),[s,t]=(0,e.useState)(a?.duration_minutes||""),[v,w]=(0,e.useState)(a?.price||""),[x,y]=(0,e.useState)(a?.estimated_cost||""),[z,A]=(0,e.useState)(a?.is_flagship||!1),[B,C]=(0,e.useState)(a?.notes||"");return(0,d.jsxs)("form",{onSubmit:a=>{(a.preventDefault(),h.trim())?c({name:h.trim(),description:o.trim()||void 0,serviceCategoryId:q||void 0,durationMinutes:s?parseInt(s):void 0,price:v?parseFloat(v):void 0,estimatedCost:x?parseFloat(x):void 0,isFlagship:z,notes:B.trim()||void 0}):u.toast.error("Nome é obrigatório")},children:[(0,d.jsxs)(i.DialogHeader,{children:[(0,d.jsx)(i.DialogTitle,{children:a?"Editar Serviço":"Novo Serviço"}),(0,d.jsx)(i.DialogDescription,{children:"Defina as informações do serviço"})]}),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-name",children:"Nome *"}),(0,d.jsx)(j.Input,{id:"service-name",value:h,onChange:a=>n(a.target.value),placeholder:"Ex: Limpeza Profissional",required:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-description",children:"Descrição"}),(0,d.jsx)(k.Textarea,{id:"service-description",value:o,onChange:a=>p(a.target.value),placeholder:"Descreva o serviço",className:"min-h-[80px]"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-category",children:"Categoria"}),(0,d.jsxs)("select",{id:"service-category",value:q,onChange:a=>r(a.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,d.jsx)("option",{value:"",children:"Nenhuma"}),b.map(a=>(0,d.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-duration",children:"Duração (minutos)"}),(0,d.jsx)(j.Input,{id:"service-duration",type:"number",min:"1",value:s,onChange:a=>t(a.target.value),placeholder:"Ex: 60"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-price",children:"Preço (R$)"}),(0,d.jsx)(j.Input,{id:"service-price",type:"number",step:"0.01",min:"0",value:v,onChange:a=>w(a.target.value),placeholder:"Ex: 150.00"})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-cost",children:"Custo Estimado (R$)"}),(0,d.jsx)(j.Input,{id:"service-cost",type:"number",step:"0.01",min:"0",value:x,onChange:a=>y(a.target.value),placeholder:"Ex: 80.00"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(m.Checkbox,{id:"service-flagship",checked:z,onCheckedChange:a=>A(!0===a)}),(0,d.jsx)(l.Label,{htmlFor:"service-flagship",className:"cursor-pointer",children:"Serviço carro-chefe (flagship)"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"service-notes",children:"Notas"}),(0,d.jsx)(k.Textarea,{id:"service-notes",value:B,onChange:a=>C(a.target.value),placeholder:"Observações adicionais",className:"min-h-[80px]"})]})]}),(0,d.jsxs)(i.DialogFooter,{children:[(0,d.jsx)(g.Button,{type:"button",variant:"outline",onClick:f,children:"Cancelar"}),(0,d.jsx)(g.Button,{type:"submit",children:"Salvar"})]})]})}[f,g,h,i,j,k,l,m,u]=v.then?(await v)():v,a.s(["default",()=>w]),c()}catch(a){c(a)}},!1),74218,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(23526),f=a.i(33941),g=a.i(29027),h=a.i(83915),i=b([f,g,h]);function j(){let{dossierId:a}=(0,e.useRouter)().query;return a&&"string"==typeof a?(0,d.jsx)(f.default,{sectionCode:"OFFER",entityBlocks:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.default,{dossierId:a}),(0,d.jsx)(h.default,{dossierId:a})]})}):null}[f,g,h]=i.then?(await i)():i,a.s(["default",()=>j]),c()}catch(a){c(a)}},!1),76259,a=>a.a(async(b,c)=>{try{var d=a.i(69757),e=a.i(88230),f=a.i(42784),g=a.i(39119),h=a.i(36509),i=a.i(74218),j=a.i(25599),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/dossie/[dossierId]/offer",pathname:"/dossie/[dossierId]/offer",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/dossie/[dossierId]/offer",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Planeamento%20dental_planeamento-dental_e8beab84._.js.map