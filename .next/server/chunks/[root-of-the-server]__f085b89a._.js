module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},47044,(e,t,r)=>{t.exports=e.x("jsonwebtoken-cc89c121a8bdfb14",()=>require("jsonwebtoken-cc89c121a8bdfb14"))},21503,e=>e.a(async(t,r)=>{try{let t=await e.y("pg-519b72043f8edc04");e.n(t),r()}catch(e){r(e)}},!0),64104,e=>e.a(async(t,r)=>{try{var o=e.i(21503),n=t([o]);if([o]=n.then?(await n)():n,!process.env.DATABASE_URL)throw console.error("âŒ DATABASE_URL nÃ£o estÃ¡ configurada!"),console.error("âŒ Configure DATABASE_URL no arquivo .env.local ou nas variÃ¡veis de ambiente"),Error("DATABASE_URL nÃ£o configurada. Configure no .env.local ou variÃ¡veis de ambiente.");let a=new o.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1},max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3});a.on("connect",()=>{console.log("âœ… Conectado ao banco de dados Neon")}),a.on("error",e=>{console.error("âŒ Erro no pool de conexÃµes:",e)}),e.s(["default",0,a]),r()}catch(e){r(e)}},!1),63963,e=>{"use strict";var t=e.i(47044);let r=process.env.JWT_SECRET||"your-secret-key-change-in-production";function o(e,o,n){let a=e.headers.authorization,i=a&&a.split(" ")[1];if(!i)return o.status(401).json({error:"Token nÃ£o fornecido"});try{e.user=t.default.verify(i,r),n()}catch(e){return o.status(403).json({error:"Token invÃ¡lido ou expirado"})}}function n(e,t,r){if(e.user?.role!=="admin")return t.status(403).json({error:"Acesso negado. Admin necessÃ¡rio."});r()}process.env.JWT_SECRET||console.warn("âš ï¸  JWT_SECRET nÃ£o configurado! Usando valor padrÃ£o inseguro."),e.s(["authenticateToken",()=>o,"requireAdmin",()=>n])},57038,e=>e.a(async(t,r)=>{try{var o=e.i(63963),n=e.i(64104),a=t([n]);async function i(e,t){return(t.setHeader("Access-Control-Allow-Credentials","true"),t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","POST,OPTIONS"),t.setHeader("Access-Control-Allow-Headers","X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization"),"OPTIONS"===e.method)?void t.status(200).end():(0,o.authenticateToken)(e,t,()=>(0,o.requireAdmin)(e,t,async()=>{try{let{method:r}=e;if("POST"===r){let{updates:r}=e.body;if(!r||!Array.isArray(r))return t.status(400).json({error:"Updates array Ã© obrigatÃ³rio"});console.log("ðŸ”„ Reordenando perguntas:",r);let o=await n.default.connect();try{for(let e of(await o.query("BEGIN"),r))await o.query("UPDATE questions SET order_index = $1 WHERE id = $2",[e.order_index,e.id]);await o.query("COMMIT"),console.log("âœ… ReordenaÃ§Ã£o concluÃ­da com sucesso")}catch(e){throw await o.query("ROLLBACK"),e}finally{o.release()}return t.status(200).json({success:!0})}return t.status(405).json({error:"Method not allowed"})}catch(e){return console.error("âŒ Erro ao reordenar perguntas:",e),t.status(500).json({error:e.message||"Erro interno do servidor"})}}))}[n]=a.then?(await a)():a,e.s(["default",()=>i]),r()}catch(e){r(e)}},!1),19723,e=>e.a(async(t,r)=>{try{var o=e.i(93957),n=e.i(72664),a=e.i(61471),i=e.i(65751),s=e.i(57038),d=e.i(90078),l=e.i(57218),c=e.i(2576),u=t([s]);[s]=u.then?(await u)():u;let h=(0,i.hoist)(s,"default"),A=(0,i.hoist)(s,"config"),f=new a.PagesAPIRouteModule({definition:{kind:n.RouteKind.PAGES_API,page:"/api/admin/questions/reorder",pathname:"/api/admin/questions/reorder",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function p(e,t,r){f.isDev&&(0,c.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/admin/questions/reorder";n=n.replace(/\/index$/,"")||"/";let a=await f.prepare(e,t,{srcPage:n});if(!a){t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve());return}let{query:i,params:s,prerenderManifest:u,routerServerContext:p}=a;try{let r=e.method||"GET",o=(0,d.getTracer)(),a=o.getActiveScopeSpan(),c=f.instrumentationOnRequestError.bind(f),h=async a=>f.render(e,t,{query:{...i,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:u.preview,propagateError:!1,dev:f.isDev,page:"/api/admin/questions/reorder",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>c(e,...t)}).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=o.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=e.get("next.route");if(i){let e=`${r} ${i}`;a.setAttributes({"next.route":i,"http.route":i,"next.span_name":e}),a.updateName(e)}else a.updateName(`${r} ${n}`)});a?await h(a):await o.withPropagatedContext(e.headers,()=>o.trace(l.BaseServerSpan.handleRequest,{spanName:`${r} ${n}`,kind:d.SpanKind.SERVER,attributes:{"http.method":r,"http.target":e.url}},h))}catch(e){if(f.isDev)throw e;(0,o.sendError)(t,500,"Internal Server Error")}finally{null==r.waitUntil||r.waitUntil.call(r,Promise.resolve())}}e.s(["config",0,A,"default",0,h,"handler",()=>p]),r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__f085b89a._.js.map