module.exports=[70406,(e,t,o)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},47044,(e,t,o)=>{t.exports=e.x("jsonwebtoken-cc89c121a8bdfb14",()=>require("jsonwebtoken-cc89c121a8bdfb14"))},21503,e=>e.a(async(t,o)=>{try{let t=await e.y("pg-519b72043f8edc04");e.n(t),o()}catch(e){o(e)}},!0),64104,e=>e.a(async(t,o)=>{try{var n=e.i(21503),r=t([n]);if([n]=r.then?(await r)():r,!process.env.DATABASE_URL)throw console.error("❌ DATABASE_URL não está configurada!"),console.error("❌ Configure DATABASE_URL no arquivo .env.local ou nas variáveis de ambiente"),Error("DATABASE_URL não configurada. Configure no .env.local ou variáveis de ambiente.");let s=new n.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1},max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3});s.on("connect",()=>{console.log("✅ Conectado ao banco de dados Neon")}),s.on("error",e=>{console.error("❌ Erro no pool de conexões:",e)}),e.s(["default",0,s]),o()}catch(e){o(e)}},!1),63963,e=>{"use strict";var t=e.i(47044);let o=process.env.JWT_SECRET||"your-secret-key-change-in-production";function n(e,n,r){let s=e.headers.authorization,a=s&&s.split(" ")[1];if(!a)return n.status(401).json({error:"Token não fornecido"});try{e.user=t.default.verify(a,o),r()}catch(e){return n.status(403).json({error:"Token inválido ou expirado"})}}function r(e,t,o){if(e.user?.role!=="admin")return t.status(403).json({error:"Acesso negado. Admin necessário."});o()}process.env.JWT_SECRET||console.warn("⚠️  JWT_SECRET não configurado! Usando valor padrão inseguro."),e.s(["authenticateToken",()=>n,"requireAdmin",()=>r])},83606,e=>e.a(async(t,o)=>{try{var n=e.i(63963),r=e.i(64104),s=t([r]);async function a(e,t){return(t.setHeader("Access-Control-Allow-Credentials","true"),t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET,OPTIONS"),t.setHeader("Access-Control-Allow-Headers","X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization"),"OPTIONS"===e.method)?void t.status(200).end():(0,n.authenticateToken)(e,t,async()=>{try{if("GET"===e.method){let{id:o}=e.query;if(!o||"string"!=typeof o)return t.status(400).json({error:"ID da pergunta é obrigatório"});let n=await r.default.query(`SELECT 
            qc.why,
            qc.consequences,
            qc.how_to_answer,
            qc.good_examples,
            qc.bad_examples,
            qc.show_why,
            qc.show_consequences,
            qc.show_how_to_answer,
            qc.show_good_examples,
            qc.show_bad_examples,
            q.code as question_code
          FROM question_contexts qc
          JOIN questions q ON q.id = qc.question_id
          WHERE qc.question_id = $1`,[o]);if(0===n.rows.length)return t.status(200).json(null);let s=n.rows[0],a={question_code:s.question_code};return s.show_why&&s.why&&(a.why=s.why),s.show_consequences&&s.consequences&&s.consequences.length>0&&(a.consequences=s.consequences),s.show_how_to_answer&&s.how_to_answer&&(a.howToAnswer=s.how_to_answer),s.show_good_examples&&s.good_examples&&s.good_examples.length>0&&(a.goodExamples=s.good_examples),s.show_bad_examples&&s.bad_examples&&s.bad_examples.length>0&&(a.badExamples=s.bad_examples),t.status(200).json(a)}return t.status(405).json({error:"Method not allowed"})}catch(e){return console.error("Erro ao buscar contexto:",e),t.status(500).json({error:e.message||"Erro interno do servidor"})}})}[r]=s.then?(await s)():s,e.s(["default",()=>a]),o()}catch(e){o(e)}},!1),40432,e=>e.a(async(t,o)=>{try{var n=e.i(93957),r=e.i(72664),s=e.i(61471),a=e.i(65751),i=e.i(83606),c=e.i(90078),l=e.i(57218),d=e.i(2576),u=t([i]);[i]=u.then?(await u)():u;let h=(0,a.hoist)(i,"default"),w=(0,a.hoist)(i,"config"),_=new s.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/questions/[id]/context",pathname:"/api/questions/[id]/context",bundlePath:"",filename:""},userland:i,distDir:".next",relativeProjectDir:""});async function p(e,t,o){_.isDev&&(0,d.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let r="/api/questions/[id]/context";r=r.replace(/\/index$/,"")||"/";let s=await _.prepare(e,t,{srcPage:r});if(!s){t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve());return}let{query:a,params:i,prerenderManifest:u,routerServerContext:p}=s;try{let o=e.method||"GET",n=(0,c.getTracer)(),s=n.getActiveScopeSpan(),d=_.instrumentationOnRequestError.bind(_),h=async s=>_.render(e,t,{query:{...a,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:u.preview,propagateError:!1,dev:_.isDev,page:"/api/questions/[id]/context",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>d(e,...t)}).finally(()=>{if(!s)return;s.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=n.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==l.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=e.get("next.route");if(a){let e=`${o} ${a}`;s.setAttributes({"next.route":a,"http.route":a,"next.span_name":e}),s.updateName(e)}else s.updateName(`${o} ${r}`)});s?await h(s):await n.withPropagatedContext(e.headers,()=>n.trace(l.BaseServerSpan.handleRequest,{spanName:`${o} ${r}`,kind:c.SpanKind.SERVER,attributes:{"http.method":o,"http.target":e.url}},h))}catch(e){if(_.isDev)throw e;(0,n.sendError)(t,500,"Internal Server Error")}finally{null==o.waitUntil||o.waitUntil.call(o,Promise.resolve())}}e.s(["config",0,w,"default",0,h,"handler",()=>p]),o()}catch(e){o(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__55ae9345._.js.map