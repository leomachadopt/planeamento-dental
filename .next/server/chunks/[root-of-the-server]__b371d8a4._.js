module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},47044,(e,t,r)=>{t.exports=e.x("jsonwebtoken-cc89c121a8bdfb14",()=>require("jsonwebtoken-cc89c121a8bdfb14"))},21503,e=>e.a(async(t,r)=>{try{let t=await e.y("pg-519b72043f8edc04");e.n(t),r()}catch(e){r(e)}},!0),64104,e=>e.a(async(t,r)=>{try{var a=e.i(21503),n=t([a]);if([a]=n.then?(await n)():n,!process.env.DATABASE_URL)throw console.error("❌ DATABASE_URL não está configurada!"),console.error("❌ Configure DATABASE_URL no arquivo .env.local ou nas variáveis de ambiente"),Error("DATABASE_URL não configurada. Configure no .env.local ou variáveis de ambiente.");let o=new a.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1},max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3});o.on("connect",()=>{console.log("✅ Conectado ao banco de dados Neon")}),o.on("error",e=>{console.error("❌ Erro no pool de conexões:",e)}),e.s(["default",0,o]),r()}catch(e){r(e)}},!1),34107,e=>e.a(async(t,r)=>{try{var a=e.i(47044),n=e.i(64104),o=t([n]);[n]=o.then?(await o)():o;let s=process.env.JWT_SECRET||"your-secret-key-change-in-production",l=process.env.JWT_EXPIRES_IN||"7d";async function i(t,r){if(r.setHeader("Access-Control-Allow-Credentials","true"),r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET,OPTIONS,PATCH,DELETE,POST,PUT"),r.setHeader("Access-Control-Allow-Headers","X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization"),"OPTIONS"===t.method)return void r.status(200).end();if("POST"!==t.method)return r.status(405).json({error:"Método não permitido"});try{let{email:o,password:i,name:d,clinicId:c}=t.body;if(!o||!i||!d)return r.status(400).json({error:"Email, senha e nome são obrigatórios"});if(i.length<8)return r.status(400).json({error:"Senha deve ter no mínimo 8 caracteres"});if((await n.default.query("SELECT id FROM users WHERE email = $1",[o.toLowerCase()])).rows.length>0)return r.status(409).json({error:"Email já cadastrado"});let u=await e.A(25584),p=await u.default.hash(i,10),h=(await n.default.query("INSERT INTO users (email, password_hash, name, clinic_id, role) VALUES ($1, $2, $3, $4, $5) RETURNING id, email, name, role, clinic_id",[o.toLowerCase(),p,d,c||null,"user"])).rows[0],m=a.default.sign({id:h.id,email:h.email,role:h.role,clinicId:h.clinic_id,name:h.name},s,{expiresIn:l});return r.status(201).json({token:m,user:{id:h.id,email:h.email,name:h.name,role:h.role,clinicId:h.clinic_id}})}catch(e){return console.error("Erro no registro:",e),r.status(500).json({error:"Erro interno do servidor"})}}e.s(["default",()=>i]),r()}catch(e){r(e)}},!1),83165,e=>e.a(async(t,r)=>{try{var a=e.i(93957),n=e.i(72664),o=e.i(61471),i=e.i(65751),s=e.i(34107),l=e.i(90078),d=e.i(57218),c=e.i(2576),u=t([s]);[s]=u.then?(await u)():u;let h=(0,i.hoist)(s,"default"),m=(0,i.hoist)(s,"config"),v=new o.PagesAPIRouteModule({definition:{kind:n.RouteKind.PAGES_API,page:"/api/auth/register",pathname:"/api/auth/register",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function p(e,t,r){v.isDev&&(0,c.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/auth/register";n=n.replace(/\/index$/,"")||"/";let o=await v.prepare(e,t,{srcPage:n});if(!o){t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve());return}let{query:i,params:s,prerenderManifest:u,routerServerContext:p}=o;try{let r=e.method||"GET",a=(0,l.getTracer)(),o=a.getActiveScopeSpan(),c=v.instrumentationOnRequestError.bind(v),h=async o=>v.render(e,t,{query:{...i,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:u.preview,propagateError:!1,dev:v.isDev,page:"/api/auth/register",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>c(e,...t)}).finally(()=>{if(!o)return;o.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=a.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=e.get("next.route");if(i){let e=`${r} ${i}`;o.setAttributes({"next.route":i,"http.route":i,"next.span_name":e}),o.updateName(e)}else o.updateName(`${r} ${n}`)});o?await h(o):await a.withPropagatedContext(e.headers,()=>a.trace(d.BaseServerSpan.handleRequest,{spanName:`${r} ${n}`,kind:l.SpanKind.SERVER,attributes:{"http.method":r,"http.target":e.url}},h))}catch(e){if(v.isDev)throw e;(0,a.sendError)(t,500,"Internal Server Error")}finally{null==r.waitUntil||r.waitUntil.call(r,Promise.resolve())}}e.s(["config",0,m,"default",0,h,"handler",()=>p]),r()}catch(e){r(e)}},!1),25584,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_bcryptjs_3e0b7523._.js"].map(t=>e.l(t))).then(()=>t(39090)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b371d8a4._.js.map