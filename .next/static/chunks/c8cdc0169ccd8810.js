(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43656,e=>{"use strict";let a=(0,e.i(40895).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],43656)},44381,e=>{"use strict";var a=e.i(43935),t=e.i(68196),i=e.i(69751);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));s.displayName="Table";let r=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",e),...t}));r.displayName="TableHeader";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));n.displayName="TableRow";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let c=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableCell",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>c,"TableHead",()=>d,"TableHeader",()=>r,"TableRow",()=>n])},18931,e=>{"use strict";let a=(0,e.i(40895).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],18931)},4258,e=>{"use strict";let a=(0,e.i(40895).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],4258)},10675,e=>{"use strict";var a=e.i(43935),t=e.i(68196),i=e.i(94565),s=e.i(69751);let r=(0,i.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=t.forwardRef(({className:e,variant:t,...i},l)=>(0,a.jsx)("div",{ref:l,role:"alert",className:(0,s.cn)(r({variant:t}),e),...i}));l.displayName="Alert",t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("h5",{ref:i,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let n=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("div",{ref:i,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",e),...t}));n.displayName="AlertDescription",e.s(["Alert",()=>l,"AlertDescription",()=>n])},45849,e=>{"use strict";var a=e.i(43935),t=e.i(93639),i=e.i(68196),s=e.i(3416),r=e.i(46635),l=e.i(45813),n=e.i(38334),d=e.i(51814),c=e.i(44381),o=e.i(97219),u=e.i(2602),m=e.i(65586),h=e.i(20826),x=e.i(18931),p=e.i(43656),v=e.i(4258),j=e.i(40895);let f=(0,j.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var b=e.i(64703),g=e.i(59426),y=e.i(9169);function N({dossierId:e,onUpdateCompletion:t}){let[s,r]=(0,i.useState)([]),[l,u]=(0,i.useState)(null),[m,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{j()},[e]);let j=async()=>{try{let a=await b.api.getInitiatives(e);r(a)}catch(e){console.error("Erro ao carregar iniciativas:",e)}},N=async a=>{try{l?(await b.api.updateInitiative(e,l.id,a),y.toast.success("Iniciativa atualizada!")):(await b.api.createInitiative(e,a),y.toast.success("Iniciativa criada!")),h(!1),u(null),await j(),t&&t(),await (0,g.calculateSectionCompletion)(e,"PLAN")}catch(e){y.toast.error(e.message||"Erro ao salvar iniciativa")}},T=async a=>{if(confirm("Tem certeza que deseja excluir esta iniciativa?"))try{await b.api.deleteInitiative(e,a),y.toast.success("Iniciativa excluída!"),await j(),t&&t(),await (0,g.calculateSectionCompletion)(e,"PLAN")}catch(e){y.toast.error(e.message||"Erro ao excluir iniciativa")}};return(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"size-5"}),"Iniciativas"]}),(0,a.jsx)(n.CardDescription,{children:"Gerencie as iniciativas e projetos do plano estratégico"})]}),(0,a.jsxs)(o.Dialog,{open:m,onOpenChange:e=>{h(e),e||u(null)},children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(d.Button,{size:"sm",children:[(0,a.jsx)(x.Plus,{className:"mr-2 size-4"}),"Adicionar"]})}),(0,a.jsx)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,a.jsx)(C,{initiative:l,onSave:N,onCancel:()=>{h(!1),u(null)}})})]})]})}),(0,a.jsx)(n.CardContent,{children:0===s.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:'Nenhuma iniciativa cadastrada. Clique em "Adicionar" para criar a primeira.'}):(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{children:"Título"}),(0,a.jsx)(c.TableHead,{children:"Status"}),(0,a.jsx)(c.TableHead,{children:"Prioridade"}),(0,a.jsx)(c.TableHead,{children:"Responsável"}),(0,a.jsx)(c.TableHead,{className:"text-right",children:"Ações"})]})}),(0,a.jsx)(c.TableBody,{children:s.map(e=>(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableCell,{className:"font-medium",children:e.title}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"active"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"completed"===e.status?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-400"}`,children:"active"===e.status?"Ativa":"completed"===e.status?"Concluída":"Rascunho"})}),(0,a.jsx)(c.TableCell,{children:e.priority?`Prioridade ${e.priority}`:"-"}),(0,a.jsx)(c.TableCell,{children:e.owner||"-"}),(0,a.jsx)(c.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{u(e),h(!0)},children:(0,a.jsx)(p.Edit,{className:"size-4"})}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>T(e.id),children:(0,a.jsx)(v.Trash2,{className:"size-4 text-red-500"})})]})})]},e.id))})]})})]})}function C({initiative:e,onSave:t,onCancel:s}){let[r,l]=(0,i.useState)(e?.title||""),[n,c]=(0,i.useState)(e?.description||""),[x,p]=(0,i.useState)(e?.status||"draft"),[v,j]=(0,i.useState)(e?.priority||""),f=(e=>{if(!e)return{start:"",end:""};let a=e.split(" a ");return{start:a[0]?.trim()||"",end:a[1]?.trim()||""}})(e?.timeframe),[b,g]=(0,i.useState)(f.start),[N,C]=(0,i.useState)(f.end),[T,w]=(0,i.useState)(e?.owner||""),[k,R]=(0,i.useState)(e?.notes||"");return(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!r.trim())return void y.toast.error("Título é obrigatório");let a=b||N?`${b||""}${b&&N?" a ":""}${N||""}`.trim():null;t({title:r.trim(),description:n.trim()||void 0,status:x,priority:v?parseInt(v):void 0,timeframe:a,owner:T.trim()||void 0,notes:k.trim()||void 0})},children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsx)(o.DialogTitle,{children:e?"Editar Iniciativa":"Nova Iniciativa"}),(0,a.jsx)(o.DialogDescription,{children:"Defina as informações da iniciativa"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-title",children:"Título *"}),(0,a.jsx)(u.Input,{id:"initiative-title",value:r,onChange:e=>l(e.target.value),placeholder:"Ex: Implementar sistema de agendamento online",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-description",children:"Descrição"}),(0,a.jsx)(m.Textarea,{id:"initiative-description",value:n,onChange:e=>c(e.target.value),placeholder:"Descreva detalhadamente a iniciativa",className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-status",children:"Status"}),(0,a.jsxs)("select",{id:"initiative-status",value:x,onChange:e=>p(e.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,a.jsx)("option",{value:"draft",children:"Rascunho"}),(0,a.jsx)("option",{value:"active",children:"Ativa"}),(0,a.jsx)("option",{value:"completed",children:"Concluída"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-priority",children:"Prioridade (1-5)"}),(0,a.jsx)(u.Input,{id:"initiative-priority",type:"number",min:"1",max:"5",value:v,onChange:e=>j(e.target.value),placeholder:"1 = maior prioridade"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-start",children:"Data de Início"}),(0,a.jsx)(u.Input,{id:"initiative-start",type:"date",value:b,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-end",children:"Data de Término"}),(0,a.jsx)(u.Input,{id:"initiative-end",type:"date",value:N,onChange:e=>C(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-responsible",children:"Responsável"}),(0,a.jsx)(u.Input,{id:"initiative-responsible",value:T,onChange:e=>w(e.target.value),placeholder:"Ex: Dr. João Silva"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"initiative-notes",children:"Notas"}),(0,a.jsx)(m.Textarea,{id:"initiative-notes",value:k,onChange:e=>R(e.target.value),placeholder:"Observações adicionais",className:"min-h-[80px]"})]})]}),(0,a.jsxs)(o.DialogFooter,{children:[(0,a.jsx)(d.Button,{type:"button",variant:"outline",onClick:s,children:"Cancelar"}),(0,a.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})}var T=e.i(10675),w=e.i(127),k=e.i(46758);let R=(0,j.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function I({sectionCode:e}){let c=(0,t.useRouter)(),o="string"==typeof c.query.dossierId?c.query.dossierId:void 0,{sectionData:u,loading:m,error:h}=(0,s.useSectionData)(o,e),{report:p,loadingReport:v,generatingReport:j,handleGenerateReport:f}=(0,r.useSectionReport)(o,e),[b,g]=(0,i.useState)([]),[y,C]=(0,i.useState)([]);return o?m?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(w.Loader2,{className:"size-8 animate-spin text-teal-600"})}):h?(0,a.jsx)(n.Card,{children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center text-red-600",children:[(0,a.jsx)("p",{children:"Erro ao carregar dados da seção"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:h.message})]})})}):u?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Card,{children:(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg",children:(0,a.jsx)(R,{className:"size-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(n.CardTitle,{children:u.section.name}),u.section.description&&(0,a.jsx)(n.CardDescription,{className:"mt-2",children:u.section.description})]})]})})}),(0,a.jsxs)(T.Alert,{children:[(0,a.jsx)(k.AlertCircle,{className:"size-4"}),(0,a.jsxs)(T.AlertDescription,{children:[(0,a.jsx)("strong",{children:"Seção de Planejamento:"})," Traduza a síntese estratégica em um plano executável com OKRs, iniciativas priorizadas, responsáveis e prazos para os próximos 12 meses."]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.CardTitle,{className:"text-lg",children:"OKRs (Objectives & Key Results)"}),(0,a.jsx)(n.CardDescription,{children:"Objetivos estratégicos e resultados-chave mensuráveis"})]}),(0,a.jsxs)(d.Button,{size:"sm",variant:"outline",children:[(0,a.jsx)(x.Plus,{className:"size-4 mr-2"}),"Adicionar OKR"]})]})}),(0,a.jsx)(n.CardContent,{children:(0,a.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,a.jsx)("p",{children:"Nenhum OKR cadastrado ainda"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:'Use "Gerar Plano Inicial com IA" abaixo para começar, ou adicione manualmente'})]})})]}),(0,a.jsx)(N,{dossierId:o}),(0,a.jsx)(l.default,{report:p,loading:v,generating:j,onGenerate:f,sectionCode:e,sectionTitle:"Plano Inicial (gerado por IA)"})]}):(0,a.jsx)(n.Card,{children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsx)("div",{className:"text-center text-slate-500",children:(0,a.jsx)("p",{children:"Nenhum dado encontrado para esta seção"})})})}):null}function S(){return(0,a.jsx)(I,{sectionCode:"PLAN"})}e.s(["default",()=>S],45849)},8807,(e,a,t)=>{let i="/dossie/[dossierId]/plan";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(45849)]),a.hot&&a.hot.dispose(function(){window.__NEXT_P.push([i])})},64270,e=>{e.v(a=>Promise.all(["static/chunks/4ddff7bfb1602969.js"].map(a=>e.l(a))).then(()=>a(71742)))},69238,e=>{e.v(a=>Promise.all(["static/chunks/fd5ef8daa941afe5.js"].map(a=>e.l(a))).then(()=>a(38426)))},22499,e=>{e.v(a=>Promise.all(["static/chunks/2989a9ed90bfae9d.js"].map(a=>e.l(a))).then(()=>a(14847)))},17032,e=>{e.v(e=>Promise.resolve().then(()=>e(4858)))},62802,e=>{e.v(a=>Promise.all(["static/chunks/5d2bb34c480420ac.js"].map(a=>e.l(a))).then(()=>a(51032)))},29385,e=>{e.v(a=>Promise.all(["static/chunks/325355cbff2efc88.js"].map(a=>e.l(a))).then(()=>a(87108)))}]);