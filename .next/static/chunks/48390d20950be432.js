(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43656,e=>{"use strict";let a=(0,e.i(40895).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],43656)},44381,e=>{"use strict";var a=e.i(43935),s=e.i(68196),t=e.i(69751);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})}));r.displayName="Table";let i=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("thead",{ref:r,className:(0,t.cn)("[&_tr]:border-b",e),...s}));i.displayName="TableHeader";let l=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s}));l.displayName="TableBody",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let c=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("tr",{ref:r,className:(0,t.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));c.displayName="TableRow";let d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("th",{ref:r,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let o=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("td",{ref:r,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));o.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("caption",{ref:r,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>c])},18931,e=>{"use strict";let a=(0,e.i(40895).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],18931)},4258,e=>{"use strict";let a=(0,e.i(40895).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],4258)},10675,e=>{"use strict";var a=e.i(43935),s=e.i(68196),t=e.i(94565),r=e.i(69751);let i=(0,t.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef(({className:e,variant:s,...t},l)=>(0,a.jsx)("div",{ref:l,role:"alert",className:(0,r.cn)(i({variant:s}),e),...t}));l.displayName="Alert",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let c=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",e),...s}));c.displayName="AlertDescription",e.s(["Alert",()=>l,"AlertDescription",()=>c])},23318,e=>{"use strict";let a=(0,e.i(40895).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>a],23318)},6436,e=>{"use strict";var a=e.i(43935),s=e.i(93639),t=e.i(3416),r=e.i(46635),i=e.i(45813),l=e.i(68196),c=e.i(38334),d=e.i(51814),o=e.i(44381),n=e.i(97219),h=e.i(2602),x=e.i(65586),m=e.i(20826),u=e.i(18931),p=e.i(43656),j=e.i(4258),g=e.i(23318),f=e.i(64703),v=e.i(59426),b=e.i(9169);function N({dossierId:e,onUpdateCompletion:s}){let[t,r]=(0,l.useState)([]),[i,h]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{N()},[e]);let N=async()=>{try{let a=await f.api.getStrategicChoices(e);r(a)}catch(e){console.error("Erro ao carregar escolhas estratégicas:",e)}},T=async a=>{try{i?(await f.api.updateStrategicChoice(e,i.id,a),b.toast.success("Escolha estratégica atualizada!")):(await f.api.createStrategicChoice(e,a),b.toast.success("Escolha estratégica criada!")),m(!1),h(null),await N(),s&&s(),await (0,v.calculateSectionCompletion)(e,"STRATEGY")}catch(e){b.toast.error(e.message||"Erro ao salvar escolha estratégica")}},C=async a=>{if(confirm("Tem certeza que deseja excluir esta escolha estratégica?"))try{await f.api.deleteStrategicChoice(e,a),b.toast.success("Escolha estratégica excluída!"),await N(),s&&s(),await (0,v.calculateSectionCompletion)(e,"STRATEGY")}catch(e){b.toast.error(e.message||"Erro ao excluir escolha estratégica")}};return(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Target,{className:"size-5"}),"Escolhas Estratégicas"]}),(0,a.jsx)(c.CardDescription,{children:"Defina as escolhas estratégicas fundamentais da clínica"})]}),(0,a.jsxs)(n.Dialog,{open:x,onOpenChange:e=>{m(e),e||h(null)},children:[(0,a.jsx)(n.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(d.Button,{size:"sm",children:[(0,a.jsx)(u.Plus,{className:"mr-2 size-4"}),"Adicionar"]})}),(0,a.jsx)(n.DialogContent,{children:(0,a.jsx)(y,{choice:i,onSave:T,onCancel:()=>{m(!1),h(null)}})})]})]})}),(0,a.jsx)(c.CardContent,{children:0===t.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:'Nenhuma escolha estratégica cadastrada. Clique em "Adicionar" para criar a primeira.'}):(0,a.jsxs)(o.Table,{children:[(0,a.jsx)(o.TableHeader,{children:(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableHead,{children:"Título"}),(0,a.jsx)(o.TableHead,{children:"Prioridade"}),(0,a.jsx)(o.TableHead,{children:"Descrição"}),(0,a.jsx)(o.TableHead,{className:"text-right",children:"Ações"})]})}),(0,a.jsx)(o.TableBody,{children:t.map(e=>(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableCell,{className:"font-medium",children:e.title}),(0,a.jsx)(o.TableCell,{children:e.priority?`Prioridade ${e.priority}`:"-"}),(0,a.jsx)(o.TableCell,{className:"max-w-xs truncate",children:e.rationale||"-"}),(0,a.jsx)(o.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{h(e),m(!0)},children:(0,a.jsx)(p.Edit,{className:"size-4"})}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>C(e.id),children:(0,a.jsx)(j.Trash2,{className:"size-4 text-red-500"})})]})})]},e.id))})]})})]})}function y({choice:e,onSave:s,onCancel:t}){let[r,i]=(0,l.useState)(e?.title||""),[c,o]=(0,l.useState)(e?.rationale||""),[u,p]=(0,l.useState)(e?.priority||""),[j,g]=(0,l.useState)(e?.notes||"");return(0,a.jsxs)("form",{onSubmit:e=>{(e.preventDefault(),r.trim())?s({title:r.trim(),rationale:c.trim()||void 0,priority:u?parseInt(u):void 0,notes:j.trim()||void 0}):b.toast.error("Título é obrigatório")},children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{children:e?"Editar Escolha Estratégica":"Nova Escolha Estratégica"}),(0,a.jsx)(n.DialogDescription,{children:"Defina as informações da escolha estratégica"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"choice-title",children:"Título *"}),(0,a.jsx)(h.Input,{id:"choice-title",value:r,onChange:e=>i(e.target.value),placeholder:"Ex: Foco em tratamentos estéticos",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"choice-rationale",children:"Racional (Justificativa)"}),(0,a.jsx)(x.Textarea,{id:"choice-rationale",value:c,onChange:e=>o(e.target.value),placeholder:"Explique o raciocínio por trás desta escolha estratégica",className:"min-h-[100px]"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"choice-priority",children:"Prioridade (1-5)"}),(0,a.jsx)(h.Input,{id:"choice-priority",type:"number",min:"1",max:"5",value:u,onChange:e=>p(e.target.value),placeholder:"1 = maior prioridade"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"choice-notes",children:"Notas"}),(0,a.jsx)(x.Textarea,{id:"choice-notes",value:j,onChange:e=>g(e.target.value),placeholder:"Observações adicionais",className:"min-h-[80px]"})]})]}),(0,a.jsxs)(n.DialogFooter,{children:[(0,a.jsx)(d.Button,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),(0,a.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})}var T=e.i(10675),C=e.i(127),w=e.i(46758),E=e.i(93475);function S({sectionCode:e}){let l=(0,s.useRouter)(),d="string"==typeof l.query.dossierId?l.query.dossierId:void 0,{sectionData:o,loading:n,error:h,completionPercent:x}=(0,t.useSectionData)(d,e),{report:m,loadingReport:u,generatingReport:p,handleGenerateReport:j}=(0,r.useSectionReport)(d,e);return d?n?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(C.Loader2,{className:"size-8 animate-spin text-teal-600"})}):h?(0,a.jsx)(c.Card,{children:(0,a.jsx)(c.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center text-red-600",children:[(0,a.jsx)("p",{children:"Erro ao carregar dados da seção"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:h.message})]})})}):o?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.Card,{children:(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"bg-teal-100 dark:bg-teal-900/30 p-3 rounded-lg",children:(0,a.jsx)(g.Target,{className:"size-6 text-teal-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(c.CardTitle,{children:o.section.name}),o.section.description&&(0,a.jsx)(c.CardDescription,{className:"mt-2",children:o.section.description})]})]})})}),(0,a.jsxs)(T.Alert,{children:[(0,a.jsx)(w.AlertCircle,{className:"size-4"}),(0,a.jsxs)(T.AlertDescription,{children:[(0,a.jsx)("strong",{children:"Seção de Síntese & Decisões Estratégicas:"})," Esta seção consolida os dados dos blocos diagnósticos (Identidade, Mercado, Oferta, Operações, Pessoas) e gera uma síntese estratégica com escolhas claras, trade-offs explícitos e renúncias necessárias."]})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsxs)(c.CardHeader,{children:[(0,a.jsx)(c.CardTitle,{className:"text-lg",children:"Status dos Insumos Diagnósticos"}),(0,a.jsx)(c.CardDescription,{children:"A qualidade da síntese estratégica depende da completude dos blocos anteriores"})]}),(0,a.jsx)(c.CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:["IDENTITY","BUSINESS_MODEL","MARKET","OFFER","OPERATIONS","PEOPLE"].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.CheckCircle2,{className:"size-4 text-green-600"}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"Aguardando dados reais"})]})]},e))})})]}),(0,a.jsx)(N,{dossierId:d}),(0,a.jsx)(i.default,{report:m,loading:u,generating:p,onGenerate:j,sectionCode:e,sectionTitle:"Síntese Estratégica"})]}):(0,a.jsx)(c.Card,{children:(0,a.jsx)(c.CardContent,{className:"pt-6",children:(0,a.jsx)("div",{className:"text-center text-slate-500",children:(0,a.jsx)("p",{children:"Nenhum dado encontrado para esta seção"})})})}):null}function k(){return(0,a.jsx)(S,{sectionCode:"STRATEGY"})}e.s(["default",()=>k],6436)},68103,(e,a,s)=>{let t="/dossie/[dossierId]/strategy";(window.__NEXT_P=window.__NEXT_P||[]).push([t,()=>e.r(6436)]),a.hot&&a.hot.dispose(function(){window.__NEXT_P.push([t])})},64270,e=>{e.v(a=>Promise.all(["static/chunks/4ddff7bfb1602969.js"].map(a=>e.l(a))).then(()=>a(71742)))},69238,e=>{e.v(a=>Promise.all(["static/chunks/fd5ef8daa941afe5.js"].map(a=>e.l(a))).then(()=>a(38426)))},22499,e=>{e.v(a=>Promise.all(["static/chunks/2989a9ed90bfae9d.js"].map(a=>e.l(a))).then(()=>a(14847)))},17032,e=>{e.v(e=>Promise.resolve().then(()=>e(4858)))},62802,e=>{e.v(a=>Promise.all(["static/chunks/5d2bb34c480420ac.js"].map(a=>e.l(a))).then(()=>a(51032)))},29385,e=>{e.v(a=>Promise.all(["static/chunks/325355cbff2efc88.js"].map(a=>e.l(a))).then(()=>a(87108)))}]);